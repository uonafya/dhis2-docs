<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.59.&nbsp;Sharing</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="up" href="ch01.html" title="Chapter&nbsp;1.&nbsp;Web API"><link rel="prev" href="ch01s58.html" title="1.58.&nbsp;Email"><link rel="next" href="ch01s60.html" title="1.60.&nbsp;Scheduling"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.59.&nbsp;Sharing</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s58.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Web API</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch01s60.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12250"></a>1.59.&nbsp;Sharing</h2></div></div></div><p>The sharing solution allows you to share most objects in the system with specific user
      groups and to define whether objects should be publicly accessible or private. To get and set
      sharing status for objects you can interact with the <span class="italic">sharing</span> resource.</p><pre class="screen">/api/sharing</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e12260"></a>1.59.1.&nbsp;Get sharing status</h3></div></div></div><p>To request the sharing status for an object use a GET request to:</p><pre class="screen">api/sharing?type=dataElement&amp;id=fbfJHSPpUQD</pre><p>The response looks like the below.</p><pre class="screen">{
    "meta": {
        "allowPublicAccess": true,
        "allowExternalAccess": false
    },
    "object": {
        "id": "fbfJHSPpUQD",
        "name": "ANC 1st visit",
        "publicAccess": "rw------",
        "externalAccess": false,
        "user": {},
        "userGroupAccesses": [
            {
                "id": "hj0nnsVsPLU",
                "access": "rw------"
            },
            {
                "id": "qMjBflJMOfB",
                "access": "r-------"
            }
        ]
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e12271"></a>1.59.2.&nbsp;Set sharing status</h3></div></div></div><p>You can define the sharing status for an object using the same URL with a POST request,
      where the payload in JSON format looks like this:</p><pre class="screen">{
    "object": {
        "publicAccess": "rw------",
        "externalAccess": false,
        "user": {},
        "userGroupAccesses": [
            {
                "id": "hj0nnsVsPLU",
                "access": "rw------"
            },
            {
                "id": "qMjBflJMOfB",
                "access": "r-------"
            }
        ]
    }
}</pre><p>In this example, the payload defines the object to have read-write public access, no
      external access (without login), read-write access to one user group and read-only access to
      another user group. You can submit this to the sharing resource using curl:</p><pre class="screen">curl -d @sharing.json "localhost/api/sharing?type=dataElement&amp;id=fbfJHSPpUQD" 
-H "Content-Type:application/json" -u admin:district -v</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s58.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch01s60.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.58.&nbsp;Email&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.60.&nbsp;Scheduling</td></tr></table></div></body></html>