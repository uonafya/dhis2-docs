<?xml version='1.0' encoding='UTF-8'?>
<chapter version="5.0"
         xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd"
          xmlns="http://docbook.org/ns/docbook"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:xl="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xhtml="http://www.w3.org/1999/xhtml"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:mth="http://www.w3.org/1998/Math/MathML"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Using Data Visualizer</title>
  <section id="dvIntro">
    <title>Data Visualizer overview</title>
    <para>The data visualizer module enables users to easily create dynamic data analysis and visualizations through charts and data tables.  You can freely select content (like indicators, periods and organisation units) for your analysis. This module can be accessed by selecting Data Visualizer from the app menu. The image below shows the viewport of the module. For a quick start:</para>
    <orderedlist>
      <listitem>
        <para> Look under the &quot;Data&quot; heading and select an indicator group from the list of groups. </para>
      </listitem>
      <listitem>
        <para>Look under &quot;Available indicators&quot; and select a few indicators from the list by double-clicking on them.</para>
      </listitem>
      <listitem>
        <para>Click &quot;Update&quot; in the top bar and see the chart unfold.</para>
      </listitem>
    </orderedlist>
    <para>The data visualizer is designed firstly to be easy-to-use - you can simply select the indicators, data elements, periods and organisation units you want to include and click &quot;Update&quot; to get your visualization. Secondly it is designed  to be fast and work well over poor Internet connections - charts are generated in the web browser and very little data is transferred over the Internet.</para>
    <screenshot>
      <screeninfo>Data visualizer module displaying a column chart.</screeninfo>
      <mediaobject>
        <imageobject>
          <imagedata width="100%" align="center" fileref="resources/images/visualizer/column_chart.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>
  <section id="dvChartTypes">
    <title>Selecting chart type</title>
    <para>The visualizer module provides nine different chart types, each with different characteristics. You can select the type of your chart by clicking on one of the icons  in  top left bar titled &quot;Chart type&quot;.</para>
    <orderedlist>
      <listitem>
        <para>Column chart: Chart which displays information as vertical rectangular columns with
          lengths proportional to the values they represent. Useful e.g. for comparing performance
          of different districts.</para>
      </listitem>
      <listitem>
        <para>Stacked column chart: Chart with vertical rectangular columns where bars representing
          multiple categories are stacked on top of each other. Useful e.g. for displaying trends or
          sums of related data elements.</para>
      </listitem>
      <listitem>
        <para>Bar chart: Same as column chart, only with horizontal bars.</para>
      </listitem>
      <listitem>
        <para>Stacked bar chart: Same as stacked column chart, only with horizontal bars.</para>
      </listitem>
      <listitem>
        <para>Line chart: Graph which displays information as a series of points connected by
          straight lines. Also referred to as time series. Useful e.g. to visualize trends in
          indicator data over multiple time periods.</para>
      </listitem>
      <listitem>
        <para>Area chart: Chart which is based on line chart, with the space between the axis and the line filled with colors and the lines stacked on top of each other. Useful for comparing the trends of related indicators.</para>
      </listitem>
      <listitem>
        <para>Pie chart: Circular chart divided into sectors (or slices). Useful e.g. to visualize
          the proportion of data for individual data elements compared to the total sum of all data
          elements in the chart.</para>
      </listitem>
      <listitem>
        <para>Radar chart: Displaying multivariate data on axes starting from the same point. Also known as spider chart.</para>
      </listitem>
      <listitem>
        <para>Speedometer Chart: Semi-circle chart which displays values out of 100%. Sometimes referred to as a gauge chart.   </para>
      </listitem>
    </orderedlist>
  </section>
  <section id="dvSeriesCategoryFilter">
    <title>Selecting series, category and filter</title>
    <para>The series, category and filter can be defined by selecting the &quot;Layout&quot; option in the data visualizer app. </para>
    <para><screenshot>
        <mediaobject>
          <imageobject>
            <imagedata width="80%" align="center" scale="100" fileref="resources/images/visualizer/chart_layout.png"/>
          </imageobject>
        </mediaobject>
      </screenshot></para>
    <para>This section lets you define which dimension of the data you want to appear as series, category and filter by dragging and dropping these options to the appropriate space. Only one dimension can be in each section. </para>
    <para>This asks for a closer explanation. Dimension in this regard refers to the elements which describe the data values in the system. We have three main dimensions in the system:</para>
    <orderedlist>
      <listitem>
        <para>Data: Includes data elements, indicators and datasets (reporting rates), describing the phenomena or event of the data.</para>
      </listitem>
      <listitem>
        <para>Periods: Describes when the event took place.</para>
      </listitem>
      <listitem>
        <para>Organisation units: Describes where the event took place.</para>
      </listitem>
    </orderedlist>
    <para>The visualization module lets you use these dimensions completely flexible in terms of appearing as series, categories and filter. Understanding these concepts is most easily done by looking at the screenshot from the opening page below: </para>
    <screenshot>
      <screeninfo>Example chart illustrating the concepts of series, categories and filter.</screeninfo>
      <mediaobject>
        <imageobject>
          <imagedata width="80%" align="center" fileref="resources/images/visualizer/series_category_filter.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para>More formally this can be described as following:</para>
    <orderedlist>
      <listitem>
        <para>Series: A series is a set of continuous, related elements (e.g. periods or data
          elements) which you want to visualize in order to emphasize trends or relations in its
          data.</para>
      </listitem>
      <listitem>
        <para>Categories: A category is a set of elements (e.g. indicators or organisation units)
          for which you want to compare its data.</para>
      </listitem>
      <listitem>
        <para>Filter: Since most charts are two-dimensional, a filter must be used on the third dimension  in order to use only a single element for the chart to become meaningful.</para>
      </listitem>
    </orderedlist>
  </section>
  <section>
    <title>Selecting indicators and data elements</title>
    <para>The visualizer module can display any number of indicators and data elements in a chart and data table. Both indicators and data elements can be selected and appear together in the same chart, with their order of appearance the same as the order in which they are selected. You can select indicators by choosing Indicators from the &quot;Data&quot; header  and selecting an indicator group from the list of groups below it. This will make the indicators in the selected group appear in the list under &quot;Available indicators&quot; to the left. From that list you can double click on any indicator in order to select it, this will move it to the list under &quot;Selected indicators&quot;. Alternatively you can mark one or more indicators and click the single-arrow button. To select all indicators you simply click on the double-arrow button. To deselect indicators you can do correspondingly in the &quot;Selected indicators&quot; list.</para>
    <para>To select data elements choose Data Elements from the &quot;Data&quot; header. The same principle for selecting and deselecting indicators applies for data elements.</para>
  </section>
  <section>
    <title>Selecting reporting rates</title>
    <para>The visualizer can display reporting rates in a chart, by itself or together with indicators and data elements. Reporting rates can be selected by choosing Reporting Rates from the &quot;Data&quot; header. Reporting rates are defined by data sets. It can be selected by double-clicking in the list of available data sets to the left.</para>
  </section>
  <section>
    <title>Selecting fixed and relative periods</title>
    <para>Click on the &quot;Periods&quot; header. For fixed periods, select a period type from the combo box. You can select any number of fixed periods from any period type. Below the fixed period you will find the relative period checkboxes and you may select as many as you like. The names should be fairly self-descriptive and they are relative to the current date, meaning that if the current month is March and you select &quot;Last month&quot;, the month of February will be included in the chart. You are also free to combine fixed periods and relative periods in the same chart. Overlapping periods will be filtered so that they only appear once.</para>
  </section>
  <section>
    <title>Selecting organisation units</title>
    <para>You can select which organisation units to include in the chart by clicking the
      &quot;Organisation units&quot; header. This section features three ways of selecting organisation units, which can be selected by clicking on the gear icon directly below the organisation units header. The default mode is called &quot;Organisation units&quot; and lets you select the organisation units you want to appear in the chart from the tree. This mode also features three checkboxes. Checking &quot;User org unit&quot; will disable the organisation unit tree and give you the organisation unit that is related to the current/logged in user instead. This is also useful for administrators as they can create a meaningful &quot;system&quot; favorite with this option checked and all users will find their respective organisation unit when they open it. The the same concept goes for &quot;User sub-units&quot; and &quot;User sub-x2-units&quot;. The second mode is called &quot;Select levels&quot;. Here you can select all organisation units at one or more levels. However, at the same time you also have the option to select parent organisation units in the tree, which makes it easy to select e.g. all facilities inside one or more districts. The same thing goes for the third mode called &quot;Select groups&quot;. Here you can select all organisation units inside one or more groups and parent organisation units at the same time.</para>
  </section>
  <section>
    <title>Selecting organisation unit group sets and data element group sets</title>
    <para>Dimension tabs listed below &quot;Organisation units&quot; are organisation unit group sets and data element group sets. You are free to add groups from any of these group sets to your chart. Remember to add the group set in either the series, category or filters combobox.</para>
  </section>
  <section>
    <title>Selecting additional data dimensions</title>
    <para>Following the organisation unit group sets and data element group sets additional data dimensions which have been configured to be used in analysis are found. Here you can add dimensions such as age, sex, etc. without having to add them in as detailed data element selections. This is useful when you want to separate these categories in your analysis.  </para>
  </section>
  <section>
    <title>Selecting chart options</title>
    <para>You can set various chart options by clicking on the &quot;Options&quot; button the chart toolbar.</para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata width="80%" align="center" scale="100" fileref="resources/images/visualizer/chart_options.png"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <itemizedlist>
      <listitem>
        <para>Show values: Shows the values above the series in the chart.</para>
      </listitem>
      <listitem>
        <para>Hide empty category items: Hides category items with no data from the chart.</para>
      </listitem>
      <listitem>
        <para>Show trend lines: The trend line will visualize how your data evolves over time - e.g.
          is performance improving or deteriorating. Makes sense when periods are selected as
          category. </para>
      </listitem>
      <listitem>
        <para>Target line value/title: Displays a horizontal line at the given domain value. Useful e.g. when you want to compare your performance to the current target.</para>
      </listitem>
      <listitem>
        <para>Base line value/title: Displays a horizontal line at the given domain value. Useful e.g. when you want to visualize how your performance has evolved since the beginning of a process.</para>
      </listitem>
      <listitem>
        <para>Sort order: Allows you to sort the values on your chart from either low to high or high to low. </para>
      </listitem>
      <listitem>
        <para>Aggregation Type: Defines how the data elements or indicators will be aggregated within the chart.</para>
      </listitem>
      <listitem>
        <para>Include only completed events: All analysis apps provides an option for only including completed events in the aggregation process. This is useful e.g. to exclude partial events in indicator calculations</para>
      </listitem>
      <listitem>
        <para>Range axis max/min: Defines the maximum and minium value which will be visible on the
          range axis.</para>
      </listitem>
      <listitem>
        <para>Range axis tick steps: Defines the number of ticks which will be visible on the range
          axis.</para>
      </listitem>
      <listitem>
        <para>Range axis decimals: Defines the number of decimals which will be used for range axis
          values.</para>
      </listitem>
      <listitem>
        <para>Range axis title: Displays a label next to the range axis (also referred to as the Y
          axis). Can give context information to the chart, e.g. the unit of measure being
          used.</para>
      </listitem>
      <listitem>
        <para>Domain axis title: Displays a label below the domain axis (also referred to as the X
          axis). Can give context information to the chart, e.g. the type of periods being
          listed.</para>
      </listitem>
      <listitem>
        <para>Hide chart legend: Hides the legend and leaves more room for the chart itself.</para>
      </listitem>
      <listitem>
        <para>Hide chart title: Hides the title of your chart.</para>
      </listitem>
      <listitem>
        <para>Chart title: Type any title you like and it will appear above the chart.</para>
      </listitem>
    </itemizedlist>
  </section>
  <section id="dvDisplayChart">
    <title>Displaying a chart</title>
    <para>You can display a chart based on your selections simply by clicking the &quot;Update&quot; button on the top centre menu. This requires that you have selected one or more elements from all of the three dimensions - data (indicators, data elements, reporting rates), periods (relative, fixed) and organisation units (units or groups). Note that &quot;Last 12 Months&quot; from the period dimension and the root organisation unit are selected by default.</para>
    <para>Notice that you can hide and show individual data series in the chart by clicking directly on the series label in the chart - they appear either at the top or to the right of the chart.</para>
    <para>If you want to give the chart more space on your screen you can click on the triple left-arrow button on the top centre menu. This will collapse the left side menu. You can get this menu back by clicking on the same button again.</para>
  </section>
  <section id="dvSaveChart">
    <title>Downloading chart as image or PDF</title>
    <para>After you have rendered a chart you can download it to your local computer as and image or pdf by clicking on &quot;Download&quot; on the top centre menu. The file will be automatically downloaded to your computer - for instance can you now embed the image file into a text document as part of a report. You can also download the data source behind the chart in json, xml, csv or Microsoft Excel format.</para>
    <para>For advanced users, two additional options are available under &quot;Advanced&quot;. JXRML will produce a template of a Jasper Report which can be further customized based on your exact needs and used as the basis for a standard report in DHIS2. The &quot;Raw data SQL&quot; will provide the actual SQL statement used to generate the data visualization. This could then be used as a data source in a Jasper report, or as the basis for an SQL view</para>
  </section>
  <section id="dvFavorites">
    <title>Saving chart as favorite</title>
    <para>Once you have rendered a chart you can save it as a favorite to able to access it easily at a later point. Click on the
      &quot;Favorites&quot; button on the top menu to open up the favorites window. Click &quot;Add new&quot; and in the name field enter the desired name for your chart. The chart will be visible only to yourself. For every favorite in the list you have four options to the right. You can rename the chart (grey button), overwrite the chart (green button), modify the sharing settings of the chart (blue button) or delete the chart (red button).</para>
    <para>These favorite charts can later be included on your personal dashboard. After saving you can navigate to the dashboard module, click on the &quot;Insert&quot; link over the chart areas and select your preferred chart.</para>
    <screenshot>
      <screeninfo>Data visualizer module displaying a column chart.</screeninfo>
      <mediaobject>
        <imageobject>
          <imagedata width="100%" fileref="resources/images/visualizer/chart_favorites.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>
  <section id="dvInterpretations">
    <title>Sharing interpretations</title>
    <para>For certain analysis-related resources in DHIS, like pivot tables, charts and maps, one can
      share a data interpretation. An interpretation is simply a link to the relevant resource
      together with a text expressing some insight about the data. If you want to share a chart
      interpretation you need to first save the chart you want to share as a favorite. Then, without
      making any changes to the chart, click the &quot;Share&quot; button the toolbar. A window will
      open up and this is where you write your interpretation. When you are done, click share button
      in the bottom right corner of the window. The window will close automatically and if the
      interpretation was shared successfully you will find a notification on the bottom
      toolbar.</para>
  </section>
  <section id="dvEmbed">
    <title>Embed charts in any web page</title>
    <para>Certain analysis-related resources in DHIS, like pivot tables, charts and maps, can be embeded in any web page by using a plugin. If you have created a chart in the Data Visualizer you will get the plugin configuration for this chart by clicking the &quot;Share&quot; button the toolbar and then &quot;Embed as plugin&quot;. You will find more information about the plugins in the web api chapter.</para>
  </section>
  <section>
    <title>Analysis integration</title>
    <para>The analysis apps in DHIS 2 are completely integrated, so you can easily switch
   between pivot table, chart and map visualization of your data. When you have made a chart
   you can click e.g. &quot;Map&quot; in the top right corner and then select &quot;Open this table as map&quot;.</para>
    <screenshot>
      <screeninfo>Analysis integration</screeninfo>
      <mediaobject>
        <imageobject>
          <imagedata align="center" scale="100" fileref="resources/images/visualizer/chart_integration.png" format="PNG"/>
        </imageobject>
      </mediaobject>
    </screenshot>
  </section>
  <section>
    <title>Exiting the data visualizer module</title>
    <para>If you want to exit the module and go back to the DHIS start page you can click on the &quot;Home&quot; button to the right side of the top centre menu.</para>
  </section>
</chapter>
