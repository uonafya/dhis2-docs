<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>DHIS2 Implementation Guide</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="keywords" content="DHIS2, HMIS, aggregate data, Health Management Information System, Integrated data repository, Health Information System"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1"></a>DHIS2 Implementation Guide</h1></div><div><div class="authorgroup">
    <div class="author"><h3 class="author"><span class="firstname">DHIS2</span> <span class="surname">Documentation Team</span></h3></div>
</div></div><div><p class="releaseinfo">2.22</p></div><div><p class="copyright">Copyright &copy; 2006-2016 </p></div><div><div class="legalnotice"><a name="d3453e18"></a>
    <p><a name="warranty"></a>
        <b>Warranty:&nbsp;</b>
         THIS DOCUMENT IS PROVIDED BY  THE AUTHORS ''AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS MANUAL AND PRODUCTS MENTIONED HEREIN, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    </p>
    <p><a name="license"></a>
        <b>License:&nbsp;</b>
         Permission is granted to copy, distribute and/or modify this document
            under the terms of the GNU Free Documentation License, Version 1.3
            or any later version published by the Free Software Foundation;
            with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
            A copy of the license is included in the source of this documentation, and is available here online:<a class="ulink" href="http://www.gnu.org/licenses/fdl.html" target="_top"> http://www.gnu.org/licenses/fdl.html</a>.
    </p>
</div></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="Revision History"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left">Revision Revision  1925</td><td align="left"></td></tr><tr><td align="left" colspan="2">Version 2.22 2016-04-07 09:45:18</td></tr></table></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#d3453e30">1. Recommendations for National HIS Implementations</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e33">1.1. Database development</a></span></dt><dt><span class="section"><a href="#d3453e37">1.2. Import and mapping of existing databases</a></span></dt><dt><span class="section"><a href="#d3453e40">1.3. Securing necessary resources for the implementation</a></span></dt><dt><span class="section"><a href="#d3453e43">1.4. Integration of parallel systems</a></span></dt><dt><span class="section"><a href="#d3453e46">1.5. Setup of a reliable online national server</a></span></dt><dt><span class="section"><a href="#d3453e49">1.6. Pilot phase</a></span></dt><dt><span class="section"><a href="#d3453e53">1.7. Roll out</a></span></dt><dt><span class="section"><a href="#d3453e66">1.8. Training</a></span></dt><dt><span class="section"><a href="#d3453e71">1.9. Decentralization of data capture and management</a></span></dt><dt><span class="section"><a href="#d3453e74">1.10. Review and extension</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e77">2. Conceptual Design Principles</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e95">2.1. All meta data can be added and modified through the user interface</a></span></dt><dt><span class="section"><a href="#d3453e99">2.2. A flexible data model supports different data sources to be integrated in one single data repository</a></span></dt><dt><span class="section"><a href="#d3453e103">2.3. Data input != Data output</a></span></dt><dt><span class="section"><a href="#d3453e108">2.4. Indicator-driven data analysis and reporting</a></span></dt><dt><span class="section"><a href="#d3453e113">2.5. Maintain disaggregated facility-data in the database</a></span></dt><dt><span class="section"><a href="#d3453e116">2.6. Support data analysis at any level in the health system</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e121">3. Setting Up a New Database</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e124">3.1. Strategies for getting started</a></span></dt><dt><span class="section"><a href="#d3453e140">3.2. Controlled or open process?</a></span></dt><dt><span class="section"><a href="#d3453e147">3.3. Steps for developing a database</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e150">3.3.1. The organisational hierarchy</a></span></dt><dt><span class="section"><a href="#d3453e154">3.3.2. Data Elements</a></span></dt><dt><span class="section"><a href="#d3453e159">3.3.3. Data sets and data entry forms</a></span></dt><dt><span class="section"><a href="#d3453e163">3.3.4. Validation rules</a></span></dt><dt><span class="section"><a href="#d3453e166">3.3.5. Indicators</a></span></dt><dt><span class="section"><a href="#d3453e171">3.3.6. Report tables and reports</a></span></dt><dt><span class="section"><a href="#d3453e174">3.3.7. GIS (Maps)</a></span></dt><dt><span class="section"><a href="#d3453e177">3.3.8. Charts and dashboard</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d3453e180">4. Deployment Strategies</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e183">4.1. Offline Deployment</a></span></dt><dt><span class="section"><a href="#d3453e195">4.2. Online deployment</a></span></dt><dt><span class="section"><a href="#d3453e210">4.3. Hybrid deployment</a></span></dt><dt><span class="section"><a href="#d3453e215">4.4. Server hosting</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e248">5. DHIS 2 as Data Warehouse</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e251">5.1. Data warehouses and operational systems</a></span></dt><dt><span class="section"><a href="#d3453e291">5.2. Aggregation strategy in DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e300">5.3. Data storage approach</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e313">6. End-user Training</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e323">6.1. What training is needed</a></span></dt><dt><span class="section"><a href="#d3453e335">6.2. Strategies for training</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e338">6.2.1. Training of trainers</a></span></dt><dt><span class="section"><a href="#d3453e342">6.2.2. Workshops and on-site training</a></span></dt><dt><span class="section"><a href="#d3453e346">6.2.3. Continuation of training</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e349">6.3. Material and courses</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e356">7. Integration</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e369">7.1. Integration and interoperability</a></span></dt><dt><span class="section"><a href="#d3453e378">7.2. Benefits of integration</a></span></dt><dt><span class="section"><a href="#d3453e388">7.3. What facilitates integration and interoperability</a></span></dt><dt><span class="section"><a href="#d3453e401">7.4. Architecture of interoperable HIS</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e407">8. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e410">8.1. Introduction</a></span></dt><dt><span class="section"><a href="#d3453e415">8.2. Server specifications</a></span></dt><dt><span class="section"><a href="#d3453e425">8.3. Server setup</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e433">8.3.1. Creating a user to run DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e443">8.3.2. Setting server time zone and locale (optional)</a></span></dt><dt><span class="section"><a href="#d3453e449">8.3.3. PostgreSQL installation</a></span></dt><dt><span class="section"><a href="#d3453e464">8.3.4. PostgreSQL performance tuning</a></span></dt><dt><span class="section"><a href="#d3453e500">8.3.5. Database configuration</a></span></dt><dt><span class="section"><a href="#d3453e511">8.3.6. File store configuration (optional)</a></span></dt><dt><span class="section"><a href="#d3453e524">8.3.7. Java installation</a></span></dt><dt><span class="section"><a href="#d3453e532">8.3.8. Install Tomcat and DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e556">8.3.9. Running DHIS 2</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e566">8.4. Reverse proxy configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e576">8.4.1. Basic setup for nginx</a></span></dt><dt><span class="section"><a href="#d3453e597">8.4.2. Enabling SSL on nginx</a></span></dt><dt><span class="section"><a href="#d3453e614">8.4.3. Enabling caching and SSL on nginx</a></span></dt><dt><span class="section"><a href="#d3453e620">8.4.4. Starting tomcat on boot-time</a></span></dt><dt><span class="section"><a href="#d3453e632">8.4.5. Making resources available with nginx</a></span></dt><dt><span class="section"><a href="#d3453e639">8.4.6. App setup with nginx</a></span></dt><dt><span class="section"><a href="#d3453e657">8.4.7. Basic reverse proxy setup with Apache</a></span></dt><dt><span class="section"><a href="#d3453e676">8.4.8. SSL encryption with Apache</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e697">8.5. LDAP configuration</a></span></dt><dt><span class="section"><a href="#d3453e725">8.6. Encryption setup</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e728">8.6.1. Java Cryptography Extension</a></span></dt><dt><span class="section"><a href="#d3453e755">8.6.2. Password configuration</a></span></dt><dt><span class="section"><a href="#d3453e763">8.6.3. Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e767">8.7. Complete configuration reference</a></span></dt><dt><span class="section"><a href="#d3453e773">8.8. Application logging</a></span></dt><dt><span class="section"><a href="#d3453e786">8.9. Working with the PostgreSQL database</a></span></dt><dt><span class="section"><a href="#d3453e794">8.10. DHIS 2 Live setup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e805">9. Support</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e808">9.1. Home page: dhis2.org</a></span></dt><dt><span class="section"><a href="#d3453e823">9.2. Collaboration platform: launchpad.net/dhis2</a></span></dt><dt><span class="section"><a href="#d3453e836">9.3. Reporting a problem</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e862">10. Organisation Units</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e866">10.1. Organisation unit hierarchy design</a></span></dt><dt><span class="section"><a href="#d3453e885">10.2. Organisation unit groups and group sets</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e894">11. Data Elements and Custom Dimensions</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e897">11.1. Data elements</a></span></dt><dt><span class="section"><a href="#d3453e902">11.2. Categories and custom dimensions</a></span></dt><dt><span class="section"><a href="#d3453e918">11.3. Data element groups</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e921">12. Data Sets and Forms</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e924">12.1. What is a data set?</a></span></dt><dt><span class="section"><a href="#d3453e930">12.2. What is a data entry form?</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e933">12.2.1. Types of data entry forms</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e946">12.3. From paper to electronic form - Lessons learned</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e949">12.3.1. Identify self-contained data elements</a></span></dt><dt><span class="section"><a href="#d3453e952">12.3.2. Leave calculations and repetitions to the computer - capture raw data only</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d3453e955">13. Data Quality</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e958">13.1. Measuring data quality</a></span></dt><dt><span class="section"><a href="#d3453e961">13.2. Reasons for poor data quality</a></span></dt><dt><span class="section"><a href="#d3453e975">13.3. Improving data quality</a></span></dt><dt><span class="section"><a href="#d3453e989">13.4. Using DHIS 2 to improve data quality</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e992">13.4.1. Data input validation</a></span></dt><dt><span class="section"><a href="#d3453e995">13.4.2. Min and max ranges</a></span></dt><dt><span class="section"><a href="#d3453e998">13.4.3. Validation rules</a></span></dt><dt><span class="section"><a href="#d3453e1003">13.4.4. Outlier analysis</a></span></dt><dt><span class="section"><a href="#d3453e1006">13.4.5. Completeness and timeliness reports</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d3453e1010">14. Indicators</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1023">14.1. What is an indicator?</a></span></dt><dt><span class="section"><a href="#d3453e1076">14.2. Purpose of indicators</a></span></dt><dt><span class="section"><a href="#d3453e1080">14.3. Indicator-driven data collection</a></span></dt><dt><span class="section"><a href="#d3453e1084">14.4. Managing indicators</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e1087">15. Users and User Roles</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1090">15.1. Users</a></span></dt><dt><span class="section"><a href="#d3453e1103">15.2. User Roles</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e1127">16. Data Analysis Tools Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1151">16.1. Data analysis tools</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1154">16.1.1. Standard reports</a></span></dt><dt><span class="section"><a href="#d3453e1157">16.1.2. Data set reports</a></span></dt><dt><span class="section"><a href="#d3453e1160">16.1.3. Data completeness report</a></span></dt><dt><span class="section"><a href="#d3453e1163">16.1.4. Static reports</a></span></dt><dt><span class="section"><a href="#d3453e1166">16.1.5. Organisation unit distribution reports</a></span></dt><dt><span class="section"><a href="#d3453e1169">16.1.6. Report tables</a></span></dt><dt><span class="section"><a href="#d3453e1172">16.1.7. Charts</a></span></dt><dt><span class="section"><a href="#d3453e1175">16.1.8. Web Pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1178">16.1.9. GIS </a></span></dt><dt><span class="section"><a href="#d3453e1181">16.1.10. My Datamart and Excel Pivot tables</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d3453e1184">17. Pivot Tables and the MyDataMart tool</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1189">17.1. Pivot table design</a></span></dt><dt><span class="section"><a href="#d3453e1194">17.2. Connecting to the DHIS 2 database</a></span></dt><dt><span class="section"><a href="#d3453e1198">17.3. Dealing with large amounts of data</a></span></dt><dt><span class="section"><a href="#d3453e1202">17.4. The MyDatamart tool</a></span></dt><dt><span class="section"><a href="#d3453e1207">17.5. Using Excel pivot tables and MyDatamart - a work-flow example</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1210">17.5.1. Download and run the MyDatamart tool for the first time</a></span></dt><dt><span class="section"><a href="#d3453e1213">17.5.2. Setup and distribute the pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1218">17.5.3. Update MyDatamart</a></span></dt><dt><span class="section"><a href="#d3453e1221">17.5.4. Update the Pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1224">17.5.5. Repeat step 3 and 4 when new data is available on the central server</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d3453e1227">18. DHIS as a platform</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1242">18.1. Web portals</a></span></dt><dt><span class="section"><a href="#d3453e1265">18.2. Apps</a></span></dt><dt><span class="section"><a href="#d3453e1268">18.3. Information Systems</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e1271">19. Localization concepts</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1288">19.1. DHIS 2 i18n tool</a></span></dt><dt><span class="section"><a href="#d3453e1315">19.2. Using the DHIS 2 translation server</a></span></dt><dt><span class="section"><a href="#d3453e1325">19.3. Important localization concepts</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d3453e1338">20. DHIS2 Tools Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1340">20.1. Overview</a></span></dt><dt><span class="section"><a href="#d3453e1358">20.2. Architecture</a></span></dt><dt><span class="section"><a href="#d3453e1368">20.3. Installation</a></span></dt><dt><span class="section"><a href="#d3453e1392">20.4. DHIS2 tools reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#d3453e1401">dhis2-instance-create</a></span><span class="refpurpose"> &#8212; Creates a new dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1449">dhis2-startup</a></span><span class="refpurpose"> &#8212; Starts a dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1469">dhis2-shutdown</a></span><span class="refpurpose"> &#8212; Stops a dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1489">dhis2-clone</a></span><span class="refpurpose"> &#8212; Clones the database of one instance to another instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1510">dhis2-deploy-war</a></span><span class="refpurpose"> &#8212; Deploys a war file</span></dt><dt><span class="refentrytitle"><a href="#d3453e1551">dhis2-logview</a></span><span class="refpurpose"> &#8212; Shows log file</span></dt><dt><span class="refentrytitle"><a href="#d3453e1571">dhis2-logtail</a></span><span class="refpurpose"> &#8212; Shows the bottom log file in real time. Type Ctrl-C to exit.</span></dt><dt><span class="refentrytitle"><a href="#d3453e1591">dhis2-create-admin</a></span><span class="refpurpose"> &#8212; Create a user for administering dhis2 instances</span></dt></dl></dd><dt><span class="section"><a href="#d3453e1608">20.5. Troubleshooting guide</a></span></dt></dl></dd><dt><span class="appendix"><a href="#d3453e1645">A. DHIS 2 Documentation Guide</a></span></dt><dd><dl><dt><span class="section"><a href="#docs_1">A.1. DHIS 2 Documentation System Overview</a></span></dt><dt><span class="section"><a href="#docs_2">A.2. Introduction</a></span></dt><dt><span class="section"><a href="#docs_3">A.3. Getting started with GitHub</a></span></dt><dt><span class="section"><a href="#docs_4">A.4. Getting the document source</a></span></dt><dt><span class="section"><a href="#docs_5">A.5. Editing the documentation</a></span></dt><dt><span class="section"><a href="#docs_6">A.6. Using images</a></span></dt><dt><span class="section"><a href="#docs_7">A.7. Linking documents together</a></span></dt><dt><span class="section"><a href="#docs_8">A.8. Handling multilingual documentation</a></span></dt><dt><span class="section"><a href="#docs_9">A.9. Building the documentation</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1732">A.9.1. Building the documentation with Apache maven</a></span></dt><dt><span class="section"><a href="#d3453e1739">A.9.2. Building with xmlto</a></span></dt></dl></dd><dt><span class="section"><a href="#docs_10">A.10. Committing your changes back to GitHub</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>20.1. <a href="#d3453e1361">Single machine all-in-one installation</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>14.1. <a href="#d3453e1027">Indicator examples</a></dt><dt>20.1. <a href="#d3453e1612">Troubleshooting guide</a></dt></dl></div>
  
  
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e30"></a>Chapter&nbsp;1.&nbsp;Recommendations for National HIS Implementations</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e33">1.1. Database development</a></span></dt><dt><span class="section"><a href="#d3453e37">1.2. Import and mapping of existing databases</a></span></dt><dt><span class="section"><a href="#d3453e40">1.3. Securing necessary resources for the implementation</a></span></dt><dt><span class="section"><a href="#d3453e43">1.4. Integration of parallel systems</a></span></dt><dt><span class="section"><a href="#d3453e46">1.5. Setup of a reliable online national server</a></span></dt><dt><span class="section"><a href="#d3453e49">1.6. Pilot phase</a></span></dt><dt><span class="section"><a href="#d3453e53">1.7. Roll out</a></span></dt><dt><span class="section"><a href="#d3453e66">1.8. Training</a></span></dt><dt><span class="section"><a href="#d3453e71">1.9. Decentralization of data capture and management</a></span></dt><dt><span class="section"><a href="#d3453e74">1.10. Review and extension</a></span></dt></dl></div>
  
  <p>The following text gives a brief overview of some of the key aspects of HIS implementations learned by HISP from numerous missions in developing countries. The various aspects can be used as input for planning of new implementation efforts or evaluation of ongoing processes.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e33"></a>1.1.&nbsp;Database development</h2></div></div></div>
    
    <p>When developing a new database a natural start is to define the data elements for which to capture data and to design the data entry forms. The data elements are the core building blocks of the database and must be reasonable stable before moving on. The next step could be to define validation rules based on the mentioned data elements to be able to better ensure the correctness of the data being captured. </p>
    <p>The other core component of the database is the organisational hierarchy which should be identified and set up in the initial phase. The health facilities are generally the source of the data and the organisational hierarchy is locating the facilities in both the geographical and in the administrative dimension. In most countries there is no strictly defined and continuously updated &#8220;master registry&#8221; for health facilities, hence this process needs to involve the different stakeholders including the district level as they will be the ones who have best knowledge about the situation.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e37"></a>1.2.&nbsp;Import and mapping of existing databases</h2></div></div></div>
    
    <p>Bringing in existing data to the new system adds significant value in the initial phase as it makes it a lot easier to demonstrate analysis capabilities such as charts and reports. This improves the ability to convince stakeholders such as health programs and donors to support the new system. In most cases there exists a large amount of electronically stored data from in-house database systems, excel sheets or other third party systems. This data should whenever possible be imported and mapped to the data elements and the organisational units (locations/facilities) of the new system with whatever feasible technical solution. This should be regarded as a one-time job for boot-strapping the database and does not have to turn into an elegant and reusable routine.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e40"></a>1.3.&nbsp;Securing necessary resources for the implementation</h2></div></div></div>
    
    <p>Doing a national roll-out is an expensive effort which requires appropriate funding for aspects mentioned in the following including procurement of hardware, server hosting, internal and external training workshops. The funding could be retrieved from the government budget and/or with help from external donors. It is vital that even relatively small amounts needed for instance for airtime for mobile Internet modem are budgeted for and provided in order to avoid frustrations and unnecessary problems for end users.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e43"></a>1.4.&nbsp;Integration of parallel systems</h2></div></div></div>
    
    <p>The typical government health domain has a lot of existing players and systems. Fist it is apparent that an integrated database containing data from various sources becomes a lot more valuable and useful than fragmented and isolated ones. For instance it improves usefulness when analysis of epidemiological data is combined with specialized HIV/AIDS, TB, financial and human resource data, or when immunization is combined with logistics/stock data as it will give a more complete picture of the situation. Second there is typically a lot of overlapping data elements being captured by the various parallel systems. For instance will HIV/AIDS related data elements be captured both by both multiple general counselling and testing programs and the specialized HIV/AIDS program, or data elements related to malaria in pregnancy will be captured by both the reproductive health program and the malaria program. Harmonization the data collection tools of such programs will reduce the total workload of the end users. This implies that such data sources should be integrated into the national information system and harmonized with the existing data elements, which involves both data entry and data analysis requirements and requires a flexible and extensible information system software. It is thus important that individual discussions and work are done with all relevant stakeholders including all health programs.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e46"></a>1.5.&nbsp;Setup of a reliable online national server</h2></div></div></div>
    
    <p>As the technological development moves on most countries have a mobile network and coverage for a certain part of the districts. The use of networked based information systems accessed over the Internet (also referred to as &#8220;cloud computing&#8221;) combined with Internet modems using the mobile network is a great approach for rapid scaling. This assumes a reliable online server at the national level. The recommended approach is to procure such hosting services from external providers (such as Linode and Amazon) which relieves the government of providing necessary features such as back-up electricity solutions, regular data backup, server maintenance and security and reliable Internet/network access. A typical concern is policy and in-country location of the data storage but this can be mitigated with special arrangements with the provider.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e49"></a>1.6.&nbsp;Pilot phase</h2></div></div></div>
    
    <p>Before initiating the national system roll out a pilot phase is required, typically for all districts in a province/region. The objective is to field test and get feedback on the system from all stakeholders. Typically end users will provide feedback on the data entry experience, involving the data entry form designs, the usability of the data entry functionality, content of reports and other analysis tools, the feasibility of doing online data entry (modem and airtime accessibility) or offline data entry (reliability of local installation). Typically one will experience some resistance from end-users regarding the change from paper based to electronic systems paradigms, for instance related to the decoupling of data entry forms and data analysis tools. One gets to test the feasibility of the network connectivity and the national server configuration with regard to performance and up-time.</p>
    <p>In the situation where one has a running legacy system it is vital to shut that system down in the pilot area. If the legacy system is still in production the primary focus of the end users will be on entering data in that system and the piloted system will get peripheral attention with suboptimal testing and learning as a result. If maintaining the legacy system is a priority then the data should be transferred by the technical team without burdening the end users.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e53"></a>1.7.&nbsp;Roll out</h2></div></div></div>
    
    <p>The roll out process is traditionally associated with installation and basic training of the system. It is, however, useful to consider it as a more comprehensive process involving multiple phases. </p>
    <p>The first phase corresponds to the traditional activities where the first objective is about<span class="italic"> data completeness:</span> To ensure that close to 100% of the data is being collected. First this implies that the system should be implemented and used at all districts in the country. Second it implies that data for all data elements included in the forms are actually reported by the districts or facilities. Data being reported within a reasonable time frame - <span class="italic">timeliness</span> - is also relevant in this context. </p>
    <p>The second objective is related to <span class="italic">data quality</span>: To ensure that data capture errors are reduced to a minimum. Several measures should be effected to achieve this: First data entry and data review should be done by skilled personnel. Second automatic data evaluation methods such as logical validation rules and outlier analysis should be applied to the data.</p>
    <p>The second phase is about enabling district and hospital officers to use <span class="italic">standard analysis tools</span> such as reports, charts an pivot tables. Users should be able to find and execute those tools with relevant data. This must be followed by a basic understanding of the purpose, meaning and consequences of those tools and of the data being analyzed.</p>
    <p>The third phase involves <span class="italic">data usage</span>: Regular use of data analysis to improve evaluation, planning and monitoring of health activities at all levels. Data from the information system should be used to evaluate the effects of implemented measures by looking at key indicators. That learning should later be used to make informed decisions on future planning. For instance when low immunization rates are discovered through an immunization report coming from the information system an outreach vaccination campaign could be effectuated. The effects of the campaign could then be monitored and evaluated based on up-to-date reports and informed decisions made on whether to intensify or wind down. The system could later provide information regarding what quantity of vaccine doses which must be ordered from the supplier.</p>
    <p>To accommodate for large-scale roll out processes a detailed plan must be made for training and follow-up as covering all districts in a country represents a logistical challenge in terms of workshop venues, trainers, participants, equipment and hardware. To speed up the process several teams could give parallel trainings.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e66"></a>1.8.&nbsp;Training</h2></div></div></div>
    
    <p>Most of the objectives mentioned in the roll out section depends heavily on appropriate user training. User training can be conducted in several ways. An effective activity, especially for getting started, is training workshops. Users such as district and province record officers, district managers, data entry officers and health program managers are gathered and given training. Training should be done as a combination of theoretical lectures and hands-on practise on relevant subjects mentioned in the roll out section such as data entry, validation and analysis. Participants should be kept at a manageable number depending on the facilities and number of trainers available. Sufficient hardware for all participants to do practical work must be provided.</p>
    <p>Another useful activity is on-the-job training which has the advantage that users get individual follow-up in their home working environment. This provides the ability to help with individual specific needs or questions and sort any issues related to hardware. Also, giving individual support will often boost the motivation and ownership feeling of end users. </p>
    <p>The period between a workshop and on the-the-job training can be used for home work assignments, where users typically are assigned to create meaningful analysis for their district or province. This work can then be given feedback on and used as basis for individual training.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e71"></a>1.9.&nbsp;Decentralization of data capture and management</h2></div></div></div>
    
    <p>Migrating from paper based systems or primitive databases to full-fledged web based health information systems and from capturing district based aggregated data to facility based data entails new possibilities for decentralized data management which should be exploited. Firstly the facilities with sufficient hardware and network connectivity should be tasked with entering their own data. This will reduce the workload of the district health records officer who might use the freed up time for data analysis, data use, feedback to facilities and data quality efforts. Secondly maintenance of the facility hierarchy in terms of facility classification and health services provided at the facilities is a resource demanding task and should be decentralized and done as a joint effort by all district officers rather than by a single national team. This will make the facility information more correct and up to date since the district officers have better knowledge of their local situation and have incentives for proper management as it will eventually affect their performance indicators and data completeness scores.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e74"></a>1.10.&nbsp;Review and extension</h2></div></div></div>
    
    <p>A national HIS is a growing organism which needs to be maintained. As the system usage increases more requirements and needs will emerge from new and existing stakeholders such as district record officers and health program staff. Regular review meetings including such stakeholders should take place where data capture tools, such as data elements and forms, and data analysis tools, such as indicators and reports, should be revised and new tools potentially added. Also, new functionality requirements should be managed and appropriate software development resources should be secured. Such regular activities for supporting the extension and enhancement of the system are vital to maintain the current momentum and learning processes and to improve long-term project sustainability.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e77"></a>Chapter&nbsp;2.&nbsp;Conceptual Design Principles</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e95">2.1. All meta data can be added and modified through the user interface</a></span></dt><dt><span class="section"><a href="#d3453e99">2.2. A flexible data model supports different data sources to be integrated in one single data repository</a></span></dt><dt><span class="section"><a href="#d3453e103">2.3. Data input != Data output</a></span></dt><dt><span class="section"><a href="#d3453e108">2.4. Indicator-driven data analysis and reporting</a></span></dt><dt><span class="section"><a href="#d3453e113">2.5. Maintain disaggregated facility-data in the database</a></span></dt><dt><span class="section"><a href="#d3453e116">2.6. Support data analysis at any level in the health system</a></span></dt></dl></div>
  
  <p>This chapter provides a introduction to some of the key conceptual design principles behind the DHIS 2 software. Understanding and being aware of these principles will help the implementer to make better use of the software when customising a local database. While this chapter introduces the principles, the following chapters will detail out how these are reflected in the database design process. </p>
  <p>The following conceptual design principles will be presented in this chapter:</p>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>All meta data can be added and modified through the user interface</p>
    </li><li class="listitem">
      <p>A flexible data model supports different data sources to be integrated in one single data repository</p>
    </li><li class="listitem">
      <p>Data Input != Data Output</p>
    </li><li class="listitem">
      <p>Indicator-driven data analysis and reporting</p>
    </li><li class="listitem">
      <p>Maintain disaggregated facility-data in the database</p>
    </li><li class="listitem">
      <p>Support data analysis at any level in the health system</p>
    </li></ul></div>
  <p>In the following section each principle is described in more detail.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e95"></a>2.1.&nbsp;All meta data can be added and modified through the user interface</h2></div></div></div>
    
    <p>The DHIS 2 application comes with a set of generic tools for data collection, validation, reporting and analysis, but the contents of the database, e.g. what data to collect, where the data comes from, and on what format, will depend on the context of use. This meta data need to be populated into the application before it can be used, and this can be done through the user interface and requires no programming. This allows for more direct involvement of the domain experts that understand the details of the HIS that the software will support. </p>
    <p>The software separates the key meta data that describes the raw data being stored in the database, which is the critical meta data that should not change much over time (to avoid corrupting the data), and the higher level meta like indicator formulas, validation rules, and groups for aggregation as well as the various layouts for collection forms and reports, which are not that critical and can be changed over time without interfering with the raw data. As this higher level meta data can be added and modified over time without interfering with the raw data, a continuous customisation process is supported. Typically new features are added over time as the local implementation team learn to master more functionality, and the users are gradually pushing for more advanced data analysis and reporting outputs.   </p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e99"></a>2.2.&nbsp;A flexible data model supports different data sources to be integrated in one single data repository</h2></div></div></div>
    
    <p>The DHIS 2 design follows an integrated approach to HIS, and supports integration of many different data sources into one single database, sometime referred to as an integrated data repository or a data warehouse.</p>
    <p>The fact that DHIS 2 is a skeleton like tool without predefined forms or reports means that it can support a lot of different aggregate data sources. There is nothing really that limits the use to the health domain either, although use in other sectors are still very limited. As long as the data is collected by and orgunit, described as a data element (possibly with some disaggregation categories), and can be represented by a predefined period frequency, it can be collected and processed in DHIS 2. This flexibility makes DHIS 2 a powerful tool to set up integrated systems that bring together collection tools, indicators, and reports from multiple health programs, departments or initiatives. Once the data is defined and then collected or imported into a DHIS 2 database, it can be analysed in correlation to any other data in the same database, no matter how and by whom it was collected. In addition to supporting integrated data analysis and reporting, this integrated approach also helps to rationalise data collection and reduce duplication.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e103"></a>2.3.&nbsp;Data input != Data output</h2></div></div></div>
    
    <p>In DHIS 2 there are three dimensions that describe the aggregated data being collected and stored in the database; the where - organisation unit, the what - data element, and the when - period. The organisation unit, data element and period make up the three core dimensions that are needed to describe any data value in the DHIS 2, whether it is in a data collection form, a chart, on a map, or in an aggregated summary report. When data is collected in an electronic data entry form, sometimes through a mirror image of the paper forms used at facility level, each entry field in the form can be described using these three dimensions. The form itself is just a tool to organise the data collection and is not describing the individual data values being collected and stored in the database. Being able to describe each data value independently through a Data Element definition (e.g. &#8216;Measles doses given &lt;1 year&#8217;) provides important flexibility when processing, validating, and analysing the data, and allows for comparison of data across collection forms and health programs. </p>
    <p>This design or data model approach separates DHIS from many of the traditional HIS software applications which treat the data collection forms as the key unit of analysis. This is typical for systems tailored to vertical programs&#8217; needs and the traditional conceptualisation of the collection form as also being the report or the analysis output. The figure below illustrates how the more fine-grained DHIS design built around the concept of Data Elements is different and how the input (data collection) is separated from the output (data analysis), supporting more flexible and varied data analysis and dissemination. The data element &#8216;Measles doses given &lt;1 y&#8217; is collected as part of a Child Immunisation collection form, but can be used individually to build up an Indicator (a formula) called  &#8216;Measles coverage &lt;1y&#8217; where it is combined with the data element called &#8216;Population &lt;1y&#8217;, being collected through another collection form. This calculated Indicator value can then be used in data analysis in various reporting tools in DHIS 2, e.g. custom designed reports with charts, pivot tables, or on a map in the GIS module.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/data_input_output.png" align="middle" width="100%"></td></tr></table></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e108"></a>2.4.&nbsp;Indicator-driven data analysis and reporting</h2></div></div></div>
    
    <p>What is referred to as a Data Element above, the key dimension that describes what is being collected, is sometimes referred to as an indicator in other settings. In DHIS 2 we distinguish between Data Elements which describe the the raw data, e.g. the counts being collected, and Indicators, which are formula-based and describe calculated values, e.g. coverage or incidence rates that are used for data analysis. Indicator values are not collected like the data (element) values, but instead calculated by the application based on formulas defined by the users. These formulas are made up of a factor (e.g. 1, 100, 100, 100 000), a numerator and a denominator, the two latter are both expressions based on one or more data elements. E.g. the indicator "Measles coverage &lt;1 year" is defined a formula with a factor 100, a numerator ("Measles doses given to children under 1 year") and a denominator ("Target population under 1 year"). The indicator "DPT1 to DPT3 drop out rate" is a formula of 100 % x ("DPT1 doses given"- "DPT3doses given") / ("DPT1 doses given"). These formulas can be added and edited through the user interface by a user with limited training, as they are quite easy to set up and do not interfere with the data values stored in the database (so adding or modifying an indicator is not a critical operation).</p>
    <p>Indicators represent perhaps the most powerful data analysis feature of the DHIS 2, and all reporting tools support the use of indicators, e.g. as displayed in the custom report in the figure above. Being able to use population data in the denominator enables comparisons of health performance across geographical areas with different target populations, which is more useful than only looking at the raw numbers. The table below uses both the raw data values (Doses) and indicator values (Cov) for the different vaccines. Comparing e.g. the two first orgunits in the list, Taita Taveta County and Kilifi County, on DPT-1 immunisation, we can see that while the raw numbers (659 vs 2088)  indicate many more doses are given in Kilifi, the coverage rates (92.2 % vs 47.5 %) show that Taita Taveta are doing a better job immunising their target population under 1 year. Looking at the final column (Immuniz. Compl. %) which indicates the completeness of reporting of the immunisation form for the same period, we can see that the numbers are more or less the same in the two counties we compared, which tells us that the coverage rates can be reasonably compared across the two counties.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/indicator_report.png" align="middle" width="100%"></td></tr></table></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e113"></a>2.5.&nbsp;Maintain disaggregated facility-data in the database</h2></div></div></div>
    
    <p>When data is collected and stored in DHIS 2 it will remain disaggregated in the database with the same level of detail as it was collected. This is a major advantage of having a database system for HIS as supposed to a paper-based or even spreadsheet based system. The system is designed to store large amounts of data and always allow drill-downs to the finest level of detail possible, which is only limited by how the data was collected or imported into the DHIS 2 database. In a perspective of a national HIS it is desired to keep the data disaggregated by health facility level, which is often the lowest level in the orgunit hierarchy. This can be done even without computerising this level, through a hybrid system of paper and computer. The data can be submitted from health facilities to e.g. district offices by paper (e.g. on monthly summary forms for one specific facility), and then at the district office they enter all the facility data into the DHIS 2 through the electronic data collection forms, one facility at a time. This will enable the districts health management teams to perform facility-wise data analysis and to e.g. provide print-outs of feedback reports generated by the DHIS 2, incl. facility comparisons, to the facility in-charges in their district.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e116"></a>2.6.&nbsp;Support data analysis at any level in the health system</h2></div></div></div>
    
    <p>While the name DHIS indicates a focus on the District, the application provides the same tools and functionality to all levels in the health system. In all the reporting tools the users can select which orgunit or orgunit level to analyse and the data displayed will be automatically aggregated up to the selected level. The DHIS 2 uses the orgunit hierarchy in aggregating data upwards and provides data by any orgunit in this hierarchy. Most of the reports are run in such a way that the users will be prompted to select an orgunit and thereby enable reuse the same report layouts for all levels. Or of desired, the report layouts can be tailored to any specific level in the health system if the needs differ between the levels.</p>
    <p>In the GIS module the users can analyse data on e.g. the sub-national level and then by clicking on the map (on e.g. a region or province) drill down to the next level, and continue like this all the way down to the source of the data at facility level. Similar drill-down functionality is provided in the Excel Pivot Tables that are linked to the DHIS 2 database. </p>
    <p>To speed up performance and reduce the response-time when providing aggregated data outputs, which may include many calculations (e.g. adding together 8000 facilities), DHIS 2 pre-calculates all the possible aggregate values and stores these in what is called a data mart. This data mart can be scheduled to run (re-built) at a given time interval, e.g. every night.  </p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e121"></a>Chapter&nbsp;3.&nbsp;Setting Up a New Database</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e124">3.1. Strategies for getting started</a></span></dt><dt><span class="section"><a href="#d3453e140">3.2. Controlled or open process?</a></span></dt><dt><span class="section"><a href="#d3453e147">3.3. Steps for developing a database</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e150">3.3.1. The organisational hierarchy</a></span></dt><dt><span class="section"><a href="#d3453e154">3.3.2. Data Elements</a></span></dt><dt><span class="section"><a href="#d3453e159">3.3.3. Data sets and data entry forms</a></span></dt><dt><span class="section"><a href="#d3453e163">3.3.4. Validation rules</a></span></dt><dt><span class="section"><a href="#d3453e166">3.3.5. Indicators</a></span></dt><dt><span class="section"><a href="#d3453e171">3.3.6. Report tables and reports</a></span></dt><dt><span class="section"><a href="#d3453e174">3.3.7. GIS (Maps)</a></span></dt><dt><span class="section"><a href="#d3453e177">3.3.8. Charts and dashboard</a></span></dt></dl></dd></dl></div>
  
  <p>The DHIS 2 application comes with a set of tools for data collection, validation, reporting and analysis, but the contents of the database, e.g. what data to collect, where the data comes from, and on what format will depend on the context of use. This meta data need to be populated into the application before it can be used, and this can be done through the user interface and requires no programming. What is required is in-depth knowledge about the local HIS context as well as an understanding of the DHIS 2 design principles (see the chapter &#8220;Key conceptual design principles in DHIS 2&#8221;). We call this initial process for database design or customisation. This chapter provides an overview of the customisation process and briefly explains the steps involved, in order to give the implementer a feeling of what this process requires. Other chapters in this manual provide a lot more detail into some of the specific steps. </p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e124"></a>3.1.&nbsp;Strategies for getting started</h2></div></div></div>
    
    <p>The following section describes a list of tips for getting off with a good start when developing a new database.</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>Quickly populate a demo database, incl. examples of reports, charts, dashboard, GIS, data entry forms. Use real data, ideally nation-wide, but not necessarily facility-level data.</p>
      </li><li class="listitem">
        <p>Put the demo database online. Server hosting with an external provider server can be a  solution to speed up the process, even if temporary. This makes a great collaborative platform and dissemination tool to get buy-in from stakeholders.</p>
      </li><li class="listitem">
        <p>The next phase is a more elaborate database design process. Parts of the demo can be reused if viable.</p>
      </li><li class="listitem">
        <p>Make sure to have a local team with different skills and background: public health, data administrator, IT and project management.</p>
      </li><li class="listitem">
        <p>Use the customisation and database design phase as a learning and training process to build local capacity through learning-by-doing.</p>
      </li><li class="listitem">
        <p>The country national team should drive the database design process but be supported and guided by experienced implementers.</p>
      </li></ol></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e140"></a>3.2.&nbsp;Controlled or open process?</h2></div></div></div>
    
    <p>As the DHIS 2 customisation process often is and should be a collaborative process, it is also important to have in mind which parts of the database that are more critical than others, e.g. to avoid an untrained user to corrupt the data. Typically it is a lot more critical to customise a database which already has data values, than working with meta data on an &#8220;empty&#8221; database. Although it might seem strange, much customisation takes place after the first data collection or import has started, e.g. when adding new validation rules, indicators or report layouts. 

The most critical mistake that can be made is to modify the meta data that directly describes the data values, and these as we have seen above, are the <span class="italic">data elements</span> and the <span class="italic">organisation units</span>. When modifying these definitions it is important to think about how the change will affect the meaning of the data values already in the system (collected using the old definitions). It is recommended to limit who can edit these core meta data through the user role management, to restrict the access to a core customisation team. </p>
    <p>Other parts of the system that are not directly coupled to the data values are a lot less critical to play around with, and here, at least in the early phases, one should encourage the users to try out new things in order to create learning. This goes for groups, validation rules, indicator formulas, charts, and reports. All these can easily be deleted or modified later without affecting the underlying data values, and therefore are not critical elements in the customisation process. </p>
    <p>Of course, later in the customisation process when going into a production phase, one should be even more careful in allowing access to edit the various meta data, as any change, also to the less critical meta data, might affect how data is aggregated together or presented in a report (although the underlying raw data is still safe and correct).</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e147"></a>3.3.&nbsp;Steps for developing a database</h2></div></div></div>
    
    <p>The following section describes concrete steps for developing a database from scratch.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e150"></a>3.3.1.&nbsp;The organisational hierarchy</h3></div></div></div>
      
      <p>The organisational hierarchy defines the organisation using the DHIS 2, the health facilities, administrative areas and other geographical areas used in data collection and data analysis. This dimension to the data is defined as a hierarchy with one root unit (e.g. Ministry of Health) and any number of levels and nodes below. Each node in this hierarchy is called an organisational unit in DHIS 2. The design of this hierarchy will determine the geographical units of analysis available to the users as data is collected and aggregated in this structure. There can only be one organisational hierarchy at the same time so its structure needs careful consideration. </p>
      <p>Additional hierarchies (e.g. parallel administrative boundaries to the health care sector) can be modelled using organisational groups and group sets, but the organisational hierarchy is the main vehicle for data aggregation on the geographical dimension. Typically national organisational hierarchies in public health have 4-6 levels, but any number of levels is supported. The hierarchy is built up of parent-child relations, e.g. a Country or MoH unit (the root) might have e.g. 8 child units (provinces), and each province again ( at level 2) might have 10-15 districts as their children. Normally the health facilities will be located at the lowest level, but they can also be located at higher levels, e.g. national or provincial hospitals, so skewed organisational trees are supported (e.g. a leaf node can be positioned at level 2 while most other leaf nodes are at level 5). </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e154"></a>3.3.2.&nbsp;Data Elements</h3></div></div></div>
      
      <p>The Data Element is perhaps the most important building block of a DHIS 2 database. It represents the <span class="italic">what</span> dimension, it explains what is being collected or analysed. In some contexts this is referred to an indicator, but in DHIS 2 we call this unit of collection and analysis a data element. The data element often represents a count of something, and its name describes what is being counted, e.g. "BCG doses given" or "Malaria cases". When data is collected, validated, analysed, reported or presented it is the data elements or expressions built upon data elements that describes the WHAT of the data. As such the data elements become important for all aspects of the system and they decide not only how data is collected, but more importantly how the data values are represented in the database, which again decides how data can be analysed and presented.</p>
      <p>A best practice when designing data elements is to think of data elements as a unit of data analysis and not just as a field in the data collection form. Each data element lives on its own in the database, completely detached from the collection form, and reports and other outputs are based on data elements and expressions/formulas composed of data elements and not the data collection forms. So the data analysis needs should drive the process, and not the look an feel of the data collection forms. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e159"></a>3.3.3.&nbsp;Data sets and data entry forms</h3></div></div></div>
      
      <p>All data entry in DHIS 2 is organised through the use of data sets. A data set is a collection of data elements grouped together for data collection, and in the case of distributed installs they also define chunks of data for export and import between instances of DHIS 2 (e.g. from a district office local installation to a national server). Data sets are not linked directly to the data values, only through their data elements and frequencies, and as such a data set can be modified, deleted or added at any point in time without affecting the raw data already captured in the system, but such changes will of course affect how new data will be collected.</p>
      <p>Once you have assigned a data set to an organisation unit that data set will be made available in Data Entry (under Services) for the organisation units you have assigned it to and for the valid periods according to the data set's period type. A default data entry form will then be shown, which is simply a list of the data elements belonging to the data set together with a column for inputting the values. If your data set contains data elements with categories such as age groups or gender, then additional columns will be automatically generated in the default form based on the categories. In addition to the default list-based data entry form there are two more alternatives, the section-based form and the custom form. Section forms allow for a bit more flexibility when it comes to using tabular forms and are quick and simple to design. Often your data entry form will need multiple tables with subheadings, and sometimes you need to disable (grey out) a few fields in the table (e.g. some categpories do not apply to all data elements), both of these functions are supported in section forms. When the form you want to design is too complicated for the default or section forms then your last option is to use a custom form. This takes more time, but gives you full flexibility in term of the design. In DHIS 2 there is a built in HTML editor (FcK Editor) for the form designer and you can either design the form in the UI or paste in your html directly (using the Source window in the editor. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e163"></a>3.3.4.&nbsp;Validation rules</h3></div></div></div>
      
      <p>Once you have set up the data entry part of the system and started to collect data then there is time to define data quality checks that help to improve the quality of the data being collected. You can add as many validation rules as you like and these are composed of left and right side expressions that again are composed of data elements, with an operator between the two sides. Typical rules are comparing subtotals to totals of something. E.g. if you have two data elements "HIV tests taken" and "HIV test result positive" then you know that in the same form (for the same period and organisational unit) the total number of tests must always be equal or higher than the number of positive tests. These rules should be absolute rules meaning that they are mathematically correct and not just assumptions or "most of the time correct". The rules can be run in data entry, after filling each form, or as a more batch like process on multiple forms at the same time, e.g. for all facilities for the previous reporting month. The results of the tests will list all violations and the detailed values for each side of the expression where the violation occurred to make it easy to go back to data entry and correct the values.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e166"></a>3.3.5.&nbsp;Indicators</h3></div></div></div>
      
      <p>Indicators represent perhaps the most powerful data analysis feature of the DHIS 2. While data elements represent the raw data (counts) being collected the indicators represent formulas providing coverage rates, incidence rates, ratios and other formula-based units of analysis. An indicator is made up of a factor (e.g. 1, 100, 100, 100 000), a numerator and a denominator, the two latter are both expressions based on one or more data elements. E.g. the indicator "BCG coverage &lt;1 year" is defined a formula with a factor 100, a numerator ("BCG doses given to children under 1 year") and a denominator ("Target population under 1 year"). The indicator "DPT1 to DPT3 drop out rate" is a formula of 100 % x ("DPT1 doses given"- "DPT3 doses given") / ("DPT1 doses given").</p>
      <p>Most report modules in DHIS 2 support both data elements and indicators and you can also combine these in custom reports, but the important difference and strength of indicators versus raw data (data element's data values) is the ability to compare data across different geographical areas (e.g. highly populated vs rural areas) as the target population can be used in the denominator.</p>
      <p>Indicators can be added, modified and deleted at any point in time without interfering with the data values in the database.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e171"></a>3.3.6.&nbsp;Report tables and reports</h3></div></div></div>
      
      <p>Standard reports in DHIS 2 is a very flexible way of presenting the data that has been collected. Data can be aggregated by any organisational unit or orgunit level, by data element, by indicators, as well as over time (e.g. monthly, quarterly, yearly). The report tables are custom data sources for the standard reports and can be flexibly defined in the user interface and later accessed in external report designers such as iReport or BIRT. These report designs can then be set up as easily accessible one-click reports with parameters so that the users can run the same reports e.g. every month when new data is entered, and also be relevant to users at all levels as the organisational unit can be selected at the time of running the report.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e174"></a>3.3.7.&nbsp;GIS (Maps)</h3></div></div></div>
      
      <p>In the integrated GIS module you can easily display your data on maps, both on polygons (areas) and as points (health facilities), and either as data elements or indicators. By providing the coordinates of your organisational units to the system you can qucikly get up to speed with this module. See the GIS section for details on how to get started.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e177"></a>3.3.8.&nbsp;Charts and dashboard</h3></div></div></div>
      
      <p>On of the easiest way to display your indicator data is through charts. An easy to use chart dialogue will guide you through the creation of various types of charts with data on indicators, organisational units and periods of your choice. These charts can easily be added to one of the four chart sections on your dashboard and there be made easily available right after log in. Make sure to set the dashboard module as the start module in user settings.</p>
    </div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e180"></a>Chapter&nbsp;4.&nbsp;Deployment Strategies</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e183">4.1. Offline Deployment</a></span></dt><dt><span class="section"><a href="#d3453e195">4.2. Online deployment</a></span></dt><dt><span class="section"><a href="#d3453e210">4.3. Hybrid deployment</a></span></dt><dt><span class="section"><a href="#d3453e215">4.4. Server hosting</a></span></dt></dl></div>
  
  <p>DHIS 2 is a network enabled application and can be accessed over the Internet, a local intranet and as a locally installed system. The deployment alternatives for DHIS 2 are in this chapter defined as i) offline deployment ii) online deployment and iii) hybrid deployment. The meaning and differences will be discussed in the following sections.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e183"></a>4.1.&nbsp;Offline Deployment</h2></div></div></div>
    
    <p>An offline deployment implies that multiple standalone offline instances are installed for end users, typically at the district level. The system is maintained primarily by the end users/district health officers who enters data and generate reports from the system running on their local server. The system will also typically be maintained by a national super-user team who pay regular visits to the district deployments. Data is moved upwards in the hierarchy by the end users producing data exchange files which are sent electronically by email or physically by mail or personal travel. (Note that the brief Internet connectivity required for sending emails does not qualify for being defined as online). This style of deployment has the obvious benefit that it works when appropriate Internet connectivity is not available. On the other side there are significant challenges with this style which are described in the following section.</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Hardware: Running stand-alone systems requires advanced hardware in terms of servers and reliable power supply to be installed, usually at district level,  all over the country. This requires appropriate funding for procurement and plan for long-term maintenance.</p>
      </li><li class="listitem">
        <p>Software platform: Local installs implies a significant need for maintenance. From experience, the biggest challenge is viruses and other malware which tend to infect local installations in the long-run. The main reason is that end users utilize memory sticks for transporting data exchange files and documents between private computers, other workstations and the system running the application. Keeping anti-virus software and operating system patches up to date in an offline environment are challenging and bad practises in terms of security are often adopted by end users. The preferred way to overcome this issue is to run a dedicated server for the application where no memory sticks are allowed and use an Linux based operating system which is not as prone for virus infections as MS Windows.</p>
      </li><li class="listitem">
        <p>Software application: Being able to distribute new functionality and bug-fixes to the health information software to users are essential for maintenance and improvement of the system. Relying on the end users to perform software upgrades requires extensive training and a high level of competence on their side as upgrading software applications might a technically challenging task. Relying on a national super-user team to maintain the software implies a lot of travelling.</p>
      </li><li class="listitem">
        <p>Database maintenance: A prerequisite for an efficient system is that all users enter data with a standardized meta-data set (data elements, forms etc). As with the previous point about software upgrades, distribution of changes to the meta-data set to numerous offline installations requires end user competence if the updates are sent electronically or a well-organized super-user team. Failure to keep the meta-data set synchronized will lead to loss of ability to move data from the districts and/or an inconsistent national database since the data entered for instance at the district level will not be compatible with the data at the national level.</p>
      </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e195"></a>4.2.&nbsp;Online deployment</h2></div></div></div>
    
    <p>An online deployment implies that a single instance of the application is set up on a server connected to the Internet. All users (clients) connect to the online central server over the Internet using a web browser. This style of deployment currently benefits from the  huge investments in and expansions of mobile networks in developing countries. This makes it possible to access online servers in even the most rural areas using mobile Internet modems  (also referred to as <span class="italic">dongles</span>).  </p>
    <p>This online deployment style has huge positive implications for the implementation process and application maintenance compared to the traditional offline standalone style:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Hardware: Hardware requirements on the end-user side are limited to a reasonably modern computer/laptop and Internet connectivity through a fixed line or a mobile modem. There is no need for a specialized server, any Internet enabled computer will be sufficient.</p>
      </li><li class="listitem">
        <p>Software platform: The end users only need a web browser to connect to the online server. All popular operating systems today are shipped with a web browser and there is no special requirement on what type or version. This means that if severe problems such as virus infections or software corruption occur one can always resort to re-formatting and installing the computer operating system or obtain a new computer/laptop. The user can continue with data entry where it was left and no data will be lost.</p>
      </li><li class="listitem">
        <p>Software application: The central server deployment style means that the application can be upgraded and maintained in a centralized fashion. When new versions of the applications are released with new features and bug-fixes it can be deployed to the single online server. All changes will then be reflected on the client side the next time end users connect over the Internet. This obviously has a huge positive impact for the process of improving the system as new features can be distributed to users immediately, all users will be accessing the same application version, and bugs and issues can be sorted out and deployed on-the-fly.</p>
      </li><li class="listitem">
        <p>Database maintenance: Similar to the previous point, changes to the meta-data can be done on the online server in a centralized fashion and will automatically propagate to all clients next time they connect to the server. This effectively removes the vast issues related to maintaining an upgraded and standardized meta-data set related to the traditional offline deployment style. It is extremely convenient for instance during the initial database development phase and during the annual database revision processes as end users will be accessing a consistent and standardized database even when changes occur frequently.</p>
      </li></ul></div>
    <p>This approach might be problematic in cases where Internet connectivity is volatile or missing in long periods of time. DHIS 2 however has certain features which requires Internet connectivity to be available only only part of the time for the system to work properly, such as the MyDatamart tool presented in a separate chapter in this guide.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e210"></a>4.3.&nbsp;Hybrid deployment</h2></div></div></div>
    
    <p>From the discussion so far one realizes that the online deployment style is favourable over the offline style but requires decent Internet connectivity where it will be used. It is important to notice that the mentioned styles can co-exist in a common deployment. It is perfectly feasible to have online as well as offline deployments within a single country. The general rule would be that districts and facilities should access the system online over the Internet where sufficient Internet connectivity exist, and offline systems should be deployed to districts where this is not the case. </p>
    <p>Defining decent Internet connectivity precisely is hard but as a rule of thumb the download speed should be minimum 10 Kbyte/second and accessibility should be minimum 70% of the time. </p>
    <p>In this regard mobile Internet modems which can be connected to a computer or laptop and access the mobile network is an extremely capable and feasible solution. Mobile Internet coverage is increasing rapidly all over the world, often provide excellent connectivity at low prices and is a great alternative to to local networks and poorly maintained fixed Internet lines. Getting in contact with national mobile network companies regarding post-paid subscriptions and potential large-order benefits can be a wort-while effort. The network coverage for each network operator in the relevant country should be investigated when deciding which deployment approach to opt for as it might differ and cover different parts of the country.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e215"></a>4.4.&nbsp;Server hosting</h2></div></div></div>
    
    <p>The online deployment approach raises the question of where and how to host the server which will run the DHIS 2 application. Typically there are several options:</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>Internal hosting within the Ministry of Health</p>
      </li><li class="listitem">
        <p>Hosting within a government data centre</p>
      </li><li class="listitem">
        <p>Hosting through an external hosting company</p>
      </li></ol></div>
    <p>The main reason for choosing the first option is often political motivation for having &#8220;physical ownership&#8221; of the database. This is perceived as important by many in order to &#8220;own&#8221; and control the data. There is also a wish to build local capacity for server administration related to sustainability of the project. This is often a donor-driven initiatives as it is perceived as a concrete and helpful mission.</p>
    <p>Regarding the second option, some places a government data centre is constructed with a view to promoting and improving the use and accessibility of public data. Another reason is that a proliferation of internal server environments is very resource demanding and it is more effective to establish centralized infrastructure and capacity.</p>
    <p>Regarding external hosting there is lately a move towards outsourcing the operation and administration of computer resources to an external provider, where those resources are accessed over the network, popularly referred to as &#8220;cloud computing&#8221; or &#8220;software as a service&#8221;. Those resources are typically accessed over the Internet using a web browser. </p>
    <p>The primary goal for an online server deployment is provide long-term stable and high-performance accessibility to the intended services. When deciding which option to choose for server environment there are many aspects to consider:</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>Human capacity for server administration and operation. There must be human resources with general skills in server administration and in the specific technologies used for the application providing the services. Examples of such technologies are web servers and database management platforms.</p>
      </li><li class="listitem">
        <p>Reliable solutions for automated backups, including local off-server and remote backup.</p>
      </li><li class="listitem">
        <p>Stable connectivity and high network bandwidth for traffic to and from the server.</p>
      </li><li class="listitem">
        <p>Stable power supply including a backup solution.</p>
      </li><li class="listitem">
        <p>Secure environment for the physical server regarding issues such as access, theft and fire.</p>
      </li><li class="listitem">
        <p>Presence of a disaster recovery plan. This plan must contain a realistic strategy for making sure that the service will be only suffering short down-times in the events of hardware failures, network downtime and more.</p>
      </li><li class="listitem">
        <p>Feasible, powerful and robust hardware.</p>
      </li></ol></div>
    <p>All of these aspects must be covered in order to create an appropriate hosting environment. The hardware requirement is deliberately put last since there is a clear tendency to give it too much attention.</p>
    <p>Looking back at the three main hosting options, experience from implementation missions in developing countries suggests that all of the hosting aspects are rarely present in option one and two at a feasible level. Reaching an acceptable level in all these aspects is challenging in terms of both human resources and money, especially when compared to the cost of option three. It has the benefit that is accommodates the mentioned political aspects and building local capacity for server administration, on the other hand can this be provided for in alternative ways.</p>
    <p>Option three - external hosting - has the benefit that it supports all of the mentioned hosting aspects at a very affordable price. Several hosting providers - of virtual servers or software as a service - offer reliable services for running most kinds of applications. Example of such providers are Linode and Amazon Web Services. Administration of such servers happens over a network connection, which most often anyway is the case with local server administration. The physical location of the server in this case becomes irrelevant as that such providers offer services in most parts of the world. This solution is increasingly becoming the standard solution for hosting of application services. The aspect of building local capacity for server administration is compatible with this option since a local ICT team can be tasked with maintaining the externally hosted server.</p>
    <p>An approach for combining the benefits of external hosting with the need for local hosting and physical ownership is to use an external hosting provider for the primary transactional system, while mirroring this server to a locally hosted non-critical server which is used for read-only purposes such as data analysis and accessed over the intranet.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e248"></a>Chapter&nbsp;5.&nbsp;DHIS 2 as Data Warehouse</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e251">5.1. Data warehouses and operational systems</a></span></dt><dt><span class="section"><a href="#d3453e291">5.2. Aggregation strategy in DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e300">5.3. Data storage approach</a></span></dt></dl></div>
  
  <p>This chapter will discuss the role and place of the DHIS 2 application in a system architecture context. It will show that DHIS 2 can serve the purpose of both a data warehouse and an operational system.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e251"></a>5.1.&nbsp;Data warehouses and operational systems</h2></div></div></div>
    
    <p>A <span class="italic">data warehouse</span> is commonly understood as a database used for analysis. Typically data is uploaded from various operational / transactional systems. Before data is loaded into the data warehouse it usually goes through various stages where it is cleaned for anomalies and redundancy and transformed to conform with the overall structure of the integrated database. Data is then made available for use by analysis, also known under terms such as<span class="italic"> data mining </span>and <span class="italic">online analytical processing</span>. The data warehouse design is optimized for speed of data retrieval and analysis. To improve performance the data storage is often redundant in the sense that the data is stored both in its most granular form and in an aggregated (summarized) form.</p>
    <p>A <span class="italic">transactional system</span> (or <span class="italic">operational system</span> from a data warehouse perspective) is a system that collects, stores and modifies low level data. This system is typically used on a day-to-day basis for data entry and validation. The design is optimized for fast insert and update performance.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/implementation_guide/data_warehouse.png" align="middle" width="100%"></td></tr></table></div>
    <p>There are several benefits of maintaining a data warehouse, some of them being:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p><span class="italic">Consistency:</span> It provides a common data model for all relevant data and acts as an abstraction over a potentially high number of data sources and feeding systems which makes it a lot easier to perform analysis.</p>
      </li><li class="listitem">
        <p><span class="italic">Reliability:</span> It is detached from the sources where the data originated from and is hence not affected if data in the operational systems is purged or lost.</p>
      </li><li class="listitem">
        <p><span class="italic">Analysis performance:</span> It is designed for maximum performance for data retrieval and analysis in contrast to operational system which are often optimized for data capture.</p>
      </li></ul></div>
    <p>There are however also significant challenges with a data warehouse approach:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p><span class="italic">High cost:</span> There is a high cost associated with moving data from various sources into a common data warehouse, especially when the operational systems are not similar in nature. Often long-term existing systems (referred to as legacy systems) put heavy constraints on the data transformation process.</p>
      </li><li class="listitem">
        <p><span class="italic">Data validity:</span> The process of moving data into the data warehouse is often complex and hence often not performed at regular and timely intervals. This will then leave the data users with out-dated and irrelevant data not suitable for planning and informed decision making.</p>
      </li></ul></div>
    <p>Due to the mentioned challenges it has lately become increasingly popular to merge the functions of the data warehouse and operational system, either into a single system which performs both tasks or with tightly integrated systems hosted together. With this approach the system provides functionality for data capture and validation as well as data analysis and manages the process of converting low-level atomic data into aggregate data suitable for analysis. This sets high standards for the system and its design as it must provide appropriate performance for both of those functions; however advances in hardware and parallel processing is increasingly making such an approach feasible.</p>
    <p>In this regard, the DHIS 2 application is designed to serve as a tool for both data capture, validation, analysis and presentation of data. It provides modules for all of the mentioned aspects, including data entry functionality and a wide array of analysis tools such as reports, charts, maps, pivot tables and dashboard.</p>
    <p>In addition, DHIS 2 is a part of a suite of interoperable health information systems which covers a wide range of needs and are all open-source software. DHIS 2 implements the standard for data and meta-data exhange in the health domain called SDMX-HD. There are many examples of operational systems which also implements this standard and potenitally can feed data into DHIS 2:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>iHRIS: System for management of human resource data. Examples of data which is relevant for a national data warehouse captured by this system is "number of doctors", "number of nurses" and "total number of staff". This data is interesting to compare for instance to district performance.</p>
      </li><li class="listitem">
        <p>OpenMRS: Medical record system being used at hospital. This system can potentially aggregate and export data on inpatient diseases to a national data warehouse.</p>
      </li><li class="listitem">
        <p>OpenELIS: Laboratory enterprise information system. This system can generate and export data on number and outcome of laboratory tests.</p>
      </li></ul></div>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/implementation_guide/dhis_data_warehouse.png" align="middle" width="100%"></td></tr></table></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e291"></a>5.2.&nbsp;Aggregation strategy in DHIS 2</h2></div></div></div>
    
    <p>The analysis tools in DHIS 2 reads aggregated data from <span class="italic">data mart</span> tables. A data mart is a data store optimized for meeting the most common user requests for data analysis. The DHIS 2 data mart contains data aggregated in the<span class="italic"> space dimension</span> (the organisation unit hierarchy), <span class="italic">time dimension</span> (over multiple periods) and for <span class="italic">indicator formulas</span> (mathematical expressions including data elements). Retrieving data directly from data marts provides good performance even in high-concurrency environments since most requests for analysis can be served with a single, simple database query against the data mart. The aggregation engine in DHIS 2 is capable of processing low-level data in the multi-millions and manage most national-level databases, and it can be said to provide <span class="italic">near real-time access</span> to aggregate data.</p>
    <p>DHIS 2 allows for setting up scheduled aggregation tasks which typically will refresh and populate the data mart with aggregated data every night. You can choose between aggregating data for the last 12 months every night, or aggregate data for the last 6 months everry night and the last 6 to 12 months every Saturday. The scheduled tasks can be configured under "Scheduling" in "Data administration" module. It is also possible to execute arbitrary data mart tasks under "Data mart" in "Reports" module.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e300"></a>5.3.&nbsp;Data storage approach</h2></div></div></div>
    
    <p>There are two leading approaches for storing data in a data warehouse, namely the <span class="italic">normalized</span> and <span class="italic">dimensional</span> approach. DHIS 2 lends a bit from the former but mostly from the latter. In the dimensional approach the data is partitioned into <span class="italic">dimensions</span> and <span class="italic">facts</span>. Facts generally refers to transactional numeric data while dimensions are the reference data that gives context and meaning to the data. The strict rules of this approach makes it easy for users to understand the data warehouse structure and provides for good performance since few tables must be combined to produce meaningful analysis, while it on the other hand might make the system less flexible and harder to change.</p>
    <p>
In DHIS the facts corresponds to the data value object in the data model. The data value captures data as numbers, yes/no or text. The <span class="italic">compulsory dimensions</span> which give meaning to the facts are the <span class="italic">data element</span>, <span class="italic">organisation unit hierarchy</span> and <span class="italic">period</span> dimensions. These dimensions are referred to as compulsory since they must be provided for all stored data records. DHIS 2 also has a custom dimensional model which makes it possible to represent any kind of dimensionality. This model must be defined prior to data capture. DHIS 2 also has a flexible model of groups and group sets which makes it possible to add custom dimensionality to the compulsory dimensions after data capture has taken place. You can read more about dimensionality in DHIS 2 in the chapter by the same name.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/implementation_guide/dimensional_approach.png" align="middle" width="100%"></td></tr></table></div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e313"></a>Chapter&nbsp;6.&nbsp;End-user Training</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e323">6.1. What training is needed</a></span></dt><dt><span class="section"><a href="#d3453e335">6.2. Strategies for training</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e338">6.2.1. Training of trainers</a></span></dt><dt><span class="section"><a href="#d3453e342">6.2.2. Workshops and on-site training</a></span></dt><dt><span class="section"><a href="#d3453e346">6.2.3. Continuation of training</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e349">6.3. Material and courses</a></span></dt></dl></div>
  
  <p>The following topics will be covered in this chapter:</p>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>What training is needed</p>
    </li><li class="listitem">
      <p>Strategies for training</p>
    </li><li class="listitem">
      <p>Material and courses</p>
    </li></ul></div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e323"></a>6.1.&nbsp;What training is needed</h2></div></div></div>
    
    <p>In a large system like a country health information system, there will be different roles for different people. The different tasks usually depends on two factors; what the person will be doing, i.e. mainly collect data, or analyse it, or maintain the database, and where the person is located, like a facility, a district office, or at national level. A first task will then be to define the different users. The most common tasks will be:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Data entry</p>
      </li><li class="listitem">
        <p>Data analysis processing, preparing reports and other information products</p>
      </li><li class="listitem">
        <p>Database maintenance - managing changes to the database</p>
      </li></ul></div>
    <p>Data entry is typically decentralized to lower levels, such as a district. Data processing takes place at all levels, while database maintenance usually is centralized. The following table gives an example of user groups and what tasks they typically have:</p>
    <p>Note here that many of the tasks are not directly linked to the use of DHIS2. Data analysis, data quality assessment, preparing feedback and planning regular review meetings are all integral to the functioning of the system, and should also be covered in a training strategy.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e335"></a>6.2.&nbsp;Strategies for training</h2></div></div></div>
    
    <p>To cover the wide array of tasks/users listed above, a training strategy is helpful. The majority of users will be at lower level; entering and using data. Only a few will have to know the database in-depth, usually at national level. The following are useful tips for end-user training strategies.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e338"></a>6.2.1.&nbsp;Training of trainers</h3></div></div></div>
      
      <p>Since the number of units and staff increase exponentially for each level (a country may have many provinces, each with many districts, each with many facilities), training of trainers is the first step. The number of trainers will vary, depending on the speed of implementation envisioned. As described below, both workshops and on-site training are useful, and especially for the on-site training many people will be needed.</p>
      <p>The trainers should be at least at the level of advanced users, in addition knowing how the database is designed, how to install and troubleshoot DHIS2, and some issues of epidemiology, i.e. concepts that are useful for monitoring and evaluation of health services. As the capabilities of the staff increase, the trainers would also need to increase their skills.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e342"></a>6.2.2.&nbsp;Workshops and on-site training</h3></div></div></div>
      
      <p>Experience has showed that training both in workshops/training sessions, and on-site in real work situations are complementary. Workshops are better for training many at the same time, and are useful early on in the training sessions. Preferably the same type of users should be trained.</p>
      <p>On-site training takes place at the work-place of the staff. It is useful to have done more organized training session like in a workshop before, so that on-site training can focus on special issues the individual staff would need more training on. Training on-site will involve less people, so it will be possible to include different types of users. An example would be a district training, where the district information officers and the district medical officer can be trained together. The communication between different users is important in the sense that it forms a common understanding of what is needed, and what is possible. Training can typically be centred around local requirements such as producing outputs (reports, charts, maps) that would be useful for local decision-support.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e346"></a>6.2.3.&nbsp;Continuation of training</h3></div></div></div>
      
      <p>Training is not a one off thing. A multi-level training strategy would aim at providing regular training as the skills of the staff increase. For example, a workshop on data entry and validation should be followed by another workshop on report generation and data analysis some time later. Regular training should also be offered to new staff, and when large changes are made to the system, such as redesign of all data collection forms.</p>
    </div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e349"></a>6.3.&nbsp;Material and courses</h2></div></div></div>
    
    <p>There is comprehensive material available for training and courses. The main source will be the three manuals available from the DHIS2 documentation repository, to be found at <a class="ulink" href="http://dhis2.org/documentation" target="_top">here</a>.</p>
    <p>The user documentation covers the background and purpose of DHIS2 together with instructions and explanations of how to perform data entry, system maintenance, meta-data set-up, import and export of data, aggregation, reporting and other topics related to the usage of the software. The developer documentation covers the technical architecture, the design of each module and use of the development frameworks behind DHIS2. The implementation guide is targeted at implementers and super-users and addresses subjects such as system design, database development, data harmonization, analysis, deployment, human resources needed and integration with other systems. The end user manual is a light-weight version of the user documentation meant for end users such as district records officers and data entry clerks. All can be opened/downloaded as both PDF and HTML, and are updated daily with the latest input from DHIS2 users worldwide.</p>
    <p>
The development of these guides depend on input from all users. For information how to to add content to them, please see the appendix on documentation in the User Documentation. Here you will also find information about how to make localized documentation, including versioning in different languages.</p>
    <p>From 2011, regional workshops and courses will be held at least once a year by the international DHIS2 community. The goal is to have national technical teams working with DHIS2 customization and implementation. Sessions will also include training and capacity building by these teams in-country. End-user training, i.e. training of district M&amp;E officers, should take place in each county by these teams.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e356"></a>Chapter&nbsp;7.&nbsp;Integration</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e369">7.1. Integration and interoperability</a></span></dt><dt><span class="section"><a href="#d3453e378">7.2. Benefits of integration</a></span></dt><dt><span class="section"><a href="#d3453e388">7.3. What facilitates integration and interoperability</a></span></dt><dt><span class="section"><a href="#d3453e401">7.4. Architecture of interoperable HIS</a></span></dt></dl></div>
  
  <p>This chapter will discuss the following topics:</p>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>Integration and interoperability</p>
    </li><li class="listitem">
      <p>Benefits of integration</p>
    </li><li class="listitem">
      <p>What facilitates integration and interoperability</p>
    </li><li class="listitem">
      <p>Architecture of  interoperable HIS</p>
    </li></ul></div>
  <p>In the following each topic will be discussed in greater detail.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e369"></a>7.1.&nbsp;Integration and interoperability</h2></div></div></div>
    
    <p>In a country there will usually be many different, isolated health information systems. The reasons for this are many, both technical and organizational. Here the focus will be on what benefits integration of these systems will bring, and why it should be a priority. First, a couple of clarifications:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>When talking about integration, we think about the process of making different information systems appear as one, i.e. data from them to be available to all relevant users as well as the harmonization of definitions and dimensions so that it is possible to combine the data in useful ways.</p>
      </li><li class="listitem">
        <p>A related concept is interoperability, which is one strategy to achieve integration. For purposes related to DHIS2, we say that it is interoperable with other software applications if it is able to share data with this. For example, DHIS2 and OpenMRS are interoperable, because there is support in both to share data definitions and data with each other.</p>
      </li></ul></div>
    <p>To say that something is integrated, then, means that they share something, and that they are available from one place, while interoperability usually means that they are able to do this sharing electronically. DHIS2 is often used as an integrated data warehouse, since it contains (aggregate) data from various sources, such as Mother and Child health, Malaria program, census data, and data on stocks and human resources. These data sources share the same platform, DHIS2, and are available all from the same place. These subsystems are thus considered integrated into one system. Interoperability will then be a useful way to integrate also those data sources available on also other software applications. For example, if census data is stored in some other database, interoperability between this database and DHIS2 would mean census data would be accessible in both (but only stored one place).</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e378"></a>7.2.&nbsp;Benefits of integration</h2></div></div></div>
    
    <p>There are several potential benefits related to integration of systems. The most important are:i</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Calculation of indicators: many indicators are based on numerators and denominators from different data sources. Examples include mortality rates, including some mortality data as numerator and population data as denominator, staff coverage and staff workload rates (human resource data, and population and headcount data), immunization rates, and the like. For these to be calculated, you need both the numerator and denominator data, and they should thus be integrated into a single data warehouse. The more data sources that are integrated, the more indicators can be generated from the central repository.</p>
      </li><li class="listitem">
        <p>Reduce manual processing and entering of data: with different data at the same place, there is no need to manually extract and process indicators, or re-enter data into the data warehouse. Especially interoperability between systems of different data types (such as patient registers and aggregate data warehouse) allows software for subsystems to both calculate and share data electronically. This reduces the amount of manual steps involved in data processing, which increases data quality.</p>
      </li><li class="listitem">
        <p>There are organizational reasons for integration. If all data can be handled by one unit in the ministry of health, instead of in various subsystems maintained by the health programs, this one unit can be professionalized. With staff which sole responsibility is data management, processing, and analysis, more specialized skills can be developed and the information handling be rationalized.</p>
      </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e388"></a>7.3.&nbsp;What facilitates integration and interoperability</h2></div></div></div>
    
    <p>There are three levels that need to be addressed in this regard:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>The motivation and will to integrate (organizational level)</p>
      </li><li class="listitem">
        <p>Standard definitions (language level)</p>
      </li><li class="listitem">
        <p>Standard for electronic storage and exchange (technical level)</p>
      </li></ul></div>
    <p>The first level is less of a topic in this guide, which takes as a point of departure that a decision has been taken about integration of data. However, it is an important issue and usually the most complex to solve given the range of actors involved in the health sector. Clear national policies on data integration, data ownership, routines for data collection, processing, and sharing, should be in place to address this issue. Often some period of disturbance to the normal data flow will take place during integration, so for many the long-term prospects of a more efficient system will have to be judged against the short-term disturbance. Integration is thus often a step-wise process, where measures need to be taken for this to happen as smoothly as possible.</p>
    <p>At the language level, there is a need to be consistent about definitions. If you have two data sources for the same data, they need to be comparable. For example, if you collect malaria data from both standard clinics and from hospitals, this data need to describe the same thing if they need to be combined for totals and indicators. If a hospital is reporting malaria cases by sex but not age group, and other clinics are reporting by age group but not sex, this data cannot be analyzed according to either of these dimensions, though a total amount of cases will be possible to calculate. There is thus a need to agree on uniform definitions.</p>
    <p>In addition to uniform definitions across the various sub-systems, data exchange standards must be adopted if data is to be shared electronically. The various software applications would need this to be able to understand each other. DHIS2 is supporting several data formats for import and export, but one standard format now supported by WHO is called SDMX-HD (Statistical Data and Metadata Exchange - Health Domain). Other software applications are also supporting this, and it allows the sharing of data definitions and aggregate data between them. For DHIS2, this means it supports import of aggregate data that are supplied by other applications, such as OpenMRS (for patient management), iHRIS (for human resources management)</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e401"></a>7.4.&nbsp;Architecture of interoperable HIS</h2></div></div></div>
    
    <p>Since there are many different use-cases for health information, such as monitoring and evaluation, budgeting, patient management and tracking, logistics management, insurance, human resource management, etc, there will be many different types of software applications functioning within the health sector. Above the issue of interoperability has been addressed, and a plan or overview of the various interoperable software applications and their specific uses, along with what data should be shared between them, is termed an architecture for health information. </p>
    <p>The role of the architecture is to function as a plan to coordinate the development and interoperability of various sub-systems within the larger health information system. It is advisable to develop a plan for the various components even if they are not currently running any software, to be able to adequately see the requirements in terms of data sharing. These requirements should then be part of any specification for the software when such is developed or procured.</p>
    <p>Below is a simple illustration of an architecture, with a focus on the data warehouse for aggregate data. The various boxes represent use cases, such as managing logistics, tracking TB patients, general patient management, etc. All of these will share aggregate data with DHIS2. Note that the arrows are two-way, because there is also a synchronization of meta-data (definitions) involved, to make sure that the right data is shared. Also, an example of the logistics and financial data applications sharing data is also shown, as there are strong links between procuring drugs and handling the budget for this. There will be many such instances of sharing data; the architecture helps us to plan better for this being implemented as the ecosystem of software applications grow.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/interoperable_his.png" align="middle" width="100%"></td></tr></table></div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e407"></a>Chapter&nbsp;8.&nbsp;Installation</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e410">8.1. Introduction</a></span></dt><dt><span class="section"><a href="#d3453e415">8.2. Server specifications</a></span></dt><dt><span class="section"><a href="#d3453e425">8.3. Server setup</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e433">8.3.1. Creating a user to run DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e443">8.3.2. Setting server time zone and locale (optional)</a></span></dt><dt><span class="section"><a href="#d3453e449">8.3.3. PostgreSQL installation</a></span></dt><dt><span class="section"><a href="#d3453e464">8.3.4. PostgreSQL performance tuning</a></span></dt><dt><span class="section"><a href="#d3453e500">8.3.5. Database configuration</a></span></dt><dt><span class="section"><a href="#d3453e511">8.3.6. File store configuration (optional)</a></span></dt><dt><span class="section"><a href="#d3453e524">8.3.7. Java installation</a></span></dt><dt><span class="section"><a href="#d3453e532">8.3.8. Install Tomcat and DHIS 2</a></span></dt><dt><span class="section"><a href="#d3453e556">8.3.9. Running DHIS 2</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e566">8.4. Reverse proxy configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e576">8.4.1. Basic setup for nginx</a></span></dt><dt><span class="section"><a href="#d3453e597">8.4.2. Enabling SSL on nginx</a></span></dt><dt><span class="section"><a href="#d3453e614">8.4.3. Enabling caching and SSL on nginx</a></span></dt><dt><span class="section"><a href="#d3453e620">8.4.4. Starting tomcat on boot-time</a></span></dt><dt><span class="section"><a href="#d3453e632">8.4.5. Making resources available with nginx</a></span></dt><dt><span class="section"><a href="#d3453e639">8.4.6. App setup with nginx</a></span></dt><dt><span class="section"><a href="#d3453e657">8.4.7. Basic reverse proxy setup with Apache</a></span></dt><dt><span class="section"><a href="#d3453e676">8.4.8. SSL encryption with Apache</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e697">8.5. LDAP configuration</a></span></dt><dt><span class="section"><a href="#d3453e725">8.6. Encryption setup</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e728">8.6.1. Java Cryptography Extension</a></span></dt><dt><span class="section"><a href="#d3453e755">8.6.2. Password configuration</a></span></dt><dt><span class="section"><a href="#d3453e763">8.6.3. Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e767">8.7. Complete configuration reference</a></span></dt><dt><span class="section"><a href="#d3453e773">8.8. Application logging</a></span></dt><dt><span class="section"><a href="#d3453e786">8.9. Working with the PostgreSQL database</a></span></dt><dt><span class="section"><a href="#d3453e794">8.10. DHIS 2 Live setup</a></span></dt></dl></div>
  
  <p>The installation chapter provides information on how to install DHIS 2 in various contexts, including online central server, offline local network, standalone application and self-contained package called DHIS 2 Live.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e410"></a>8.1.&nbsp;Introduction</h2></div></div></div>
    
  
  <p>DHIS 2 runs on all platforms for which there exists a Java Runtime Environment version 8 or
      higher, which includes most popular operating systems such as Windows, Linux and Mac. DHIS 2
      also runs on many relational database systems such as PostgreSQL, MySQL, H2 and Derby. DHIS 2
      is packaged as a standard Java Web Archive (WAR-file) and thus runs on any Servlet containers
      such as Tomcat and Jetty.</p>
  <p>The DHIS 2 team recommends Ubuntu 14.04 LTS operating system, PostgreSQL database system and
      Tomcat Servlet container as the preferred environment for server installations.</p>
  <p>This chapter provides a guide for setting up the above technology stack. It should however be read as a guide for getting up and running and not as an exhaustive documentation for the mentioned environment. We refer to the official Ubuntu, PostgreSQL and Tomcat documentation for in-depth reading.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e415"></a>8.2.&nbsp;Server specifications</h2></div></div></div>
    
    <p>DHIS 2 is a database intensive application and requires that your server has an
      appropriate amount of RAM, number of CPU cores and a fast disk. These recommendations should
      be considered as rules-of-thumb and not exact measures. DHIS 2 scales linearly on the amount
      of RAM and number of CPU cores so the more you can afford, the better the application will
      perform.</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>RAM: At least 1 GB memory per 1 million captured data records per month or per 1000
          concurrent users. At least 4 GB for a small instance, 12 GB for a medium instance.</p>
      </li><li class="listitem">
        <p>CPU cores: 4 CPU cores for a small instance, 8 CPU cores for a medium or large
          instance.</p>
      </li><li class="listitem">
        <p>Disk: Ideally use an SSD. Otherwise use a 7200 rpm disk. Minimum read speed is 150
          Mb/s, 200 Mb/s is good, 350 Mb/s or better is ideal. </p>
      </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e425"></a>8.3.&nbsp;Server setup</h2></div></div></div>
    
    <p>This section describes how to set up a server instance of DHIS 2 on Ubuntu 14.04 64 bit
      with PostgreSQL as database system and Tomcat as Servlet container. This guide is not meant to
      be a step-by-step guide per se, but rather to serve as a reference to how DHIS 2 can be
      deployed on a server. There are many possible deployment strategies, which will differ
      depending on the operating system and database you are using, and other factors. The term
        <span class="italic">invoke</span> refers to executing a given command in a terminal. </p>
    <p>For a national server the recommended configuration is a quad-core 2 Ghz processor or
      higher and 12 Gb RAM or higher. Note that a 64 bit operating system is required for utilizing
      more than 4 Gb of RAM. </p>
    <p>For this guide we assume that 8 Gb RAM is allocated for PostgreSQL and 8 GB RAM is
      allocated for Tomcat/JVM, and that a 64-bit operating system is used. <span class="italic">If you are running a different configuration please adjust the suggested values accordingly!</span> We recommend that the available memory is split roughly equally
      between the database and the JVM. Remember to leave some of the physical memory to the
      operating system for it to perform its tasks, for instance around 2 GB. The steps marked as
        <span class="italic">optional</span>, like the step for performance tuning, can be
      done at a later stage.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e433"></a>8.3.1.&nbsp;Creating a user to run DHIS 2</h3></div></div></div>
      
      <p>You should create a dedicated user for running DHIS - it is not recommended to run as
        the root user. Create a new user called dhis by invoking:</p>
      <pre class="screen">useradd -d /home/dhis -m dhis -s /bin/bash</pre>
      <p>Then make the user able to perform operations temporarily as root user by
        invoking:</p>
      <pre class="screen">usermod -G sudo dhis</pre>
      <p>Then to set the password for your account invoke:</p>
      <pre class="screen">passwd dhis</pre>
      <p>Make sure you set a strong password with at least 15 random characters. You might want
        to disable remote login for the root account for improved security by invoking:</p>
      <pre class="screen">sudo passwd -l root</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e443"></a>8.3.2.&nbsp;Setting server time zone and locale (optional)</h3></div></div></div>
      
      <p>It may be necessary to reconfigure the time zone of the server to match the time zone of
        the location which the DHIS 2 server will be covering. If you are using a virtual private
        server, the default time zone may not correspond to the time zone of your DHIS 2 location.
        You can easily reconfigure the time zone by invoking the below and following the
        instructions.</p>
      <pre class="screen">sudo dpkg-reconfigure tzdata</pre>
      <p>PostgreSQL is sensitive to locales so you might have to install your locale first. To
        check existing locales and install new ones (e.g. Norwegian):</p>
      <pre class="screen">locale -a
sudo locale-gen nb_NO.UTF-8</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e449"></a>8.3.3.&nbsp;PostgreSQL installation</h3></div></div></div>
      
      <p>Install PostgreSQL 9.3 by invoking:</p>
      <pre class="screen">sudo apt-get install postgresql-9.3</pre>
      <p>Switch to the postgres user by invoking:</p>
      <pre class="screen">sudo su postgres</pre>
      <p>Create a non-privileged user called <span class="italic">dhis</span> by
        invoking:</p>
      <pre class="screen">createuser -SDRP dhis</pre>
      <p>Enter a secure password at the prompt. Create a database by invoking:</p>
      <pre class="screen">createdb -O dhis dhis2</pre>
      <p>Return to your session by invoking <code class="code">exit</code> You now have a PostgreSQL user
        called <span class="italic">dhis</span> and a database called <span class="italic">dhis2</span>.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e464"></a>8.3.4.&nbsp;PostgreSQL performance tuning</h3></div></div></div>
      
      <p>Tuning PostgreSQL is necessary to achieve a high-performing system but is optional in
        terms of getting DHIS 2 to run. PostgreSQL is configured and tuned through the <span class="italic">postgresql.conf</span> file which can be edited like this:</p>
      <pre class="screen">sudo nano /etc/postgresql/9.3/main/postgresql.conf</pre>
      <p>and set the following properties:</p>
      <pre class="screen">shared_buffers = 3200MB</pre>
      <p>Determines how much memory should be allocated exclusively for PostgreSQL caching. This
      setting controls the size of the kernel shared memory which should be reserved for PostgreSQL.
      Should be set to around 40% of total memory dedicated for PostgreSQL.</p>
      <pre class="screen">work_mem = 20MB</pre>
      <p>Determines the amount of memory used for internal sort and hash operations. This setting
      is per connection, per query so a lot of memory may be consumed if raising this too high.
      Setting this value correctly is essential for DHIS 2 aggregation performance.</p>
      <pre class="screen">maintenance_work_mem = 512MB</pre>
      <p>Determines the amount of memory PostgreSQL can use for maintenance operations such as
        creating indexes, running vacuum, adding foreign keys. Incresing this value might improve
        performance of index creation during the analytics generation processes.</p>
      <pre class="screen">effective_cache_size = 8000MB</pre>
      <p>An estimate of how much memory is available for disk caching by the operating system (not
      an allocation) and is used by PostgreSQL to determine whether a query plan will fit into
      memory or not. Setting it to a higher value than what is really available will result in poor
      performance. This value should be inclusive of the shared_buffers setting. PostgreSQL has two
      layers of caching: The first layer uses the kernel shared memory and is controlled by the
      shared_buffers setting. PostgreSQL delegates the second layer to the operating system disk
      cache and the size of available memory can be given with the effective_cache_size
      setting.</p>
      <pre class="screen">checkpoint_segments = 32</pre>
      <p>PostgreSQL writes new transactions to a log file called WAL segments which are 16MB in size. When a number of segments have been written a checkpoint occurs. Setting this number to a larger value will thus improve performance for write-heavy systems such as DHIS 2.</p>
      <pre class="screen">checkpoint_completion_target = 0.8</pre>
      <p>Determines the percentage of segment completion before a checkpoint occurs. Setting this to a high value will thus spread the writes out and lower the average write overhead.</p>
      <pre class="screen">wal_buffers = 16MB</pre>
      <p>Sets the memory used for buffering during the WAL write process. Increasing this value might improve throughput in write-heavy systems.</p>
      <pre class="screen">synchronous_commit = off</pre>
      <p>Specifies whether transaction commits will wait for WAL records to be written to the disk before returning to the client or not. Setting this to off will improve performance considerably. It also implies that there is a slight delay between the transaction is reported successful to the client and it actually being safe, but the database state cannot be corrupted and this is a good alternative for performance-intensive and write-heavy systems like DHIS 2.</p>
      <pre class="screen">wal_writer_delay = 10000ms</pre>
      <p>Specifies the delay between WAL write operations. Setting this to a high value will improve performance on write-heavy systems since potentially many write operations can be executed within a single flush to disk.</p>
      <p>Restart PostgreSQL by invoking <code class="code">sudo /etc/init.d/postgresql restart</code></p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e500"></a>8.3.5.&nbsp;Database configuration</h3></div></div></div>
      
      <p>The database connection information is provided to DHIS 2 through a configuration file
        called <span class="italic">dhis.conf</span>. Create this file and save it in a
        convenient location. A configuration file for PostgreSQL corresponding to the above setup
        has these properties: </p>
      <pre class="screen"># Hibernate SQL dialect
connection.dialect = org.hibernate.dialect.PostgreSQLDialect

# JDBC driver class
connection.driver_class = org.postgresql.Driver

# JDBC driver connection URL
connection.url = jdbc:postgresql:dhis2

# Database username
connection.username = dhis

# Database password
connection.password = xxxx

# Database schema behavior, can be validate, update, create, create-drop
connection.schema = update

# Encryption password (sensitive)
encryption.password = xxxx</pre>
      <p>The <span class="italic">encryption.password</span> property is the password used
        when encrypting and decrypting data in the database. Note that the password must not be
        changed once it has been set and data has been encrypted as the data can then no longer be
        decrypted. Remember to set a strong password of at least <span class="bold"><strong>24
          characters</strong></span>.</p>
      <p>A common mistake is to have a white-space after the last property value so make sure
        there is no white-space at the end of any line. Also remember that this file contains the
        clear text password for your DHIS 2 database so it needs to be protected from unauthorized
        access. To do this invoke the following command which ensures that only the dhis user which
        owns the file is allowed to read it:</p>
      <pre class="screen">chmod 0600 dhis.conf</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e511"></a>8.3.6.&nbsp;File store configuration (optional)</h3></div></div></div>
      
      <p>DHIS 2 is capable of capturing and storing files. By default files will be stored on the
        file system of the server which runs DHIS 2 in a <span class="italic">files</span>
        directory under the <span class="italic">DHIS2_HOME</span> external directory
        location.</p>
      <p>You can also configure DHIS 2 to store files on cloud-based storage providers.
        Currently, AWS S3 is the only supported provider. To enable cloud-based storage you must
        define the following addtional properties in your <span class="italic">dhis.conf</span> file:</p>
      <pre class="screen"># File store provider. Currently 'filesystem' and 'aws-s3' are supported
filestore.provider = filesystem

# Directory / bucket name, refers to folder within external directory on file system and 'bucket' on AWS S3
filestore.container = files

# The following configuration is applicable only on non-filesystem providers (AWS S3)

# Datacenter location. Not required but recommended for performance reasons.
filestore.location = eu-west-1

# Public identity / username
filestore.identity = xxxx

# Secret password (sensitive)
filestore.secret = xxxx</pre>
      <p>This configuration is an example reflecting the defaults and should be changed to fit
        your needs. In other words, you can omit it entirely if you plan to use the default values.
        If you want to use an external provider the last block of properties need to be defined, as
        well as the <span class="italic">provider</span> property being set to a supported
        provider (currently only AWS S3).</p>
      <p>For a production system the initial setup of the file store should be carefully
        considered as moving files across storage providers while keeping the integrity of the
        database references could be complex. Keep in mind that the contents of the file store might
        contain both sensitive and integral information and protecting access to the folder as well
        as making sure a backup plan is in place is recommended on a production
        implementation.</p>
      <p><span class="italic">A note on external provider support: AWS S3 is the only
          supported provider at the moment but more providers are likely to be added, such as Google
          Cloud Store and Rackspace Cloud Files. Let the developers know if you have inquiries about
          adding support for more providers.</span></p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e524"></a>8.3.7.&nbsp;Java installation</h3></div></div></div>
      
      <p>Oracle Java 8 JDK is the recommended Java option as it provides the greates operating
        system support, including Ubuntu LTS 14.04. The webupd8team Java PPA provides the necessary
        packages.</p>
      <pre class="screen">sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java8-installer</pre>
      <p>Check that your installation is okay by invoking:</p>
      <pre class="screen">java -version</pre>
      <p>You can also ensure that the appropriate environment variables are set by installing this
        package:</p>
      <pre class="screen">sudo apt-get install oracle-java8-set-default</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e532"></a>8.3.8.&nbsp;Install Tomcat and DHIS 2</h3></div></div></div>
      
      <p>To install the Tomcat servlet container we will utilize the Tomcat user package by
        invoking:</p>
      <pre class="screen">sudo apt-get install tomcat7-user</pre>
      <p>This package lets us easily create a new Tomcat instance. The instance will be created
        in the current directory. An appropriate location is the home directory of the dhis
        user:</p>
      <pre class="screen">tomcat7-instance-create tomcat-dhis</pre>
      <p>This will create an instance in a directory called <span class="italic">tomcat-dhis</span>. Note that the tomcat7-user package allows for creating any number
        of dhis instances if that is desired.</p>
      <p>Next edit the file <span class="italic">tomcat-dhis/bin/setenv.sh</span> and add
        the lines below. The first line will set the location of your Java Runtime Environment, the
        second will dedicate memory to Tomcat and the third will set the location for where DHIS 2
        will search for the <span class="italic">dhis.conf</span> configuration file. Please
        check that the path the Java binaries are correct as they might vary from system to system,
        e.g. on AMD systems you might see <span class="italic">/java-7-openjdk-amd64</span>
        Note that you should adjust this to your environment:</p>
      <pre class="screen">export JAVA_HOME='/usr/lib/jvm/java-8-oracle/'
export JAVA_OPTS='-Xmx7500m -Xms4000m'
export DHIS2_HOME='/home/dhis/config'</pre>
      <p>The Tomcat configiration file is located in <span class="italic">tomcat-dhis/conf/server.xml</span>. The element which defines the connection to DHIS
        is the <span class="italic">Connector</span> element with port 8080. You can change
        the port number in the Connector element to a desired port if necessary. If UTF-8 encoding
        of request data is needed, make sure that the <span class="italic">URIEncoding</span>
        attribute is set to <span class="italic">UTF-8</span>.</p>
      <pre class="screen">&lt;Connector port="8080" protocol="HTTP/1.1"
  connectionTimeout="20000"
  redirectPort="8443"
  URIEncoding="UTF-8" /&gt;</pre>
      <p>The next step is to download the DHIS 2 WAR file and place it into the webapps directory
        of Tomcat. You can download the DHIS version 2.15 WAR release like this (replace 2.15 with
        your preferred version if necessary):</p>
      <pre class="screen">wget https://www.dhis2.org/download/releases/2.21/dhis.war</pre>
      <p>Move the WAR file into the Tomcat webapps directory. We want to call the WAR file
        ROOT.war in order to make it available at localhost directly without a context path:</p>
      <pre class="screen">mv dhis.war tomcat-dhis/webapps/ROOT.war</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e556"></a>8.3.9.&nbsp;Running DHIS 2</h3></div></div></div>
      
      <p>DHIS 2 can now be started by invoking:</p>
      <pre class="screen">tomcat-dhis/bin/startup.sh</pre>
      <p>DHIS 2 can be stopped by invoking:</p>
      <pre class="screen">tomcat-dhis/bin/shutdown.sh</pre>
      <p>To monitor the behavior of Tomcat the log is the primary source of information. The log
        can be viewed with the following command:</p>
      <pre class="screen">tail -f tomcat-dhis/logs/catalina.out</pre>
      <p>Assuming that the WAR file is called ROOT.war, you can now access your DHIS instance at
        the following URL:</p>
      <pre class="screen">http://localhost:8080</pre>
    </div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e566"></a>8.4.&nbsp;Reverse proxy configuration</h2></div></div></div>
    
    <p>A reverse proxy is a proxy server that acts on behalf of a server. Using a reverse proxy in combination with a servlet container is optional but has many advantages:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Requests can be mapped and passed on to multiple servlet containers - this improves flexibility and makes it easier to run multiple instances of DHIS on the same server. It also makes it possible to change the internal server setup without affecting clients.</p>
      </li><li class="listitem">
        <p>The DHIS application can be run as a non-root user on a port different than 80 which reduces the consequences of session hijacking.</p>
      </li><li class="listitem">
        <p>The reverse proxy can  act as a single SSL server and be configured to inspect requests for malicious content, log requests and responses and provide non-sensitive error messages which will improve security.</p>
      </li></ul></div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e576"></a>8.4.1.&nbsp;Basic setup for nginx</h3></div></div></div>
      
      <p>We recommend using <a class="ulink" href="http://www.nginx.org" target="_top">nginx</a>  as reverse proxy due to its low memory
        footprint and ease of use. To install invoke the following:</p>
      <pre class="screen">sudo apt-get install nginx</pre>
      <p>nginx can now be started, reloaded and stopped with the following commands:</p>
      <pre class="screen">sudo /etc/init.d/nginx start
sudo /etc/init.d/nginx reload
sudo /etc/init.d/nginx stop</pre>
      <p>Now that we have installed nginx we will now continue to configure regular proxying of
        requests to our Tomcat instance, which we assume runs at <span class="italic">http://localhost:8080</span>. To configure nginx you can open the configuration file
        by invoking:</p>
      <pre class="screen">sudo nano /etc/nginx/nginx.conf</pre>
      <p>nginx configuration is built around a hierarchy of blocks representing http, server and
        location, where each block inherit settings from parent blocks. The following snippet will
        configure nginx to proxy pass (redirect) requests from port 80 (which is the port nginx will
        listen on by default) to our Tomcat instance. Include the following configuration in
        nginx.conf:</p>
      <pre class="screen">http {
  gzip on; # Enables compression, incl Web API content-types
  gzip_types
    "application/json;charset=utf-8" application/json
    "application/javascript;charset=utf-8" application/javascript text/javascript
    "application/xml;charset=utf-8" application/xml text/xml
    "text/css;charset=utf-8" text/css
    "text/plain;charset=utf-8" text/plain;

  server {
    listen               80;
    root  /home/dhis/tomcat/webapps/ROOT; # Update path!
    client_max_body_size 10M;

    # Serve static files

    location ~ (\.js|\.css|\.gif|\.woff|\.ttf|\.eot|\.ico|(/dhis-web-commons/|/images/|/icons/).*\.png)$ {
      add_header  Cache-Control public;
      expires     14d;
    }

    # Proxy pass to servlet container

    location / {
      proxy_pass                http://localhost:8080/;
      proxy_redirect            off;
      proxy_set_header          Host               $host;
      proxy_set_header          X-Real-IP          $remote_addr;
      proxy_set_header          X-Forwarded-For    $proxy_add_x_forwarded_for;
      proxy_set_header          X-Forwarded-Proto  http;
      proxy_buffer_size         128k;
      proxy_buffers             8 128k;
      proxy_busy_buffers_size   256k;
    }
  }
}</pre>
      <p>You can now access your DHIS instance at <span class="italic">http://localhost</span>. Since the reverse proxy has been set up we can improve
        security by making Tomcat only listen for local connections. In <span class="italic">/conf/server.xml</span> you can add an <span class="italic">address</span>
        attribute with the value <span class="italic">localhost</span> to the Connector
        element for HTTP 1.1 like this:</p>
      <pre class="screen">&lt;Connector address="localhost" protocol="HTTP/1.1" ... &gt;</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e597"></a>8.4.2.&nbsp;Enabling SSL on nginx</h3></div></div></div>
      
      <p>In order to improve security it is recommended to configure the server running DHIS to
        communicate with clients over an encrypted connection and to identify itself to clients
        using a trusted certificate. This can be achieved through SSL which is an cryptographic
        communication protocol running on top of TCP/IP. First, install the required <span class="italic">openssl</span> library:</p>
      <pre class="screen">sudo apt-get install openssl</pre>
      <p>To configure nginx to use SSL you will need a proper SSL certificate from an SSL provider. The cost of a certificate varies a lot depending on encryption strength. An affordable certificate from <a class="ulink" href="http://www.rapidsslonline.com" target="_top">Rapid SSL Online</a> should serve most purposes. To generate the CSR (certificate signing request) you can invoke the  command below. When you are prompted for the <span class="italic">Common Name</span>, enter the fully qualified domain name for the site you are securing.</p>
      <pre class="screen">openssl req -new -newkey rsa:2048 -nodes -keyout server.key -out server.csr</pre>
      <p>When you have received your certificate files (.pem or .crt) you will need to place it
        together with the generated server.key file in a location which is reachable by nginx. A
        good location for this can be the same directory as where your nginx.conf file is
        located.</p>
      <p>Below is an nginx server block where the certificate files are named server.crt and server.key. Since SSL connections usually occur on port 443 (HTTPS) we pass requests on that port (443) on to the DHIS instance running on <span class="italic">http://localhost:8080</span> The first server block will rewrite all requests connecting to port 80 and force the use of HTTPS/SSL. This is also necessary because DHIS is using a lot of redirects internally which must be passed on to use HTTPS. Remember to replace <span class="italic">&lt;server-ip&gt;</span> with the  IP of your server. These blocks should replace the  one from the previous section.</p>
      <pre class="screen">http {
  gzip on; # Enables compression, incl Web API content-types
  gzip_types
    "application/json;charset=utf-8" application/json
    "application/javascript;charset=utf-8" application/javascript text/javascript
    "application/xml;charset=utf-8" application/xml text/xml
    "text/css;charset=utf-8" text/css
    "text/plain;charset=utf-8" text/plain;

  # HTTP server - rewrite to force use of SSL

  server {
    listen     80;
    rewrite    ^ https://&lt;server-url&gt;$request_uri? permanent;
  }

  # HTTPS server

  server {
    listen               443 ssl;
    root  /home/dhis/tomcat/webapps/ROOT; # Update path!
    client_max_body_size 10M;

    ssl                  on;
    ssl_certificate      server.crt;
    ssl_certificate_key  server.key;

    ssl_session_cache    shared:SSL:20m;
    ssl_session_timeout  10m;

    ssl_protocols              TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers                RC4:HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers  on;

    # Serve static files

    location ~ (\.js|\.css|\.gif|\.woff|\.ttf|\.eot|\.ico|(/dhis-web-commons/|/images/|/icons/).*\.png)$ {
      add_header  Cache-Control public;
      expires     14d;
    }

    # Proxy pass to servlet container

    location / {
      proxy_pass                http://localhost:8080/;
      proxy_redirect            off;
      proxy_set_header          Host               $host;
      proxy_set_header          X-Real-IP          $remote_addr;
      proxy_set_header          X-Forwarded-For    $proxy_add_x_forwarded_for;
      proxy_set_header          X-Forwarded-Proto  https;
      proxy_buffer_size         128k;
      proxy_buffers             8 128k;
      proxy_busy_buffers_size   256k;
    }
  }
}</pre>
      <p>Note the last "https" header value which is required to inform the servlet container
        that the request is coming over HTTPS. In order for tomcat to properly produce Location URLs
        using https you also need to add two other parameters to the Connector in tomcat's
        server.xml file:</p>
      <pre class="screen">&lt;Connector scheme="https" proxyPort="443" ... &gt;</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e614"></a>8.4.3.&nbsp;Enabling caching and SSL on nginx</h3></div></div></div>
      
      <p>Requests for reports, charts, maps and other analysis-related resources will often take
        some time to respond and might utilize a lot of server resources. In order to improve
        response times, reduce the load on the server and hide potential server downtime we can
        introduce a cache proxy in our server setup. The cached content will be stored in directory
        /var/cache/nginx, and up to 250 MB of storage will be allocated. Nginx will create this
        directory automatically.</p>
      <pre class="screen">http {
  # ...
  root              /home/dhis/tomcat/webapps/ROOT; # Update path!
  proxy_cache_path  /var/cache/nginx  keys_zone=dhis:250m  inactive=1d;

  gzip on; # Enables compression, incl Web API content-types
  gzip_types
    "application/json;charset=utf-8" application/json
    "application/javascript;charset=utf-8" application/javascript text/javascript
    "application/xml;charset=utf-8" application/xml text/xml
    "text/css;charset=utf-8" text/css
    "text/plain;charset=utf-8" text/plain;

  # HTTP server - rewrite to force use of HTTPS

  server {
    listen     80;
    rewrite    ^ https://&lt;server-ip&gt;$request_uri? permanent;
  }

  # HTTPS server

  server {
    listen               443 ssl;
    client_max_body_size 10M;

    ssl                  on;
    ssl_certificate      server.crt;
    ssl_certificate_key  server.key;

    ssl_session_timeout  30m;

    ssl_protocols              SSLv2 SSLv3 TLSv1;
    ssl_ciphers                HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers  on;

    # Serve static files

    location ~ (\.js|\.css|\.gif|\.woff|\.ttf|\.eot|\.ico|(/dhis-web-commons/|/images/|/icons/).*\.png)$ {
      add_header  Cache-Control public;
      expires     14d;
    }

    # Proxy pass to servlet container and potentially cache response

    location / {
      proxy_pass                http://localhost:8080/;
      proxy_redirect            off;
      proxy_set_header          Host               $host;
      proxy_set_header          X-Real-IP          $remote_addr;
      proxy_set_header          X-Forwarded-For    $proxy_add_x_forwarded_for;
      proxy_set_header          X-Forwarded-Proto  https;
      proxy_buffer_size         128k;
      proxy_buffers             8 128k;
      proxy_busy_buffers_size   256k;
      proxy_cache               dhis;
    }
  }
}

</pre>
      <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="resources/images/admon/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top">
        <p>Be aware that a server side cache shortcuts the DHIS 2 security features in the sense
          that requests which hit the server side cache will be served directly from the cache
          outside the control of DHIS 2 and the servlet container. This implies that request URLs
          can be guessed and reports retrieved from the cache by unauthorized users. Hence, if you
          capture sensitive information, setting up a server side cache is not recommended.</p>
      </td></tr></table></div>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e620"></a>8.4.4.&nbsp;Starting tomcat on boot-time</h3></div></div></div>
      
      <p>In certain situations a server might reboot unexpectedly. It is hence preferable to have
        Tomcat start automatically when the server starts. To achieve that the first step is to
        create init scripts. Create a new file called <code class="code">tomcat</code> and paste the below
        content into it (adjust the HOME variable to your environment):</p>
      <pre class="screen">#!/bin/sh
#Tomcat init script

HOME=/home/dhis/tomcat/bin

case $1 in
start)
        sh ${HOME}/startup.sh
        ;;
stop)
        sh ${HOME}/shutdown.sh
        ;;
restart)
        sh ${HOME}/shutdown.sh
        sleep 5
        sh ${HOME}/startup.sh
        ;;
esac
exit 0</pre>
      <p>Move the script to the init script directory and make them executable by
        invoking:</p>
      <pre class="screen">sudo mv tomcat /etc/init.d
sudo chmod +x /etc/init.d/tomcat</pre>
      <p>Next make sure the tomcat init script will be invoked during system startup and
        shutdown:</p>
      <pre class="screen">sudo /usr/sbin/update-rc.d -f tomcat defaults 81</pre>
      <p>Tomcat will now be started at system startup and stopped at system shutdown. If you
        later need to revert this you can replace <code class="code">defaults</code> with <code class="code">remove</code> and
        invoke the above commands again.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e632"></a>8.4.5.&nbsp;Making resources available with nginx</h3></div></div></div>
      
      <p>In some scenarios it is desirable to make certain resources publicly available on the Web without requiring authentication. One example is when you want to make data analysis related resources in the Web API available in a Web portal. The following example will allow access to charts, maps, reports, report table and document resources through basic authentication by injecting an <span class="italic">Authorization</span> HTTP  header into the request. It will remove the Cookie header from the request and the Set-Cookie header from the response in order to avoid changing the currently logged in user. It is recommended to create a user for this purpose given only the minimum authorities required. The Authorization value can be constructed by Base64-encoding the username appended with a colon and the password and prefix it "Basic ", more precisely "Basic base64_encode(username:password)". It will check the HTTP method used for requests and return <span class="italic">405 Method Not Allowed</span> if anything but GET is detected.</p>
      <p>It can be favorable to set up a separate domain for such public users when using this approach. This is because we don't want to change the credentials for already logged in users when they access the public resources. For instance, when your server is deployed at somedomain.com, you can set a dedicated subdomain at api.somedomain.com, and point URLs from your portal to this subdomain.</p>
      <pre class="screen">server {
  listen       80;
  server_name  api.somedomain.com;
    
  location ~ ^/(api/(charts|chartValues|reports|reportTables|documents|maps|organisationUnits)|dhis-web-commons/javascripts|images|dhis-web-commons-ajax-json|dhis-web-mapping|dhis-web-visualizer) {
    if ($request_method != GET) {
      return 405;
    }

    proxy_pass         http://localhost:8080;
    proxy_redirect     off;
    proxy_set_header   Host               $host;
    proxy_set_header   X-Real-IP          $remote_addr;
    proxy_set_header   X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header   X-Forwarded-Proto  http;
    proxy_set_header   Authorization      "Basic YWRtaW46ZGlzdHJpY3Q=";
    proxy_set_header   Cookie             "";
    proxy_hide_header  Set-Cookie;
  }
}</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e639"></a>8.4.6.&nbsp;App setup with nginx</h3></div></div></div>
      
      <p>DHIS 2 supports installation of apps. To avoid having to re-install your apps every time
        you update and replace the DHIS 2 WAR file it is beneficial to deploy apps on the server
        file system outside the DHIS 2 webapp directory. To install apps directly in nginx you can
        follow these steps. First create a directory which will be used as the app installation
        folder.</p>
      <pre class="screen">sudo mkdir /usr/share/nginx/apps</pre>
      <p>Make sure that the directory is owned by the user which runs Tomcat in order to allow
        the Tomcat process to save apps to this directory when they are uploaded. If the user
        running Tomcat is <span class="italic">dhis</span> you can use the below
        command.</p>
      <pre class="screen">sudo chown dhis:dhis /usr/share/nginx/apps</pre>
      <p>You must add an <span class="italic">apps</span> location in the nginx.conf
        configuration file like below. Note that we omit the apps directory itself in the root
        directive. </p>
      <pre class="screen">server {
  ...
  location /apps/ {
    root      /usr/share/nginx;
    expires   max;
  }
  ...
}  </pre>
      <p>Finally navigate to the app configuration screen in your DHIS 2 instance by going to App
        management &gt; Settings and adjust the settings accordingly.</p>
      <p>The <span class="italic">app installation folder</span> should point to the base
        directory path on the server file system:</p>
      <pre class="screen">/usr/share/nginx/apps</pre>
      <p>The <span class="italic">app base URL</span> should point to the URL where DHIS 2
        can find the apps. Replace www.domain.com with your real domain name and according to how
        you have deployed DHIS 2.</p>
      <pre class="screen">http://www.domain.com/apps</pre>
      <p>You should now be ready to upload apps from the App management screen. Remember to
        reload the nginx configuration. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e657"></a>8.4.7.&nbsp;Basic reverse proxy setup with Apache</h3></div></div></div>
      
      <p>The Apache HTTP server is the most common </p>
      <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="resources/images/admon/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top">
        <p>Using nginx is the preferred option as reverse proxy with DHIS 2 and you should not
          attempt to install both nginx and Apache on the same server. If you have installed nginx
          please ignore this section. </p>
      </td></tr></table></div>
      <p>The Apache HTTP server is the most widely used HTTP server currently. Depdenign on your
        exact nature of deployment, you may need to use Apache as a reverse proxy for your DHIS 2
        server. In this section, we will describe how to implement a simple reverse proxy setup with
        Apache. </p>
      <p>First we need to install a few necessary programs modules for Apache and enable the modules. </p>
      <pre class="screen">sudo apt-get install apache2 libapache2-mod-proxy-html libapache2-mod-jk
a2enmod proxy proxy_ajp proxy_connect</pre>
      <p>Lets define an AJP connector which Apache HTTP server will use to connect to Tomcat with. The Tomcat <code class="filename">server.xml</code> file should be located in the /conf/ director of your Tomcat installation. Be sure this line is uncommented.You can set the port to anything you like which is unused.</p>
      <pre class="screen">&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /&gt;
</pre><p>Now, we need to make the adjustments to the Apache HTTP server which will answer requests on port 80 and pass them to the Tomcat server through an AJP connector. Edit the file <code class="filename">/etc/apache2/mods-enabled/proxy.conf</code> so that it looks like the example below.  Be sure that the port defined in the configuration file matches the one from Tomcat.</p>
      <pre class="screen">&lt;IfModule mod_proxy.c&gt;

ProxyRequests Off
ProxyPass /dhis  ajp://localhost:8009/dhis
ProxyPassReverse /dhis  ajp://localhost:8009/dhis

&lt;Location "/dhis"&gt;
  Order allow,deny
  Allow from all
&lt;/Location&gt;     
&lt;/IfModule&gt;
</pre>
      <p>You now can restart Tomcat and the Apache HTTPD server and your DHIS 2 instance should be available on http://<span class="emphasis"><em>myserver</em></span>/dhis where <span class="emphasis"><em>myserver</em></span> is the hostname of your server. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e676"></a>8.4.8.&nbsp;SSL encryption with Apache</h3></div></div></div>
      
      <p>Using Apache and the reverse proxy  setup described in the previous section, we can easily implement encrypted transfer of data between clients and the server over HTTPS. This section will describe how to use self-signed certificates, although  the same procedure could be used if you have fully-signed certificates as well. </p>
      <p>First (as root), generate the necessary private key files and CSR (Certificate Signing Request) </p>
      <pre class="screen">mkdir /etc/apache2/ssl
cd /etc/apache2/ssl
openssl genrsa -des3 -out server.key 1024
openssl req -new -key server.key -out server.csr</pre>
      <p>We need to remove the password from the key, otherwise Apache will not be able to use it. </p>
      <pre class="screen">cp server.key server.key.org
openssl rsa -in server.key.org -out server.key</pre>
      <p>Next, generate a self-signed certificate which will be valid for one year.</p>
      <pre class="screen">openssl x509 -req -days 365 -in server.csr -signkey \ server.key -out server.crt</pre>
      <p>Now, lets configure Apache by enabling the SSL modules and creating a default site.</p>
      <pre class="screen">a2enmod ssl
a2ensite default-ssl</pre>
      <p>Now, we need to edit the default-ssl (located at <code class="filename">/etc/apache2/sites-enabled/default-ssl</code>) file in order to enable the SSL transfer functionality of Apache. </p>
      <pre class="screen">&lt;VirtualHost *:443&gt;
        ServerAdmin wemaster@mydomain.org
       SSLEngine On
       SSLCertificateFile /etc/apache2/ssl/server.crt
       SSLCertificateKeyFile /etc/apache2/ssl/server.key
...</pre>
      <p>Be sure that the *:80 section of this file is changed to port *:443, which is the default SSL port. Also, be sure to change the ServerAdmin to the webmaster's email. Lastly, we need to be sure that the hostname is setup properly in /etc/hosts. Just under the "localhost" line, be sure to add the server's IP address and domain name. </p>
      <pre class="screen">127.0.0.1 localhost
XXX.XX.XXX.XXX foo.mydomain.org</pre>
      <p>Now, just restart Apache and you should be able to view https://foo.mydomain.org/dhis. </p>
      <pre class="screen">/etc/init.d/apache2 restart</pre>
    </div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e697"></a>8.5.&nbsp;LDAP configuration</h2></div></div></div>
    
    <p>DHIS 2 is capable of using an LDAP server for authentication of users. For LDAP
      authentication it is required to have a matching user in the DHIS 2 database per LDAP entry.
      The DHIS 2 user will be used to represent authorities / user roles. </p>
    <p>To set up LDAP authentication you need to configure the LDAP server URL, a manager user
      and an LDAP search base and search filter. This configuration should be done in the main DHIS
      2 configuration file (dhis.conf). LDAP users, or entries, are identified by distinguished
      names (DN from now on). An example configuration looks like this:</p>
    <pre class="screen"># LDAP server URL
ldap.url = ldaps://domain.org:636

# LDAP manager entry distinguished name
ldap.manager.dn = cn=johndoe,dc=domain,dc=org

# LDAP manager entry password
ldap.manager.password = xxxx

# LDAP base search
ldap.search.base = dc=domain,dc=org

# LDAP search filter
ldap.search.filter = (cn={0})</pre>
    <p>The LDAP configuration properties are explained below:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
          <p><span class="italic">ldap.url:</span> The URL of the LDAP server for which to
            authenticate against. Using SSL/encryption is strongly recommended in order to make
            authentication secure. As example URL is <span class="italic">ldaps://domain.org:636</span>, where ldaps refers to the protocol, <span class="italic">domain.org</span> refers to the domain name or IP address, and
              <span class="italic">636</span> refers to the port (636 is default for
            LDAPS).</p>
        </li><li class="listitem">
          <p><span class="italic">ldap.manager.dn:</span> An LDAP manager user is required
            for binding to the LDAP server for the user authentication process. This property refers
            to the DN of that entry. I.e. this is not the user which will be authenticated when
            logging into DHIS 2, rather the user which binds to the LDAP server in order to do the
            authentication.</p>
        </li><li class="listitem">
          <p><span class="italic">ldap.manager.password:</span> The password for the LDAP
            manager user.</p>
        </li><li class="listitem">
          <p><span class="italic">ldap.search.base:</span> The search base, or the
            distinguished name of the search base object, which defines the location in the
            directory from which the LDAP search begins.</p>
        </li><li class="listitem">
          <p><span class="italic">ldap.search.filter:</span> The filter for matching DNs
            of entries in the LDAP directory. The {0} variable will be substituted by the DHIS 2
            username, or alternatively, the LDAP identifier defined for the user with the supplied
            username.</p>
        </li></ul></div>
    <p>DHIS 2 will use the supplied username / password and try to authenticate against an LDAP
      server entry, then look up user roles / authorities from a corresponding DHIS 2 user. This
      implies that a user must have a matching entry in the LDAP directory as well as a DHIS 2 user
      in order to log in.</p>
    <p>During authentication, DHIS 2 will try to bind to the LDAP server using the configured
      LDAP server URL and the manager DN and password. Once the binding is done, it will search for
      an entry in the directory using the configured LDAP search base and search filter.</p>
    <p>The {0} variable in the configured filter will be substituted beforing applying the
      filter. By default, it will be substituted by the supplied username. You can also set a custom
      LDAP identifier on the relevant DHIS 2 user account. This can be done throught the DHIS 2 user
      module user interface in the add or edit screen by setting the "LDAP identifier" property.
      When set, the LDAP identifier will be subsituted for the {0} variable in the filter. This
      feature is useful when the LDAP common name is not suitable or cannot for some reason be used
      as a DHIS 2 username.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e725"></a>8.6.&nbsp;Encryption setup</h2></div></div></div>
    
    <p>DHIS 2 allows for encryption of data. This however requires some extra setup.</p>
      <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e728"></a>8.6.1.&nbsp;Java Cryptography Extension</h3></div></div></div>
        
        <p>DHIS 2 uses an encryption algorithm classified as strong and therefore requires the
          <span class="emphasis"><em>Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy
          Files</em></span> to be installed. These files can be installed through these steps:</p>
    <p>
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
          <p>Download the JCE Unlimited Strength Jurisdiction Policy Files for your java version
            of Java from the Oracle Web site. Scroll down to the "Java Cryptography Extension (JCE)
            Unlimited Strength Jurisdiction Policy Files" section. It is important that the version
            of the files match the version of Java on your server.</p>
          <p><a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.htm" target="_top">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
        </li><li class="listitem">
          <p>Extract the downloaded ZIP archive. It contains two JAR files: <span class="italic">local_policy.jar</span> and <span class="italic">US_export_policy.jar</span>.</p>
        </li><li class="listitem">
          <p>Locate the JDK directory of your Java installation. From there, navigate into the
              <span class="italic">jre/security</span> directory. On Ubuntu it is often found
            at <span class="italic">/usr/lib/jvm/java-8-oracle/jre/lib/security</span>.</p>
        </li><li class="listitem">
          <p>(Optional) Back up your existing <span class="italic">local_policy.jar</span>
            and <span class="italic">US_export_policy.jar</span> in case you want to revert
            to them later.</p>
        </li><li class="listitem">
          <p>Copy the <span class="italic">local_policy.jar</span> and <span class="italic">US_export_policy.jar</span> files into the security folder. You
            should now have the following files which completes the installation. Remember to
            restart your servlet container for it to take
            effect.</p><pre class="screen">/usr/lib/jvm/java-8-oracle/jre/lib/security/local_policy.jar
/usr/lib/jvm/java-8-oracle/jre/lib/security/US_export_policy.jar</pre>
        </li></ol></div><p>
    </p>
      </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e755"></a>8.6.2.&nbsp;Password configuration</h3></div></div></div>
      
      <p>To provide security to the encryption alogorithm you will have to set a password in the
          <span class="italic">dhis.conf</span> configuration file through the <span class="italic">encryption.password</span>
        property:</p><pre class="screen">encryption.password = xxxx</pre>
      <p>The password must be at least <span class="bold"><strong>24 characters long</strong></span> and it
        is recommended to use a mix of numbers and lower- and uppercase letters. The encryption
        password must be kept secret.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e763"></a>8.6.3.&nbsp;Considerations</h3></div></div></div>
      
      <p><span class="italic">A word of caution:</span> It is not possible to recover
        encrypted data if the encryption password is lost or changed. Conversely, the encryption
        provides no security if the password is compromised. Hence, great consideration should be
        given to storing the password in a safe place.</p>
    </div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e767"></a>8.7.&nbsp;Complete configuration reference</h2></div></div></div>
    
    <p>The following describes the full set of configuration options for the <span class="italic">dhis.conf</span> configuration file. The uncommented properties are
      mandatory. The commented properties are optional. The configuration file should be placed in a
      directory which is pointed to by a <span class="italic">DHIS2_HOME</span> environment
      variable. The comment (#) must be removed for a property value to take effect. You can copy
      and paste the following content as a viable starting point for your own configuration
      file.</p><pre class="screen"># ----------------------------------------------------------------------
# Database connection for PostgreSQL
# ----------------------------------------------------------------------

# Hibernate SQL dialect
connection.dialect = org.hibernate.dialect.PostgreSQLDialect

# JDBC driver class
connection.driver_class = org.postgresql.Driver

# JDBC driver connection URL
connection.url = jdbc:postgresql:dhis2

# Database username
connection.username = dhis

# Database password (sensitive)
connection.password = xxxx

# Database schema behavior, can be 'validate', 'update', 'create', 'create-drop'
connection.schema = update

# ----------------------------------------------------------------------
# System
# ----------------------------------------------------------------------

# System mode for database read operations only, can be 'off', 'on'
# system.read_only_mode = off

# ----------------------------------------------------------------------
# Encryption
# ----------------------------------------------------------------------

# Encryption password (sensitive)
# encryption.password = xxxx

# ----------------------------------------------------------------------
# File store
# ----------------------------------------------------------------------

# File store provider, currently 'filesystem' and 'aws-s3' are supported
# filestore.provider = filesystem

# Directory / bucket name, refers to folder within DHIS2_HOME on file system, 'bucket' on AWS S3
# filestore.container = files

# Datacenter location (not required)
# filestore.location = eu-west-1

# Public identity / username
# filestore.identity = dhis2-id

# Secret key / password (sensitive)
# filestore.secret = xxxx

# ----------------------------------------------------------------------
# LDAP
# ----------------------------------------------------------------------

# LDAP server URL
# ldap.url = ldaps://300.20.300.20:636

# LDAP manager user distinguished name
# ldap.manager.dn = cn=JohnDoe,ou=Country,ou=Admin,dc=hisp,dc=org

# LDAP manager user password (sensitive)
# ldap.manager.password = xxxx

# LDAP entry distinguished name search base
# ldap.search.base = dc=hisp,dc=org

# LDAP entry distinguished name filter
# ldap.search.filter = (cn={0})</pre>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e773"></a>8.8.&nbsp;Application logging</h2></div></div></div>
    
    <p>The DHIS 2 application log output is directed to multiple files and locations. First, log
      output is sent to standard output. The Tomcat servlet container usually outputs standard
      output to a file under "logs":</p><pre class="screen">&lt;tomcat-dir&gt;/logs/catalina.out</pre>
    <p>Second, log output is written to a "logs" directory under the DHIS 2 home directory as
      defined by the the DHIS2_HOME environment variables. There is a main log file for all output,
      and separate log files for various background processes. The main file includes the background
      process logs as well. The log files are capped at 50 Mb and log content is continuously
      appended.</p><pre class="screen">&lt;DHIS2_HOME&gt;/logs/dhis.log

&lt;DHIS2_HOME&gt;/logs/dhis-analytics-table.log

&lt;DHIS2_HOME&gt;/logs/dhis-data-exchange.log

&lt;DHIS2_HOME&gt;/logs/dhis-data-sync.log</pre>
    <p>In order to override the default logging you can specify a Java system property with the
      name <span class="italic">log4j.configuration</span> and a value pointing to the Log4j
      configuration file on the classpath. If you want to point to a file on the file system (i.e.
      outside Tomcat) you can use the <span class="italic">file</span> prefix e.g. like
      this:</p><pre class="screen">-Dlog4j.configuration=file:/home/dhis/config/log4j.properties</pre>
    <p>Java system properties can be set e.g. through the <span class="italic">JAVA_OPTS</span> environment variable.</p>
    <p>DHIS 2 will eventually phase out logging to standard out / catalina.out and as a result it
      is recommended to rely on the logs under DHIS2_HOME.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e786"></a>8.9.&nbsp;Working with the PostgreSQL database</h2></div></div></div>
    
    <p>Common operations when managing a DHIS instance are dumping and restoring databases. To
      make a dump (copy) of your database, assuming the setup from the installation section, you can
      invoke the following: </p>
    <pre class="screen">pg_dump dhis2 -U dhis -f dhis2.sql</pre>
    <p>The first argument (dhis2) refers to the name of the database. The second argument (dhis)
      refers to the database user. The last argument (dhis2.sql) is the file name of the copy. If
      you want to compress the file copy immediately you can do:</p>
    <pre class="screen">pg_dump dhis2 -U dhis | gzip &gt; dhis2.sql.gz</pre>
    <p>To restore this copy on another system, you first need to create an empty database as
      described in the installation section. You also need to gunzip the copy if you created a
      compressed version. You can the invoke:</p>
    <pre class="screen">psql -d dhis2 -U dhis -f dhis2.sql</pre>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e794"></a>8.10.&nbsp;DHIS 2 Live setup</h2></div></div></div>
    
    <p>The DHIS 2 Live package is extremely convenient to install and run. It is intended for
      demonstrations, for users who want to explore the system and for small, offline installations
      typically at districts or facilities. It only requires a Java Runtime Environment and runs on
      all browsers except Internet Explorer 7 and lower.</p>
    <p>To install start by downloading DHIS 2 Live from <span class="italic">http://dhis2.org</span> and extract the archive to any location. On Windows click the
      executable archive. On Linux invoke the startup.sh script. After the startup process is done
      your default web browser will automtically be pointed to <span class="italic">http://localhost:8082</span> where the application is accessible. A system tray menu is
      accessible on most operating systems where you can start and stop the server and start new
      browser sesssions. Please note that if you have the server running there is no need to start
      it again, simply open the application from the tray menu.</p>
    <p>DHIS 2 Live is running on an embedded Jetty servlet container and an embedded H2 database.
      However it can easily be configured to run on other database systems such as PostgreSQL.
      Please read the section above about server installations for an explanation of the database
      configuration. The <span class="italic">dhis.conf</span> configuration file is located
      in the <span class="italic">conf</span> folder. Remember to restart the Live package
      for your changes to take effect. The server port is 8082 by default. This can be changed by
      modifying the value in the<span class="italic"> jetty.port</span> configuration file
      located in the <span class="italic">conf</span> directory.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e805"></a>Chapter&nbsp;9.&nbsp;Support</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e808">9.1. Home page: dhis2.org</a></span></dt><dt><span class="section"><a href="#d3453e823">9.2. Collaboration platform: launchpad.net/dhis2</a></span></dt><dt><span class="section"><a href="#d3453e836">9.3. Reporting a problem</a></span></dt></dl></div>
  
  <p>The DHIS 2 community uses a set of collaboration and coordination platforms for information and provision of downloads, documentation, development, source code,  functionality specifications, bug tracking. This chapter will describe this in more detail.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e808"></a>9.1.&nbsp;Home page: dhis2.org</h2></div></div></div>
    
    <p>The DHIS 2 home page is found at <span class="italic">http://dhis2.org</span>The <span class="italic">download</span> page provides downloads for the DHIS 2 Live package, WAR files, the mobile client, a Debian package, the source code, sample databases and a tool for editing the application user interface translations. Please note that the current latest release will be maintained until the next is released and both the actual release and the latest build from the release branch are provided. We recommend that you check back regularly on the download page and update your online server with the latest build from the release branch. The build revision can be found under <span class="italic">Help</span> - <span class="italic">About</span> inside DHIS 2.</p>
    <p>The <span class="italic">documentation</span> page provides installation instructions, user documentation, this implementation guide, presentations, Javadocs, changelog, roadmap and a guide for contributing to the documentation. The user documentation is focused on the practical aspects of using DHIS 2, such as how to create data elements and reports. This implementation guide is addressing the more high-level aspects of DHIS 2 implementation, database development and maintenance. The change log and roadmap sections provide links to the relevant pages in the Launchpad site described later.</p>
    <p>The <span class="italic">functionality</span> and <span class="italic">features</span> pages give a brief overview with screenshots of the main functionalities and features of DHIS 2. A demo DHIS 2 application can be reached from the <span class="italic">demo</span> top menu link. These pages can be used when a quick introduction to the system must be given to various stakeholders.</p>
    <p>The <span class="italic">about</span> page has information about the license under which DHIS 2 is released, how to sign up for the mailing lists, get access to the source code and more.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e823"></a>9.2.&nbsp;Collaboration platform: launchpad.net/dhis2</h2></div></div></div>
    
    <p>DHIS 2 uses <span class="italic">Launchpad</span> as the main collaboration platform. The site can be accessed at <span class="italic">http://lanchpad.net/dhis2</span> Launchpad is used for source code hosting, functionality specifications, bug tracking and notifications. The <span class="italic">Bazaar</span> version control system is tightly integrated with Launchpad and is required for checking out the source code. </p>
    <p>The various source code branches including trunk and release branches can be browsed at <span class="italic">http://code.launchpad.net/dhis2</span> </p>
    <p>If you want to suggest new functionality to be implemented in DHIS 2 you can air your views on the developer mailing list and eventually write a specification, which is referred to as <span class="italic">blueprints</span> in Launchpad. The bueprint will be considered by the core development team and if accepted be assigned a developer, approver and release version. Blueprints can be browsed and added at <span class="italic">http://blueprints.launchpad.net/dhis2</span></p>
    <p>If you find a bug in DHIS 2 you can report it at Launchpad by navigating to <span class="italic">http://bugs.launchpad.net/dhis2</span> Your bug report will be investigated by the developer team and be given a status. If valid it will also be assigned to a developer and approver and eventually be fixed. Note that bugfixes are incorporated into the trunk and latest release branch - so more testing and feedback to the developer teams leads to higher quality of your software.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e836"></a>9.3.&nbsp;Reporting a problem</h2></div></div></div>
    
    <p>If you encounter a problem with the DHIS 2 software you can ask for assistance on the
      developer's mailing list at <a class="ulink" href="https://launchpad.net/~dhis2-devs" target="_top">https://launchpad.net/~dhis2-devs</a>. Before reporting, make sure that you
      have:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Cleared the web browser cache (also called history or browsing data) completely
          (select all options before clearing).</p>
      </li><li class="listitem">
        <p>Cleared the DHIS 2 application cache: Go to Data administration -&gt; Cache statistics
          and click Clear cache.</p>
      </li></ul></div>
    <p>If you believe you have found a bug you can report it either to the developer mailing
      lists or to the bug tracker at https://bugs.launchpad.net/dhis2 .</p>
    <p>For the developers to be able to help you need to provide as much useful information as
      possible: </p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>DHIS 2 version: Look in the Help -&gt; About page inside DHIS 2 and provide the version
          and build revision.</p>
      </li><li class="listitem">
        <p>Web browser including version.</p>
      </li><li class="listitem">
        <p>Operating system including version.</p>
      </li><li class="listitem">
        <p>Servlet container / Tomcat log: Provide any output in the Tomcat log (typically
          catalina.out) related to your problem.</p>
      </li><li class="listitem">
        <p>Web browser console: In the Chrome web browser, click F12, then "Console", and look
          for exceptions related to your problem.</p>
      </li><li class="listitem">
        <p>Actions leading to the problem: Describe as clearly as possible which steps you take
          leading to the problem or exception.</p>
      </li><li class="listitem">
        <p>Problem description: Describe the problem clearly, why you think it is a problem and
          which behavior you would expect from the system.</p>
      </li></ul></div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e862"></a>Chapter&nbsp;10.&nbsp;Organisation Units</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e866">10.1. Organisation unit hierarchy design</a></span></dt><dt><span class="section"><a href="#d3453e885">10.2. Organisation unit groups and group sets</a></span></dt></dl></div>
  
  <p>In DHIS 2 the location of the data, the geographical context, is represented as organisational units. Organisational units can be either a health facility or department/sub-unit providing services or an administrative unit representing a geographical area (e.g. a health district). </p>
  <p>Organisation units are located within a hierarchy, also referred to as a tree. The hierarchy will reflect the health administrative structure and its levels. Typical levels in such a hierarchy are the national, province, district and facility levels. In DHIS 2 there is a single organisational hierarchy so the way this is defined and mapped to the reality needs careful consideration. Which geographical areas and levels that are defined in the main organisational hierarchy will have major impact on the usability and performance of the application. Additionally, there are ways of addressing alternative hierarchies and levels as explained in the section called Organisation unit groups and group sets further down.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e866"></a>10.1.&nbsp;Organisation unit hierarchy design</h2></div></div></div>
    
    <p>The process of designing a sensible organisation unit hierarchy has many aspects:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p><span class="italic">Include all reporting health facilities:</span> All health facilities which contribute to the national data collection should be included in the system. Facilities of all kinds of ownership should be incorporated, including private, public, NGO and faith-oriented facilities. Often private facilities constitute half of the total number of facilities in a country and have policies for data reporting imposed on them, which means that incorporating data from such facilities are necessary to get realistic, national aggregate figures.</p>
      </li><li class="listitem">
        <p><span class="italic">Emphasize the health administrative hierarchy:</span> A country typically has multiple administrative hierarchies which are often not well coordinated nor harmonized. When considering what to emphasize when designing the DHIS 2 database one should keep in mind what areas are most interesting and will be most frequently requested for data analysis. DHIS 2 is primarily managing health data and performing analysis based on the health administrative structure. This implies that even if adjustments might be made to cater for areas such as finance and local government, the point of departure for the DHIS 2 organisation unit hierarchy should be the health administrative areas. </p>
      </li></ul></div>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p><span class="italic">Limit the number of organisation unit hierarchy levels:</span> To cater for analysis requirements coming from various organisational bodies such as local government and the treasury, it is tempting to include all of these areas as organisation units in the DHIS 2 database. However, due to performance considerations one should try to limit the organisation unit hierarchy levels to the smallest possible number. The hierarchy is used as the basis for aggregation of data to be presented in any of the reporting tools, so when producing aggregate data for the higher levels, the DHIS 2 application must search for and add together data registered for all organisation units located further down the hierarchy. Increasing the number of organisation units will hence negatively impact the performance of the application and an excessively large number might become a significant problem in that regard. </p>
        <p>In addition, a central part in most of the analysis tools in DHIS 2 is based around dynamically selecting the &#8220;parent&#8221; organisation unit of those which are intended to be included. For instance, one would want to select a province and have the districts belonging to that province included in the report. If the district level is the most interesting level from an analysis point of view and several hierarchy levels exist between this and the province level, this kind of report will be rendered unusable. When building up the hierarchy, one should focus on the levels that will be used frequently in reports and data analysis and leave out levels that are rarely or never used as this will have an impact on both the performance and usability of the application. </p>
      </li><li class="listitem">
        <p><span class="italic">Avoid one-to-one relationships:</span> Another guiding principle for designing the hierarchy is to avoid connecting levels that have near one-to-one parent-child ratios, meaning that for instance a district (parent) should have on average more than one local council (child) at the level below before it make sense to add a local council level to the hierarchy. Parent-child ratios from 1:4 or more are much more useful for data analysis purposes as one can start to look at e.g. how a district&#8217;s data is distributed in the different sub-areas and how these vary. Such drill-down exercises are not very useful when the level below has the same target population and the same serving health facilities as the parent. </p>
        <p>Skipping geographical levels when mapping the reality to the DHIS 2 organisation unit hierarchy can be difficult and can easily lead to resistance among certain stakeholders, but one should have in mind that there are actually ways of producing reports based on geographical levels that are not part of the organisational hierarchy in DHIS 2, as will be explained in the next section.</p>
      </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e885"></a>10.2.&nbsp;Organisation unit groups and group sets</h2></div></div></div>
    
    <p>In DHIS 2, organisation units can be grouped in organisation unit groups, and these groups can be further organised into group sets. Together they can mimic an alternative organisational hierarchy which can be used when creating reports and other data output. In addition to representing alternative geographical locations not part of the main hierarchy, these groups are useful for assigning classification schemes to health facilities, e.g. based on the type or ownership of the facilities. Any number of group sets and groups can be defined in the application through the user interface, and all these are defined locally for each DHIS 2 database. </p>
    <p>An example illustrates this best: Typically one would want to provide analysis based on the ownership of the facilities. In that case one would create a group for each ownership type, for instance &#8220;MoH&#8221;, &#8220;Private&#8221; and &#8220;NGO&#8221;. All facilities in the database must then be classified and assigned to one and only one of these three groups. Next one would create a group set called &#8220;Ownership&#8221; to which the three groups above are assigned, as illustrated in the figure below. </p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/organisation_unit_hiearchy.png" align="middle" width="100%"></td></tr></table></div>
    <p>In a similar way one can create a group set for an additional administrative level, e.g. local councils. All local councils must be defined as organisation unit groups and then assigned to a group set called &#8220;Local Council&#8221;. The final step is then to assign all health facilities to one and only one of the local council groups. This  enables the DHIS 2 to produce aggregate reports by each local council (adding together  data for all assigned health facilities) without having to include the local council level in the main organisational hierarchy. The same approach can be followed for any additional administrative or geographical level that is needed, with one group set per additional level. Before going ahead and designing this in DHIS 2, a mapping between the areas of the additional geographical level and the health facilities  in each area is needed.</p>
    <p>A key property of the group set concept in DHIS 2 to understand is <span class="italic">exclusivity</span>, which implies that an organisation unit can be member of exactly one of the groups in a group set. A violation of this rule would lead to duplication of data when aggregating health facility data by the different groups, as a facility assigned to two groups in the same group set would be counted twice.</p>
    <p>With this structure in place, DHIS 2 can provide aggregated data for each of the organisation unit ownership types through the &#8220;Organisation unit group set report&#8221; in &#8220;Reporting&#8221; module or through the Excel pivot table third-party tool. For instance one can view and compare utilisation rates aggregated by the different types of ownership (e.g. MoH, Private, NGO). In addition, DHIS 2 can provide statistics of the distribution of facilities in &#8220;Organisation unit distribution report&#8221; in &#8220;Reporting&#8221; module. For instance one can view how many facilities exist under any given organisation unit in the hierarchy for each of the various ownership types. In the GIS module, given that health facility coordinates have been registered in the system, one can view the locations of the different types of health facilities (with different symbols for each type), and also combine this information with a other map layer showing indicators e.g. by district.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e894"></a>Chapter&nbsp;11.&nbsp;Data Elements and Custom Dimensions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e897">11.1. Data elements</a></span></dt><dt><span class="section"><a href="#d3453e902">11.2. Categories and custom dimensions</a></span></dt><dt><span class="section"><a href="#d3453e918">11.3. Data element groups</a></span></dt></dl></div>
  
  <p>This chapter first discusses an important building block of the system: the data element. Second it discusses the category model and how it can be used to achieve highly customized meta-data structure for storage of data.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e897"></a>11.1.&nbsp;Data elements</h2></div></div></div>
    
    <p>The data element is together with the organisation unit the most important building block of a DHIS 2 database. It represents the what dimension and explains what is being collected or analysed. In some contexts this is referred to an indicator, however in DHIS 2 this meta-data element of data collection and analysis is referred to as a data element. The data element often represents a count of some event and its name describes what is being counted, e.g. "BCG doses given" or "Malaria cases". When data is collected, validated, analysed or presented it is the data elements or expressions built with data elements that describe what phenomenon, event or case the data is registered for. Hence the data element become important for all aspects of the system and decide not only how data is collected, but more importantly how the data is represented in the database and how data can be analysed and presented.</p>
    <p>An important principle behind designing data elements is to think of data elements as a self-contained description of an phenomenon or event and not as a field in a data entry form. Each data element lives on its own in the database, completely detached and independent from the collection form. It is important to consider that data elements are used directly in reports, charts and other tools for data analysis, in which the context in any given data entry form is not accessible nor relevant. In other words, it must be possible to clearly identify what event a data element represents by only looking at its name. Based on this one can derive a rule of thumb saying that the name of the data element must be able to stand on its own and describe the data value also outside the context of its collection form. </p>
    <p>For instance, a data element called &#8220;Malaria&#8221; might be concise when seen in a data entry form capturing immunization data, in a form capturing vaccination stocks as well as in a form for out-patient data. When viewed in a report, however, outside the context of the data entry form, it is impossible to decide what event this data element represents. If the data element had been called &#8220;Malaria cases&#8221;, &#8220;Malaria stock doses received&#8221; or &#8220;Malaria doses given&#8221; it would have been clear from a user perspective what the report is trying to express. In this case we are dealing with three different data elements with completely different semantics.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e902"></a>11.2.&nbsp;Categories and custom dimensions</h2></div></div></div>
    
    <p>Certain requirements for data capture necessitates a fine-grained breakdown of the dimension describing the event being counted. For instance one would want to collect the number of &#8220;Malaria cases&#8221; broken down on gender and age groups, such as &#8220;female&#8221;, &#8220;male&#8221; and &#8220;&lt; 5 years&#8221; and &#8220;&gt; 5 years&#8221;. What characterizes this is that the breakdown is typically repeated for a number of &#8220;base&#8221; data elements: For instance one would like to reuse this break-down for other data elements such as &#8220;TB&#8221; and &#8220;HIV&#8221;. In order to make the meta-data more dynamic, reusable and suitable for analysis it makes sense to define the mentioned diseases as data elements and create a separate model for the breakdown attributes. This can be achieved by using the category model, which is described in the following.</p>
    <p>The category model has three main elements which is best described using the above example:</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>The category option, which corresponds to &#8220;female&#8221;, &#8220;male&#8221; and &#8220;&lt; 5 years&#8221; and &#8220;&gt; 5 years&#8221;.</p>
      </li><li class="listitem">
        <p>The category, which corresponds to &#8220;gender&#8221; and &#8220;age group&#8221;.</p>
      </li><li class="listitem">
        <p>The category combination, which should in the above example be named &#8220;gender and age group&#8221; and be assigned both categories mentioned above.</p>
      </li></ol></div>
    <p>This category model is in fact self-standing but is in DHIS 2 loosely coupled to the data element. Loosely coupled in this regard means that there is an association between data element and category combination, but this association may be changed at any time without loosing any data. It is however not recommended to change this often since it makes the database less valuable in general since it reduces the continuity of the data. Note that there is no hard limit on the number of category options in a category or number of categories in a category combination, however there is a natural limit to where the structure becomes messy and unwieldy.</p>
    <p>A pair of data element and category combination can now be used to represent any level of breakdown. It is important to understand that what is actually happening is that a number of custom dimensions are assigned to the data. Just like the data element represents a mandatory dimension to the data values, the categories adds custom dimensions to it. In the above example we can now through the DHIS 2 output tools perform analysis based on both &#8220;gender&#8221; and &#8220;age group&#8221; for those data elements, in the same way as one can perform analysis based on data elements, organisation units and periods.</p>
    <p>This category model can be utilized both in data entry form designs and in analysis and tabular reports. For analysis purposes, DHIS 2 will automatically produce sub-totals and totals for each data element associated with a category combination. The rule for this calculation is that all category options should sum up to a meaningful total. The above example shows such a meaningful total since when summarizing &#8220;Malaria cases&#8221; captured for &#8220;female &lt; 5 years&#8221;, &#8220;male &lt; 5 years&#8221;, &#8220;female &gt; 5 years&#8221; and &#8220;male &gt; 5 years&#8221; one will get the total number of &#8220;Malaria cases&#8221;.</p>
    <p>For data capture purposes, DHIS 2 can automatically generate tabular data entry forms where the data elements are represented as rows and the category option combinations are represented as columns. This will in many situations lead to compelling forms with a minimal effort. It is necessary to note that this however represents a dilemma these two concerns are sometimes not compatible. For instance one might want to quickly create data entry forms by using categories which does not adhere to rule of a meaningful total. We do however consider this a better alternative than maintaining two independent and separate models for data entry and data analysis.</p>
    <p>An important point about the category model is that data values are persisted and associated with a category option combination. This implies that adding or removing categories from a category combination renders these combinations invalid and a low-level database operation much be done to correct it. It is hence recommended to thoughtfully consider which breakdowns are required and to not change them too often.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e918"></a>11.3.&nbsp;Data element groups</h2></div></div></div>
    
    <p>Common properties of data elements can be modelled through what is called data element groups. The groups are completely flexible in the sense that they are defined by the user, both their names and their memberships. Groups are useful both for browsing and presenting related data, and can also be used to aggregate values captured for data elements in the group. Groups are loosely coupled to data elements and not tied directly to the data values which means they can be modified and added at any point in time without interfering with the low-level data.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e921"></a>Chapter&nbsp;12.&nbsp;Data Sets and Forms</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e924">12.1. What is a data set?</a></span></dt><dt><span class="section"><a href="#d3453e930">12.2. What is a data entry form?</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e933">12.2.1. Types of data entry forms</a></span></dt></dl></dd><dt><span class="section"><a href="#d3453e946">12.3. From paper to electronic form - Lessons learned</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e949">12.3.1. Identify self-contained data elements</a></span></dt><dt><span class="section"><a href="#d3453e952">12.3.2. Leave calculations and repetitions to the computer - capture raw data only</a></span></dt></dl></dd></dl></div>
  
  <p>This chapter discusses data sets and forms, what types of forms are available and describes best practises for the process of moving from paper based to electronic forms.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e924"></a>12.1.&nbsp;What is a data set?</h2></div></div></div>
    
    <p>All data entry in DHIS 2 is organised through the use of data sets. A data set is a collection of data elements grouped together for data collection, and in the case of distributed installs they also define chunks of data for export and import between instances of DHIS 2 (e.g. from a district office local installation to a national server). Data sets are not linked directly to the data values, only through their data elements and frequencies, and as such a data set can be modified, deleted or added at any point in time without affecting the raw data already captured in the system, but such changes will of course affect how new data will be collected.</p>
    <p>A data set has a period type which controls the data collection frequency, which can be daily, weekly, monthly, quarterly, six-monthly, or yearly. Both the data elements to include in the data set and the period type is defined by the user, together with a name, short name, and code. If calculated fields are needed in the collection form (and not only in the reports), then indicators can be assigned to the data set as well, but these can only be used in custom forms (see further down).</p>
    <p>In order to use a data set to collect data for a specific organisation unit the user must assign the organisation unit to the data set. This mechanism controls which organisation units that can use which data sets, and at the same time defines the target values for data completeness (e.g. how many health facilities in a district are expected to submit the RCH data set every month).</p>
    <p>A data element can belong to multiple data sets, but this requires careful thinking as it may lead to overlapping and inconstant data being collected if e.g. the data sets are given different frequencies and are used by the same organisation units.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e930"></a>12.2.&nbsp;What is a data entry form?</h2></div></div></div>
    
    <p>Once you have assigned a data set to an organisation unit that data set will be made available in Data Entry (under Services) for the organisation units you have assigned it to and for the valid periods according to the data set's period type. A default data entry form will then be shown, which is simply a list of the data elements belonging to the data set together with a column for inputting the values. If your data set contains data elements with categories such as age groups or gender, then additional columns will be automatically generated in the default form based on the categories. In addition to the default list-based data entry form there are two more alternatives, the section-based form and the custom form.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e933"></a>12.2.1.&nbsp;Types of data entry forms</h3></div></div></div>
      
      <p>DHIS 2 currently features three differnet types of forms which are described in the following.</p>
      <div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d3453e936"></a>12.2.1.1.&nbsp;Default forms</h4></div></div></div>
        
        <p>A default data entry form is simply a list of the data elements belonging to the data set together with a column for inputting the values. If your data set contains data elements with a non-default category combination, such as age groups or gender then additional columns will be automatically generated in the default form based on the different options/dimensions.
If you use more than one category combination in a data set you will get one table per category combination in the default form, with different column headings for the options. </p>
      </div>
      <div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d3453e939"></a>12.2.1.2.&nbsp;Section forms</h4></div></div></div>
        
        <p>Section forms allow for a bit more flexibility when it comes to using tabular forms and are quick and simple to design. Often your data entry form will need multiple tables with subheadings, and sometimes you need to disable (grey out) a few fields in the table (e.g. some categories do not apply to all data elements), both of these functions are supported in section forms. After defining a data set you can define it's sections with subsets of data elements, a heading and possible grey fields i the section's table. The order of sections in a data set can also be defined. In Data Entry you can now start using the Section form (should appear automatically when sections are available for the selected data set).  Most tabular data entry forms should be possible to do with sections forms. Utilizing the section or default forms makes life easy as there is no need to maintain a fixed form design which includes references to data elements. If these two types of forms are not meeting your requirements then the third option is the completely flexible, although more time-consuming, custom data entry forms.</p>
      </div>
      <div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d3453e942"></a>12.2.1.3.&nbsp;Custom Forms</h4></div></div></div>
        
        <p>When the form you want to design is too complicated for the default or section forms then your last option is to use a custom form. This takes more time, but gives you full flexibility in terms of the design. In DHIS 2 there is a built in HTML editor (CK Editor) in the form designer which allows you to either design the form in the GUI or paste in your html directly (using the "source" window in the editor). In the custom form you can insert static text or data fields (linked to data elements + category option combination) in any position on the form and you have complete freedom to design the layout of the form. Once a custom form has been added to a data set it will be available in data entry and used automatically. </p>
        <p>When using a custom form it is possible to use calculated fields to display e.g. running totals or other calculations based on the data captured in the form. This can e.g. be useful when dealing with stock or logistics forms that need item balance,  items needed for next period etc. In order to do so, the user must first define the calculated expressions as indicators and then assign these indicators to the data set in question. In the custom form designer the user can then assign indicators to the form the same way data elements are assigned. The limitation to the calculated expression is that all the data elements use in the expression must be available in the same data set since the calculations are done on the fly inside the form, and are not based on data values already stored in the database.</p>
      </div>
    </div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e946"></a>12.3.&nbsp;From paper to electronic form - Lessons learned</h2></div></div></div>
    
    <p>When introducing an electronic health information system the system being replaced is often paper based reporting. The process of migrating to electronic data capture and analysis has some challenges. The following sections suggest best practises on how to overcome these.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e949"></a>12.3.1.&nbsp;Identify self-contained data elements</h3></div></div></div>
      
      <p>Typically the design of a DHIS 2 data set is based on some requirements from a paper form that is already in use. The logic of paper forms are not the same as the data element and data set model of DHIS, e.g. often a field in a tabular paper form is described both by column headings and text on each row, and sometimes also with some introductory table heading that provides more context. In the database this is captured for one atomic data element with no reference to a position in a visual table format so it is important to make sure the data element with the optional data element categories capture the full meaning of each individual field in the paper form.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e952"></a>12.3.2.&nbsp;Leave calculations and repetitions to the computer - capture raw data only</h3></div></div></div>
      
      <p>Another important thing to have in mind while designing data sets is that the data set and the corresponding data entry form (which is a data set with layout) is a data collection tool and not a report or analysis tool. There are other far more sophisticated tools for data output and reporting in DHIS 2 than the data entry forms. Paper forms are often designed with both data collection and reporting in mind and therefore you might see things such as cumulative values (in addition to the monthly values), repetition of annual data (the same population data reported every month) or even indicator values such as coverage rates in the same form as the monthly raw data. When you store the raw data in the DHIS 2 database every month and have all the processing power you need within the computerised tool, there is no need (in fact it would be wrong and most likely cause inconsistency) to register manually calculated values such as the ones mentioned above. You only want to capture the raw data in your data sets/forms and leave the calculations to the computer, and presentation of such values to the reporting tools in DHIS. Through the functionality of data set reports all tabular section forms will automatically get extra columns at the far right providing subtotal and total values for each row (data element).</p>
    </div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e955"></a>Chapter&nbsp;13.&nbsp;Data Quality</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e958">13.1. Measuring data quality</a></span></dt><dt><span class="section"><a href="#d3453e961">13.2. Reasons for poor data quality</a></span></dt><dt><span class="section"><a href="#d3453e975">13.3. Improving data quality</a></span></dt><dt><span class="section"><a href="#d3453e989">13.4. Using DHIS 2 to improve data quality</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e992">13.4.1. Data input validation</a></span></dt><dt><span class="section"><a href="#d3453e995">13.4.2. Min and max ranges</a></span></dt><dt><span class="section"><a href="#d3453e998">13.4.3. Validation rules</a></span></dt><dt><span class="section"><a href="#d3453e1003">13.4.4. Outlier analysis</a></span></dt><dt><span class="section"><a href="#d3453e1006">13.4.5. Completeness and timeliness reports</a></span></dt></dl></dd></dl></div>
  
  <p>This chapter discusses various aspects related to data quality.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e958"></a>13.1.&nbsp;Measuring data quality</h2></div></div></div>
    
    <p>Is the data complete? Is it collected on time? Is it correct? These are questions that needs to be asked when analysing data. Poor data quality can take many shapes; not just incorrect figures, but a lack of completeness, or the data being too old (for meaningful use).</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e961"></a>13.2.&nbsp;Reasons for poor data quality</h2></div></div></div>
    
    <p>There are many potential reasons for poor quality data, including:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
          <p>Excessive amounts collected; too much data to be collected leads to less time to do it, and &#8220;shortcuts&#8221; to finish reporting</p>
        </li><li class="listitem">
          <p>Many manual steps; moving figures, summing up, etc. between different paper forms</p>
        </li><li class="listitem">
          <p>Unclear definitions; wrong interpretation of the fields to be filled out</p>
        </li><li class="listitem">
          <p>Lack of use of information: no incentive to improve quality</p>
        </li><li class="listitem">
          <p>Fragmentation of information systems; can lead to duplication of reporting</p>
        </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e975"></a>13.3.&nbsp;Improving data quality</h2></div></div></div>
    
    <p>Improving data quality is a long-term task, and many of the measures are organizational in nature. However, data quality should be an issue from the start of any implementation process, and there are some things that can be addressed at once, such as checks in DHIS2. Some important data quality improvement measures are:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Changes in data collection forms, harmonization of forms</p>
      </li><li class="listitem">
        <p>Promote information use at local level, where data is collected</p>
      </li><li class="listitem">
        <p>Develop routines on checking data quality</p>
      </li><li class="listitem">
        <p>Include data quality in training</p>
      </li><li class="listitem">
        <p>Implement data quality checks in DHIS 2</p>
      </li></ul></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e989"></a>13.4.&nbsp;Using DHIS 2 to improve data quality</h2></div></div></div>
    
    <p>DHIS to has several features that can help the work of improving data quality; validation during data entry to make sure data is captured on the right format and within a reasonable range, user-defined validation rules based on mathematical relationships between the data being captured (e.g. subtotals vs totals), outlier analysis functions,  as well as reports on data coverage and completeness. More indirectly, several of the DHIS design principles contribute to improving data quality, such as the idea of harmonising data into one integrated data warehouse, supporting local level access to data and analysis tools, and by offering a wide range of tools for data analysis and dissemination. With more structured and harmonised data collection processes and with strengthened information use at all levels, the quality of data will improve. Here is an overview of the functionality more directly targeting data quality:</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e992"></a>13.4.1.&nbsp;Data input validation</h3></div></div></div>
      
      <p>The most basic way of data quality check in DHIS 2 is to make sure that the data being captured is on the correct format. The DHIS 2 will give the users a message that the value entered is not on the correct format and will not save the value until it has been changed to an accepted value. E.g. text cannot be inputted in a numeric field. The different types of data values supported in DHIS 2 are explained in the user manual in the chapter on data elements. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e995"></a>13.4.2.&nbsp;Min and max ranges</h3></div></div></div>
      
      <p>To stop typing mistakes during data entry (e.g typing &#8216;1000&#8217; instead of &#8216;100&#8217;) the DHIS 2 checks that the value being entered is within a reasonable range. This range is based on the previously collected data by the same health facility for the same data element, and consists of a minimum and a maximum value. As soon as a the users enters a value outside the user will be alerted that the value is not accepted. In order to calculate the reasonable ranges the system needs at least six months (periods) of data. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e998"></a>13.4.3.&nbsp;Validation rules</h3></div></div></div>
      
      <p>A validation rule is based on an expression which defines a relationship between a number of data elements. The expression has a left side and a right side and an operator which defines whether the former must be less than, equal to or greater than the latter. The expression forms a condition which should assert that certain logical criteria are met. For instance, a validation rule could assert that the total number of vaccines given to infants is less than or equal to the total number of infants.</p>
      <p>The validation rules can be defined through the user interface and later be run to check the existing data. When running validation rules the user can specify the organisation units and periods to check data for, as running a check on all existing data will take a long time and might not be relevant either. When the checks are completed a report will be presented to the user with validation violations explaining which data values that need to be corrected.</p>
      <p>The validation rules checks are also built into the data entry process so that when the user has completed a form the rules can be run to check the data in that form only, before closing the form. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1003"></a>13.4.4.&nbsp;Outlier analysis</h3></div></div></div>
      
      <p>The standard deviation based outlier analysis provides a mechanism for revealing values that are numerically distant from the rest of the data. Outliers can occur by chance, but they often indicate a measurement error or a heavy-tailed distribution (leading to very high numbers). In the former case one wishes to discard them while in the latter case one should be cautious in using tools or interpretations that assume a normal distribution. The analysis is based on the standard normal distribution.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1006"></a>13.4.5.&nbsp;Completeness and timeliness reports</h3></div></div></div>
      
      <p>Completeness reports will show how many data sets (forms) that have been submitted by organisation unit and period. You can use one of three different methods to calculate completeness; 1) based on completeness button in data entry, 2) based on a set of defined compulsory data elements, or 3) based on the total registered data values for a data set.</p>
      <p>The completeness reports will also show which organisation units in an area that are reporting on time, and the percentage of timely reporting facilities in a given area. The timeliness calculation is based on a system setting called Days after period end to qualify for timely data submission.</p>
    </div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1010"></a>Chapter&nbsp;14.&nbsp;Indicators</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1023">14.1. What is an indicator?</a></span></dt><dt><span class="section"><a href="#d3453e1076">14.2. Purpose of indicators</a></span></dt><dt><span class="section"><a href="#d3453e1080">14.3. Indicator-driven data collection</a></span></dt><dt><span class="section"><a href="#d3453e1084">14.4. Managing indicators</a></span></dt></dl></div>
  
  <p>This chapter covers the following topics:</p>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>What is an indicator</p>
    </li><li class="listitem">
      <p>Purposes of indicators</p>
    </li><li class="listitem">
      <p>Indicator-driven data collection</p>
    </li><li class="listitem">
      <p>Managing indicators in DHIS 2</p>
    </li></ul></div>
  <p>The following describes these topics in greater detail.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1023"></a>14.1.&nbsp;What is an indicator?</h2></div></div></div>
    
    <p>In DHIS2, the indicator is a core element of data analysis. An indicator is a calculated formula based on a combination of data elements, category options, possibly constants and a factor. There are two foms of indicators, those with a denominator and those which do not have a denominator.  Calculated totals, which may be composed of multiple data elements do not have denominators. Coverage indicators (ratios, percentages, etc) are composed of two formulas of data elements, one representing the numerator and another representing the denominator.</p>
    <p>Indicators are thus made up of formulas of data elements and other components and are always multiplied by a  factor (e.g. 1, 100, 100, 100 000). The factor is essentially a number which is multiplied by the result of the numerator divided by  denominator.    As a concrete example,  the indicator "BCG coverage &lt;1 year" is defined a formula with a factor 100 (in order to obtain a percentage), a numerator ("BCG doses given to children under 1 year") and a denominator ("Target population under 1 year"). The indicator "DPT1 to DPT3 drop out rate" is a formula of 100 % x ("DPT1 doses given"- "DPT3 doses given") / ("DPT1 doses given").</p>
    <div class="table"><a name="d3453e1027"></a><p class="title"><b>Table&nbsp;14.1.&nbsp;Indicator examples</b></p><div class="table-contents">
      
      <table summary="Indicator examples" border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th>
              <p>Indicator</p>
            </th><th>
              <p>Formula</p>
            </th><th>
              <p>Numerator</p>
            </th><th>
              <p>Denominator</p>
            </th><th>
              <p>Factor</p>
            </th></tr></thead><tbody><tr><td>
              <p>Fully immunized &lt;1 year coverage</p>
            </td><td>
              <p>Fully immunized/Population &lt; 1 year x 100</p>
            </td><td>
              <p>Fully immunized</p>
            </td><td>
              <p>Population &lt; 1</p>
            </td><td>
              <p>100 (Percentage)</p>
            </td></tr><tr><td>
              <p>Maternal Mortality Rate</p>
            </td><td>
              <p>Maternal deaths/Live births x 100 000</p>
            </td><td>
              <p>Maternal deaths</p>
            </td><td>
              <p>Live births</p>
            </td><td>
              <p>100 000(MMR is measured per 100 000)</p>
            </td></tr><tr><td>
              <p>Cumulative number of people Enrolled in Care</p>
            </td><td>
              <p>Cumulative number of people Enrolled in Care X 1</p>
            </td><td>
              <p>Cumulative number Enrolled in Care (Male, Age&lt;18)+Cumulative number Enrolled in Care (Male, Age18+)+Cumulative number Enrolled in Care (Age&lt;18, Female)+Cumulative number Enrolled in Care (Age18+, Female)</p>
            </td><td>
              <p>None</p>
            </td><td>
              <p>1</p>
            </td></tr></tbody></table>
    </div></div><br class="table-break">
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1076"></a>14.2.&nbsp;Purpose of indicators</h2></div></div></div>
    
    <p>Indicators which are defined with both numerators and denominators are typically more useful for analysis. Because  they are proportions, they are comparable across time and space, which is very important since units of analysis and comparison, such as districts, vary in size and change over time. A district with  population of 1000 people may have fewer  cases of a  given disease  than a district with a population of 10,000. However, the incidence values of a given disease will be comparable between the two districts because of the use of of the respective populations for each district.</p>
    <p>Indicators thus allow comparison, and are the prime tool for data analysis. DHIS2 should provide relevant indicators for analysis for all health programs, not just the raw data. Most report modules in DHIS 2 support both data elements and indicators and you can also combine these in custom reports.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1080"></a>14.3.&nbsp;Indicator-driven data collection</h2></div></div></div>
    
    <p>Since indicators are more suited for analysis compared to data elements, the calculation of indicators should be the main driving force for collection of data. A usual situation is that much data is collected but never used in any indicator, which significantly reduces the usability of the data. Either the captured data elements should be included in indicators used for management or they should probably not be collected at all.</p>
    <p>For implementation purposes, a list of indicators used for management should be defined and implemented in DHIS 2. For analysis, training should focus on the use of indicators and why these are better suited than data elements for this purpose.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1084"></a>14.4.&nbsp;Managing indicators</h2></div></div></div>
    
    <p>Indicators can be added, deleted, or modified at any time in DHIS2 without affecting the data. Indicators are not stored as values in DHIS2, but as formulas, which are calculated whenever the user needs them. Thus a change in the formulas will only lead to different data elements being called for when using the indicator for analysis, without any changes to the underlying data values taking place. For information how to manage indicators, please refer to the chapter on indicators in the DHIS2 user documentation.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1087"></a>Chapter&nbsp;15.&nbsp;Users and User Roles</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1090">15.1. Users</a></span></dt><dt><span class="section"><a href="#d3453e1103">15.2. User Roles</a></span></dt></dl></div>
  
  <p>DHIS 2 comes with an advanced solution for fine-grained management of users and user roles. The system is completely flexible in terms of the number and type of users and roles allowed.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1090"></a>15.1.&nbsp;Users</h2></div></div></div>
    
    <p>A user in the DHIS 2 context is a human who is utilizing the software. Each user in DHIS 2 has a user account which is identified by a username. A user account allows the user to authenticate to system services and be granted authorization to access them. To log in (authenticate) the user is required to enter a valid combination of username and password. If that combination matches a username and password registered in the database, the user is allowed to enter.</p>
    <p>In addition, a user should be given a first name, surname, email and phone number. This information is important to get correct when creating new users since certain functions in DHIS 2 relies on sending emails to notify users about important events. It is also useful to be able to communicate to users directly over email and telephone to discuss data management issues or to sort out potential problems with the system.</p>
    <p>A user in DHIS 2 is associated with an organisation unit. This implies that when creating a new user account that account should be associated to the location where user works. For instance when creating a user account for a district record officer that user account should be linked with the particular district where she works. The link between user account and organisation unit has several implications for the operation of the system:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>In the data entry module, a user can only be entering data for the organisation unit she is associated with and the organisation units below that in the hierarchy. For instance, a district records officer will be able to register data for her district and the facilities below that district only.</p>
      </li><li class="listitem">
        <p>In the user module, a user can only create new users for the organisation unit she is associated with in addition to the organisation units below that in the hierarchy.</p>
      </li><li class="listitem">
        <p>In the reports module, a user can only view reports her organisation units and those below. (This is something we consider to open up to allow for comparison reports.)</p>
      </li></ul></div>
    <p>A user role in DHIS 2 is also associated with a set of user roles. Such user roles are discussed in the following section.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1103"></a>15.2.&nbsp;User Roles</h2></div></div></div>
    
    <p>A user role in the DHIS 2 context is a group of authorities. An authority in this regard means the permission to perform one or more specific tasks. For instance, a user role may contain authorities to create a new data element, update an organisation unit or view a report. Such a group of authorities constitutes a user role.</p>
    <p>In a health system the users are logically grouped with respect to the task they perform and the position they occupy. Examples of commonly found positions are:</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>National health managers</p>
      </li><li class="listitem">
        <p>National health information system division officers (HISO)</p>
      </li><li class="listitem">
        <p>Province health managers</p>
      </li><li class="listitem">
        <p>District health records and information officers (DHRIO)</p>
      </li><li class="listitem">
        <p>Facility health records and information officers (HRIO)</p>
      </li><li class="listitem">
        <p>Data entry clerks</p>
      </li></ol></div>
    <p>When creating user roles such positions within the health system should be kept in mind and it is often sensible to create a user role dedicated for each of those positions. The process of creating user roles should be aligned with the process of deciding which users are doing what tasks in the system.</p>
    <p>First it should be defined which users should fulfill the role as system administrators. This will often a part of the members of the national HIS division and should have full authority in the system. Second a user role should be created roughly for each position. A sensible consideration of what authorities should be given each role must be done. An important rule is that each role should only be given the authorities which are needed to perform the job well - not more. When operating a large, centralized information system there is a need to coordinate the work between the people involved. This is made easier if only those who are supposed to perform a task have the authorities to perform it. </p>
    <p>An example might highlight this issue: The task of setting up the basic structure (meta-data) of the system is critical to the system and should only be performed by the administrators of system. This means that the system administrator user role should have the authority to add, update and delete the core elements of the system such as data elements, indicators and data sets. Allowing users outside the team of system administrators to modify these elements might lead to problems with coordination.</p>
    <p>National and provincial health managers are often concerned with data analysis and monitoring. Hence this group of users should be authorized to access and use the reports module, GIS module, data quality module and dashboard. However they would not need authority to enter data or update data elements and data sets. District information officers are often tasked with both entering data into the system coming from facilities which are not able to do so directly as well as monitoring, evaluation and analysis of data. This means that they will need access to all of the analysis and validation modules mentioned above in addition to the authority to access and use the data entry module.</p>
    <p>In addition, a user role is associated with a collection of data sets. This affects the data entry module in that the user is only allowed to enter data for the data sets registered for her user role. This is often useful in situations where one wants to allow officers from health programs to enter data for their relevant data entry forms only.</p>
    <p>A user can be granted one or any number of user roles. In the case of many user roles, the user is privileged with the sum of all authorities and data sets included in the user roles. This means that user roles can be mixed and matched for special purposes instead of merely creating new ones.</p>
    <p>An important part of user management is to control which users are allowed to create new users with which authorities. In DHIS 2 one can control which users are allowed to perform this task. In this process the key principle is that a user can only grant authorities and access to data sets that the user itself has. The users at national, province and district level are often relatively few and can be created and managed by the system administrators. If a large part of the facilities are entering data directly into the system the number of users might become unwieldy. Experience suggests that delegating and decentralizing this task to the district officers will make the process more efficient and support the facility users better.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1127"></a>Chapter&nbsp;16.&nbsp;Data Analysis Tools Overview</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1151">16.1. Data analysis tools</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1154">16.1.1. Standard reports</a></span></dt><dt><span class="section"><a href="#d3453e1157">16.1.2. Data set reports</a></span></dt><dt><span class="section"><a href="#d3453e1160">16.1.3. Data completeness report</a></span></dt><dt><span class="section"><a href="#d3453e1163">16.1.4. Static reports</a></span></dt><dt><span class="section"><a href="#d3453e1166">16.1.5. Organisation unit distribution reports</a></span></dt><dt><span class="section"><a href="#d3453e1169">16.1.6. Report tables</a></span></dt><dt><span class="section"><a href="#d3453e1172">16.1.7. Charts</a></span></dt><dt><span class="section"><a href="#d3453e1175">16.1.8. Web Pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1178">16.1.9. GIS </a></span></dt><dt><span class="section"><a href="#d3453e1181">16.1.10. My Datamart and Excel Pivot tables</a></span></dt></dl></dd></dl></div>
  
  <p>This chapter offers an overview of the available tools for data analysis provided by DHIS 2 along with a description of the purpose and benefits of each. If you are looking for a detailed guide on how to use each tool we recommend to continue to read the user guide after finishing this chapter. The following list shows the various tools:</p>
  <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
      <p>Standard reports</p>
    </li><li class="listitem">
      <p>Data set reports</p>
    </li><li class="listitem">
      <p>Data completeness reports</p>
    </li><li class="listitem">
      <p>Static reports</p>
    </li><li class="listitem">
      <p>Organisation unit distribution reports</p>
    </li><li class="listitem">
      <p>Report tables</p>
    </li><li class="listitem">
      <p>Charts</p>
    </li><li class="listitem">
      <p>Web Pivot table</p>
    </li><li class="listitem">
      <p>GIS</p>
    </li><li class="listitem">
      <p>My Datamart and Excel pivot tables</p>
    </li></ol></div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1151"></a>16.1.&nbsp;Data analysis tools</h2></div></div></div>
    
    <p>The following section gives a description of each tool.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1154"></a>16.1.1.&nbsp;Standard reports</h3></div></div></div>
      
      <p>Standard reports are reports with predefined designs. This means that the reports are easily accessible with a few clicks and can be consumed by users at all levels of experience. The report can contain statistics in the form of tables and charts and can be tailored to suit most requirements. The report solution in DHIS 2 is based on JasperReports and reports are most often designed with the iReport report designer. Even though the report design is fixed, data can be dynamically loaded into the report based on any organisation unit from in the hierarchy and with a variety of time periods.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1157"></a>16.1.2.&nbsp;Data set reports</h3></div></div></div>
      
      <p>Data set reports displays the design of data entry forms as a report populated with aggregated data (as opposed to captured low-level data). This report is easily accessible for all types of users and gives quick access to aggregate data. There is often a legacy requirement for viewing data entry forms as reports which this tool efficiently provides for. The data set report supports all types of data entry forms including section and custom forms.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1160"></a>16.1.3.&nbsp;Data completeness report</h3></div></div></div>
      
      <p>The data completeness report produces statistics for the degree of completeness of data entry forms. The statistical data can be analysed per individual data sets or per a list of organisation units with a common parent in the hierarchy. It provides a percentage value for the total completeness and for the completeness of timely submissions. One can use various definitions of completeness as basis for the statistics: First based on number of data sets marked manually as complete by the user entering data. Second based on whether all data element defined as compulsory are being filled in for a data set. Third based on the percentage of number of values filled over the total number of values in a data set.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1163"></a>16.1.4.&nbsp;Static reports</h3></div></div></div>
      
      <p>Static reports provides two methods for linking to existing resources in the user interface. First it provides the possibility to link to a resource on the Internet trough a URL. Second it provides the possibility to upload files to the system and link to those files. The type of files to upload can be any kind of document, image or video. Useful examples of documents to link to are health surveys, policy documents and annual plans. URLs can point to relevant web sites such as the Ministry of Health home page, sources of health related information. In addition it can be used as an interface to third-party web based analysis tools by pointing at specific resources. One example is pointing a URL to a report served by the BIRT reporting framework.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1166"></a>16.1.5.&nbsp;Organisation unit distribution reports</h3></div></div></div>
      
      <p>The organisation unit distribution report provides statistics on the facilities (organisation units) in the hierarchy based on their classification. The classification is based on organisation unit groups and group sets. For instance can facilities be classified by type through assignment to the relevant group from the group set for organisation unit type. The distribution report produces the number of facilities for each class and can be generated for all organisation units and for all group sets in the system.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1169"></a>16.1.6.&nbsp;Report tables</h3></div></div></div>
      
      <p>Report tables are reports based on aggregated data in a tabular format. A report table can be used as a stand-alone report or can be used as data source for a more sophisticated standard report design. The tabular format can be cross-tabulated with any number of dimensions appearing as columns. It can contain indicator and data element aggregate data as well as completeness data for data sets. It can contain relative periods which enables the report to be reused over time. It can contain user selectable parameters for organisation units and periods to enable the report to be reused for all organisation units in the hierarchy. The report table can be limited to the top results and sorted ascending or descending. When generated the report table data can be downloaded as PDF, Excel workbook, CSV file and Jasper report.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1172"></a>16.1.7.&nbsp;Charts</h3></div></div></div>
      
      <p>The chart component offers a wide variety of charts including the standard bar, line and pie charts. The charts can contain indicators, data elements, periods and organisation units on both the x and y axis as well as a fixed horizontal target line. Charts can be view directly or as part of the dashboard as will be explained later.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1175"></a>16.1.8.&nbsp;Web Pivot tables</h3></div></div></div>
      
      <p>The web pivot table offers quick access to statistical data in a tabular format and provides the ability to &#8220;pivot&#8221; any number of the dimensions such as indicators, data elements, organisation units and periods to appear on columns and rows in order to create tailored views. Each cell in the table can be visualized as a bar chart. </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1178"></a>16.1.9.&nbsp;GIS </h3></div></div></div>
      
      <p>The GIS module gives the ability to visualize aggregate data on maps. The GIS module can provide thematic mapping of polygons such as provinces and districts and of points such as facilities in separate layers. The mentioned layers can be displayed together and be combined with custom overlays. Such map views can be easily navigated back in history, saved for easy access at a later stage and saved to disk as an image file. The GIS module provides automatic and fixed class breaks for thematic mapping,  predefined and automatic legend sets, ability to display labels (names) for the geographical elements and the ability to measure the distance between points in the map. Mapping can be viewed for any indicator or data element and for any level in the organisation unit hierarchy. There is also a special layer for displaying facilities on the map where each one is represented with a symbol based on the its type.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1181"></a>16.1.10.&nbsp;My Datamart and Excel Pivot tables</h3></div></div></div>
      
      <p>The purpose of the My Datamart tool is provide users with full access to aggregate data even on unreliable Internet connections. This tool consists of a light-weight client application which is installed at the computer of the users. It connects to an online central server running a DHIS 2 instance, downloads aggregate data and stores it in a database at he local computer. This database can be used to connect third-party tools such as MS Excel Pivot tables, which is a powerful tool for data analysis and visualization. This solution implies that just short periods of Internet connectivity are required to synchronize the client database with the central online one, and that after this process is done the data will be available independent of connectivity. Please read the chapter dedicated to this tool for in-depth information.</p>
    </div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1184"></a>Chapter&nbsp;17.&nbsp;Pivot Tables and the MyDataMart tool</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1189">17.1. Pivot table design</a></span></dt><dt><span class="section"><a href="#d3453e1194">17.2. Connecting to the DHIS 2 database</a></span></dt><dt><span class="section"><a href="#d3453e1198">17.3. Dealing with large amounts of data</a></span></dt><dt><span class="section"><a href="#d3453e1202">17.4. The MyDatamart tool</a></span></dt><dt><span class="section"><a href="#d3453e1207">17.5. Using Excel pivot tables and MyDatamart - a work-flow example</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1210">17.5.1. Download and run the MyDatamart tool for the first time</a></span></dt><dt><span class="section"><a href="#d3453e1213">17.5.2. Setup and distribute the pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1218">17.5.3. Update MyDatamart</a></span></dt><dt><span class="section"><a href="#d3453e1221">17.5.4. Update the Pivot tables</a></span></dt><dt><span class="section"><a href="#d3453e1224">17.5.5. Repeat step 3 and 4 when new data is available on the central server</a></span></dt></dl></dd></dl></div>
  
  <p>Excel Pivot Table (see screenshot below) is a powerful and dynamic data analysis tool that can be automatically linked to the DHIS 2 data. While most reporting tools in DHIS 2 are limited in how much data they can present at the same time, the pivot tables are designed to give nice overviews with multiple data elements or indicators, and organisation units and periods (see example below). Furthermore, the dynamic features in pivoting and drill-down are very different from static spreadsheets or many web reports, and his makes it a useful tool for information users that want to do more in-depth analysis and to manipulate the views on the data more dynamically. This combined with the well-known charting capabilities of Excel, the Pivot Table tool has made it a popular analysis tool among the more advanced DHIS users for a long time. </p>
  <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/pivot_table.png" align="middle" width="100%"></td></tr></table></div>
  <p>With the recent shift towards online deployments, the offline pivot tables in Excel also provide a useful alternative to the online reporting tools as they allow for local data analysis without Internet connectivity, which can be an advantage on unstable or expensive connections. Internet is only needed to download new data from the online server, and as soon as the data exists locally, working with the pivot tables require no connectivity. The MyDatamart tool, which is explained in detail further down, helps the users to maintain a local data mart file (small database) which is updated over the Internet against the online server, and then used as an offline data source that feeds the pivot tables with data. </p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1189"></a>17.1.&nbsp;Pivot table design</h2></div></div></div>
    
    <p>Typically an Excel pivot table file set up for DHIS 2 will contain multiple worksheets with one pivot table on each sheet. A table can consist of either raw data values (by data elements) or indicator values, and will usually be named based on which level of the organisation unit hierarchy the source data is aggregated by as well as the period type (frequency e.g. Monthly, Yearly) of the data. A  standard DHIS 2 pivot table file includes the following pivot tables: District Indicators, District Data Monthly, District Data Yearly, Facility Indicators, Facility Data Monthly, Facility Data Yearly. In addition there might be more specialized tables that focus on specific programs and/or other period types.</p>
    <p>One popular feature of pivot tables is to be able to drag-and-drop the various fields between the three positions page/filter, row, and columns,  and thereby completely change the data view. These fields can be seen as dimensions to the data values and represent the dimensions in the DHIS data model; organisation unit (one field per level), data elements or indicators, periods, and then a dynamically extended lists of additional dimensions representing organisation unit/indicator/data element group sets and data element categories (see other chapters of this guide for details). In fact a dynamic pivot table is an excellent tool to represent the many dimensions created in the DHIS 2, and makes it very easy to zoom in or out on each dimension, e.g. look at raw data values by individual age groups or just by its total, or in combination with other dimensions like gender. All the dimensions created in the DHIS 2 will be reflected in the available fields list of each pivot table, and then it is up to the user to select which ones to use.</p>
    <p>It is important to understand that the values in the pivot tables are non-editable and all the names and numbers are fetched directly from the DHIS 2 database, which makes it different from a normal spreadsheet. In order to be edited, the contents of a pivot table must be copied to a normal spreadsheet, but this is rarely needed as all the names can be edited in DHIS 2 (and then be reflected in the pivot tables on the next update). The names (captions) on each field however are editable, but not their contents (values).</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1194"></a>17.2.&nbsp;Connecting to the DHIS 2 database</h2></div></div></div>
    
    <p>Each pivot table has a connection to the DHIS 2 database and makes use of a pivot source view (SQL query) in the database to fetch the data. These queries pull all their data from the data mart tables, so it is important to keep the data mart updated at all times in order to get the most recent data into the pivot tables. A pivot table can connect to a database on the local computer or on a remote server. This makes it well suitable for use in a local network where there is only one shared database and multiple client computers using pivot tables. Excel can also connect to databases running on Linux. The database connection used in the pivot tables is specified in an ODBC data source on the Windows computers running pivot tables.</p>
    <p>For online deployments the recommended way to connect to the DHIS 2 data is to make use of the MyDatamart tool, which creates and updates a local data mart file (database) that Excel can connect to. The MyDatamart tool will be described in detail further down.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1198"></a>17.3.&nbsp;Dealing with large amounts of data</h2></div></div></div>
    
    <p>The amount of data in a DHIS 2 database can easily go beyond the capabilities of Excel. A table with around 1 million values (rows of data) tend to become less responsive to updates (refresh) and pivoting operations, and on some computers Excel will give out of memory errors when dealing with tables of this size. Typically, the more powerful the computer, the more data can be handled, but the top limit seems to be around 1 million rows even on the high-end computers.</p>
    <p>To deal with this problem the standard DHIS pivot table setup is to split the data over several pivot tables. There are different ways of splitting the data; by organisation unit aggregation level (how deep), by organisation unit coverage/boundary area (how wide), by period (e.g. one year of data at a time), or by data element or indicator groups (e.g. by health programs or themes). Aggregating away the lowest level in the organisation unit hierarchy is the most effective approach as it reduces the amount of data by a factor of the number of health facilities in a country. Typically there is no need to look at all the health facilities in a country at the same time, but instead only for a limited area (e.g. district or province). And when there is a need for data for the whole country that can be provided with district level aggregates or similar. At a district or province office the users will typically have facility level data only for their own area, and then for the neighboring areas the data will be aggregated up one or two levels to reduce the size of data, but still allow for comparison, split into e.g. the two tables Facility Data and Data District Data, and similar for indicator values. Splitting data by period or by data element/indicator groups work more or less in the same way, and can be done either in combination with the organisation unit splitting or instead of it. E.g. if a health program wants to analyse a few data elements at facility level for the whole country that can be possible. The splitting is controlled by the pivot views in the database where one specifies which data values to fetch.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1202"></a>17.4.&nbsp;The MyDatamart tool</h2></div></div></div>
    
    <p>With online deployments and the use of one single central server (and database) the local use of pivot tables becomes more difficult as Excel connects to the database directly to fetch the data. This means that Excel (and every local computer using DHIS2) would need connection details and access to the database on the server, which is not always wanted. Furthermore,
the refresh (update the pivot table) operation in Excel completely empties the table before reloading all the data again (new and old), which leads to big and duplicated data downloads over the Internet when connecting to an online server. The solution to these problems has been to build up and maintain an updated  "copy" of the central database in each local office where they use Excel pivot tables. These local databases are called data marts and are built specifically for serving as data sources for data analysis tools like Excel. The MyDatamart tool is a newly developed (May 2011) tool that creates a datamart file on a local computer and helps the users to update this against a central server. The pivot tables in Excel connect only to the local datamart and do not need to know about the central server at all.</p>
    <p>The use of MyDatamart dramatically reduces the download size when routinely updating the local Excel files against the central server compared to a direct connection from Excel. It also brings comfort to the local level users to have a copy of their data on their local computer and not to rely on a Internet connection or server up-time to access it. The figure below explains how the linking between the central online server (in the clouds) and the local offices works.</p>
    <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="resources/images/implementation_guide/mydatamart.png" align="middle" width="100%"></td></tr></table></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1207"></a>17.5.&nbsp;Using Excel pivot tables and MyDatamart - a work-flow example</h2></div></div></div>
    
    <p>The details of using the MyDatamart tool are explained in a separate user manual and this section only tries to explain the typical work-flow involved in using the tool together with the pivot tables.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1210"></a>17.5.1.&nbsp;Download and run the MyDatamart tool for the first time</h3></div></div></div>
      
      <p>MyDatamart is a small tool that is easy to download and run immediately. Download mydatamart.exe  to the Desktop and run it by double-clicking on the file. The first thing you need to do is to create a new datamart file, and then you type in the login details needed to access the central server (url, username. password). The tool will connect to the server (Internet connection needed at this point) and verify your credentials. The next step is to download all the meta-data from the server meaning all the organisation units, data elements, indicators, groups etc. This might take some time depending on your computer's specifications and the speed of the connection, but is a step that is rarely needed after this first download.  Once the tool knows the organisation unit hierarchy you can specify which organisation unit you "belong" to and the analysis level you are interested in. These are settings that limit which organisation units you will download data for. The next thing is to download the data from the server, and then you must specify which periods to download.        
 </p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1213"></a>17.5.2.&nbsp;Setup and distribute the pivot tables</h3></div></div></div>
      
      <p>The first thing needed is to download and install an ODBC driver for SQLite, which is the database server running the local datamart. The database connections in the pivot tables depend on this driver and will fail without installed.</p>
      <p>The next thing is to set up the pivot tables themselves. This is a one-off job since the file can be reused as a template in all other locations connecting to the same central database. The MyDatamart tool can produce a skeleton Excel file for you with all the necessary database connections already defined. This will help the process considerably and most of the work is to select which fields to use in each table and give them proper names. 
The user manual has all the detailed instructions on how to set up a pivot table using the MyDatamart connections.</p>
      <p>Once the template Excel file is available it is a matter of distributing it to all local offices that will use pivot tables and to make sure the connections are still valid on the local computers. The connection details in Excel depend on the odbc driver being available and on the name and location of the datamart file. Either you can streamline all local datamart files (by name and location, e.g. "C:\dhis2\dhis2.dmart", or you can use the MyDatamart tool to update the connection details in an existing Excel file to match the location of the local datamart file.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1218"></a>17.5.3.&nbsp;Update MyDatamart</h3></div></div></div>
      
      <p>Whenever there is new data available on the central server, e.g. every month, the users will have to open the MyDatamart tool, log on to the server, and then pick the months to download. Once the download has finished the data is available locally in the datamart file.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1221"></a>17.5.4.&nbsp;Update the Pivot tables</h3></div></div></div>
      
      <p>Once the local datamart file has been update the users can update the pivot tables by using the Refresh function, once per table. It is important to remember to save the Excel file after refreshing all the tables.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1224"></a>17.5.5.&nbsp;Repeat step 3 and 4 when new data is available on the central server</h3></div></div></div>
      
      <p>Whenever there is new data on the server repeat step number 3 and 4 (the two previous steps) in order to update the pivot tables and get access to the latest data.</p>
    </div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1227"></a>Chapter&nbsp;18.&nbsp;DHIS as a platform</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1242">18.1. Web portals</a></span></dt><dt><span class="section"><a href="#d3453e1265">18.2. Apps</a></span></dt><dt><span class="section"><a href="#d3453e1268">18.3. Information Systems</a></span></dt></dl></div>
  
  <p>DHIS can be perceived as a platform on several levels. First, the application database is designed ground-up with flexibility in mind. Data structures such as data elements, organisation units, forms and user roles can be defined completely freely through the application user interface. This makes it possible for the system to be adapted to a multitude of locale contexts and use-cases. We have seen that DHIS supports most major requirements for routine data capture and analysis emerging in country implementations. It also makes it possible for DHIS to serve as management system for domains such as logistics, labs and finance.</p>
  <p>Second, due to the modular design of DHIS it can be extended with additional software modules. These software modules can live side by side with the core modules of DHIS and can be integrated into the DHIS portal and menu system. This is a powerful feature as it makes it possible to extend the system with extra functionality when needed, typically for country specific requirements as earlier pointed out.</p>
  <p>The downside of the software module extensibility is that it puts several constraints on the development process. The developers creating the extra functionality are limited to the DHIS technology in terms of programming language and software frameworks, in addition to the constraints put on the design of modules by the DHIS portal solution. Also, these modules must be included in the DHIS software when the software is built and deployed on the web server, not dynamically during run-time. </p>
  <p>In order to overcome these limitations and achieve a looser coupling between the DHIS service layer and additional software artifacts, the DHIS development team decided to create a Web API. This Web API complies with the rules of the REST architectural style. This implies that:</p>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
      <p>The Web API provides a navigable and machine-readable interface to the complete DHIS data model. For instance, one can access the full list of data elements, then navigate using the provided hyperlink to a particular data element of interest, then navigate using the provided hyperlink to the list of forms which this data element is part of. E.g. clients will only do state transitions using the hyperlinks which are dynamically embedded in the responses.</p>
    </li><li class="listitem">
      <p>Data is accessed through a uniform interface (URLs) using a well-known protocol. There are no fancy transport formats or protocols involved - just the well-tested, well-understood HTTP protocol which is the main building block of the Web today. This implies that third-party developers can develop software using the DHIS data model and data without knowing the DHIS specific technology or complying with the DHIS design constraints. </p>
    </li><li class="listitem">
      <p>All data including meta-data, reports, maps and charts, known as resources in REST terminology, can be retrieved in most of the popular representation formats of the Web of today, such as HTML, XML, JSON, PDF and PNG. These formats are widely supported in applications and programming languages and gives third-party developers a wide range of implementation options.</p>
    </li></ul></div>
  <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/implementation_guide/dhis_platform.png" align="middle" width="100%"></td></tr></table></div>
  <p>There are several scenarios where additional software artifacts may connect to the DHIS Web API.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1242"></a>18.1.&nbsp;Web portals</h2></div></div></div>
    
    <p>First, Web portals may be built on top of the Web API. A Web portal in this regard is a web site which functions as a point of access to information from a potential large number of data sources which typically share a common theme. The role of the Web portal is to make such data sources easily accessible in a structured fashion under a common look-and-feel and provide a comprehensive data view for end users.</p>
    <p>Aggregate data repository: A Web portal targeted at the health domain may use the DHIS as the main source for aggregate data. The portal can connect to the Web API and communicate with relevant resources such as maps, charts, reports, tables and static documents. These data views can dynamically visualize aggregate data based on queries on the organisation unit, indicator or period dimension. The portal can add value to the information accessibility in several ways. It can be structured in a user-friendly way and make data accessible to inexperienced users. It can provide various approaches to the data, including:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Thematic - grouping indicators by topic. Examples of such topics are immunization, mother care, notifiable diseases and environmental health.</p>
      </li><li class="listitem">
        <p>Geographical - grouping data by provinces. This will enable easy comparison of performance and workload.</p>
      </li></ul></div>
    <p>Mash-up: The Web portal is not limited to consuming data from a single Web API - it can be connected to any number of APIs and be used to mash up data from auxiliary systems within the health domain. If available the portal might pull into specialized data from logistics systems tracking and managing ARV medicines, from finance systems managing payments to health facilities and from lab systems tracking lab tests for communicable diseases. Data from all of these sources might be presented in a coherent and meaningful way to provide better insight in the situation of the health domain.</p>
    <p>Document repository: The Web portal can act as a document repository in itself (also referred to as content management system). Relevant documents such as published reports, survey data, annual operational plans and FAQs might be uploaded and managed in terms of ownership, version control and classification. This makes the portal a central point for document sharing and collaboration. The emergence of high-quality, open source repository/CMS solutions such as Alfresco and Drupal makes this approach more feasible and compelling.</p>
    <p>Knowledge management: KM refers to practices for identifying, materializing and distributing insight and experience. In our context it relates to all aspects of information system implementation and use, such as:</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Database design</p>
      </li><li class="listitem">
        <p>Information system usage and how-to</p>
      </li><li class="listitem">
        <p>End-user training guidelines</p>
      </li><li class="listitem">
        <p>Data use, analysis and interpretation</p>
      </li></ul></div>
    <p>Knowledge and learning within these areas can be materialized in the form of manuals, papers, books, slide sets, videos, system embedded help text, online learning sites, forums, FAQs and more. All of these artifacts might be published and made accessible from the Web portal.</p>
    <p>Forum: The portal can provide a forum for hosting discussions between professional users. The subject can range from help for performing basic operations in the health information system to discussions over data analysis and interpretation topics. Such a forum can act as interactive source for information and evolve naturally into a valuable archive.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1265"></a>18.2.&nbsp;Apps</h2></div></div></div>
    
    <p>Second, third-party software clients running on devices such as mobile phones, smart phones and tablets may connect to the DHIS Web API and read and write to relevant resources. For instance, third-party developers may create a client running on the Android operating system on mobile devices targeted at community health workers who needs to keep track of the people to visit, register vital data for each encounter and receive reminders of due dates for patient care while travelling freely in the community. Such a client application might interact with the patient and activity plan resources exposed by the DHIS Web API. The developer will not be dependent on deep insight in the DHIS internal implementation, rather just basic skills within HTTP/Web programming and a bit of knowledge of the DHIS data model. Understanding the DHIS data model is made easier by the navigable nature of the Web API.</p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1268"></a>18.3.&nbsp;Information Systems</h2></div></div></div>
    
    <p>Third, information system developers aiming at creating new ways of visualizing and presenting aggregate data can utilize the DHIS Web API as the service layer of their system. The effort needed for developing new information systems and maintaining them over time is often largely under-estimated. Instead of starting from scratch, a new application can be built on top of the Web API. Developer attention can be directed towards making new, innovative and creative data representations and visualizations, in the form of e.g. dashboards, GIS and charting components.</p>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1271"></a>Chapter&nbsp;19.&nbsp;Localization concepts</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1288">19.1. DHIS 2 i18n tool</a></span></dt><dt><span class="section"><a href="#d3453e1315">19.2. Using the DHIS 2 translation server</a></span></dt><dt><span class="section"><a href="#d3453e1325">19.3. Important localization concepts</a></span></dt></dl></div>
  
  <p>Localization involves the adaptation of an application to another location. When
    implementing DHIS 2 in a given country, adequate resources should be allocated to translate the
    application when required. Translation of the user interface elements, messages, layout, date
    and time formats, currency and other aspects must be considered. DHIS 2 supports
    internationalization (i18n) of the user interface through the use of Java property strings. Each
    element in the user interface has been assigned a specific key which is linked to a value. As an
    example, consider the following key/value pairs.</p>
  <pre class="programlisting">org_unit_tree=Organisation Unit Tree
error_occurred=An error has occurred.</pre>
  <p>In French the same key/value pairs would appear as follows</p>
  <pre class="programlisting">org_unit_tree=Arborescence des unit&eacute;s d'organisation
error_occurred=Une erreur s'est produite</pre>
  <p>Note that the keys (text before the = symbol) are the same in both examples, but the values
    (after the = ) symbol are in each of the respective languages. Each of these key/value pairs
    would need to be translated from the original language (English) to the destination language
    (e.g. French). When the user specifies French for the user interface language, all of the
    strings would then appear in French instead of the default language (English). Any strings which
    have not been translated, would appear in English.</p>
  <p>The translation keys and values are stored in files called resource bundles. The resource
    bundles follow fallback rules, meaning that one can create a hierarchy of resource bundles
    through the file naming convention where property keys are searched from the bottom of the
    hierarchy and returned at the first match. This comes in useful when you need partial
    translations, for instance to cater for country-specific variances in a language. One example is
    Portuguese for which DHIS 2 has several resource bundles:</p>
  <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
      <p>i18n_global.properties (The ulimate fallback locale, which is English)</p>
    </li><li class="listitem">
      <p>i18n_module_pt.properties (Portuguese translations)</p>
    </li><li class="listitem">
      <p>i18n_module_pt_BR.properties (Brazilian Portuguese translations)</p>
    </li></ol></div>
  <p>This structure allows us to have a full general Portuguese translation, and a partial
    Brazilian Portuguese translation which provides translations of Brazilian-specific keys. For
    keys which are not translated in the Brazilian Portuguese resource bundle, the system will fall
    back to the general Portuguese translation. If the key is not present in that file either, the
    system will fall back to the ultimate fallback locale which is English.</p>
  <p>There are a number of different mechanisms to begin to localize DHIS 2, two of which will be
    discussed in the next sections.</p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1288"></a>19.1.&nbsp;DHIS 2 i18n tool</h2></div></div></div>
    
    <p>The i18n resource editor is Java desktop application which can be downloaded from
      http://www.dhis2.org/downloads . It requires that you have checked out the DHIS 2 source code
      from Bazaar (check out http://www.dhis2.org/development if necessary) and have a Java Runtime
      Environment installed on your computer. On Windows, simly unpack the ZIP archvie and click the
      executable file. On Linux, extract the archive, navigate inside the extracted directory and
      invoke the following:</p>
    <pre class="screen">java -jar dhis-i18n-resourceeditor.jar</pre>
    <p></p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>Press "Browse" when the application starts and select the path to the
          "dhis-2" directory inside your local copy (checkout) of the DHIS 2 source code repository,
          followed by OK. </p>
        <div class="screenshot">
          <div class="mediaobject" align="center"><img src="resources/images/i18n/i18n_tool_startup.png" align="middle"></div>
        </div>
      </li><li class="listitem">
        <p>Next, select the destination locale which you will translate strings into. Remember
          that if you want to create or add to a general language translation, select e.g.
          "Portuguese - [pt]. If you want to create a country-specific translation, select e.g.
          "Portuguese - Brazil [pt_BR]. Locales which already have keys translated will show the
          text "Resources for this locale exist".</p>
        <div class="screenshot">
          <div class="mediaobject" align="center"><img src="resources/images/i18n/i18n_tool_select_locale.png" align="middle"></div>
        </div>
      </li><li class="listitem">
        <p>Select one of the web modules from the left hand side to translate, e.g.
          dhis-web-maintenance-dataset.</p>
        <div class="screenshot">
          <div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/i18n/i18n_tool_main_window.png" align="middle" width="100%"></td></tr></table></div>
        </div>
        <p>Once you have selected a module, click on a particular key from the left-hand side. A
          reference value for the key will be displayed in the lower right-hand pane, and the
          translation value will be displayed in the upper right-hand pane. Keys with missing values
          will be indicated with a red icon. If the value does not exist, simply add the translation
          there.</p>
      </li><li class="listitem">
        <p>Once you have finished translating, make sure to press the "Save" button. </p>
      </li></ol></div>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1315"></a>19.2.&nbsp;Using the DHIS 2 translation server</h2></div></div></div>
    
    <p>A web-based portal solution has been setup in order to facilitate the translation of DHIS
      2 into multiple languages. Simply direct your browser to http://translate.dhis2.net/ and
      register for an account by providing a username, email address and password. The server will
      send you a confirmation email which you can use to activate your account. Once you have
      activated your account, simply press the "Log in" link from the main portal page,
      and provide your username and password. </p>
    <p>The first time you login, you should select your settings, by clicking "My account-&gt;Settings". Here you can select your interface language, the projects which you wish to work on,  and the languages which you will translate into. Be sure to press "Save" when have finished making your changes. </p>
    <p>To start translating, be sure you have logged in, and then press the "Home" link
      in the upper-right hand corner. Select a project (e.g. DHIS 2) and then click on the language
      which you wish to translate. The number of words which need to be translated will be displayed
      under the "Summary" field. Click on one of the modules (e.g. dhis-2) and the keep
      drilling down through the folders to find a module which needs translation, (e.g.
      dhis-web-&gt;dhis-web-caseentry). Now click on the "Summary" text which will say
      something like "194 words need attention". You will be directed to the key/value
      pair which requires translation. </p>
    <div class="screenshot">
      <div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/i18n/i18n_web_portal_translate.PNG" align="middle" width="100%"></td></tr></table></div>
    </div>
    <p>In this case, we need to translate the phrase "Name-based" from English to French. Enter the translation in the window just below the reference phrase.. If you are unsure if the translation is correct or needs review, you can mark it as "Fuzzy". Once you have completed the translation, just press "Submit". Your translations will be incorporated into the source code on a regular basis by the development team. </p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1325"></a>19.3.&nbsp;Important localization concepts</h2></div></div></div>
    
    <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="resources/images/admon/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top">
      <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
          <p>There are a number of key/value pairs such as "format.FinancialApril.startDate=dd MMM yyyy 'to '" which are used for date/time formatting in the application. Part of the value should not be translated because it is actually a Java date formatting template. It this example it is  "dd MMM yyyy". Consult this <a class="ulink" href="http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html" target="_top">site</a> for more information on the Java date formatting syntax. The part of the value which can be translated would be "to", for instance to "a" in Spanish. If these data format template strings are translated, it may result in errors in the application. </p>
        </li><li class="listitem">
          <p>It is not necessary to translate a string from the original language (English) if
            the translated string is the same. You can simply leave it blank. By default, DHIS 2
            will use English values for all strings which have not been translated. </p>
        </li><li class="listitem">
          <p>All translated strings must be stored in escaped UTF-8 format. If you are using the translation portal, be sure your browser settings are set to UTF-8 when translating. If you are using a text editor or other tool such as an IDE, you may need to convert the UTF-8 characters to escaped syntax, using the Java "native2ascii" utility. </p>
        </li><li class="listitem">
          <p>Some special variables (e.g. {0} ) used curly brackets. This denotes a variable which will be replaced by a number or other value by the application. You must place this variable notation in the correct position. </p>
        </li></ul></div>
    </td></tr></table></div>
  </div>
</div>
  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1338"></a>Chapter&nbsp;20.&nbsp;DHIS2 Tools Guide</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d3453e1340">20.1. Overview</a></span></dt><dt><span class="section"><a href="#d3453e1358">20.2. Architecture</a></span></dt><dt><span class="section"><a href="#d3453e1368">20.3. Installation</a></span></dt><dt><span class="section"><a href="#d3453e1392">20.4. DHIS2 tools reference</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#d3453e1401">dhis2-instance-create</a></span><span class="refpurpose"> &#8212; Creates a new dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1449">dhis2-startup</a></span><span class="refpurpose"> &#8212; Starts a dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1469">dhis2-shutdown</a></span><span class="refpurpose"> &#8212; Stops a dhis2 instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1489">dhis2-clone</a></span><span class="refpurpose"> &#8212; Clones the database of one instance to another instance</span></dt><dt><span class="refentrytitle"><a href="#d3453e1510">dhis2-deploy-war</a></span><span class="refpurpose"> &#8212; Deploys a war file</span></dt><dt><span class="refentrytitle"><a href="#d3453e1551">dhis2-logview</a></span><span class="refpurpose"> &#8212; Shows log file</span></dt><dt><span class="refentrytitle"><a href="#d3453e1571">dhis2-logtail</a></span><span class="refpurpose"> &#8212; Shows the bottom log file in real time. Type Ctrl-C to exit.</span></dt><dt><span class="refentrytitle"><a href="#d3453e1591">dhis2-create-admin</a></span><span class="refpurpose"> &#8212; Create a user for administering dhis2 instances</span></dt></dl></dd><dt><span class="section"><a href="#d3453e1608">20.5. Troubleshooting guide</a></span></dt></dl></div>
  
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1340"></a>20.1.&nbsp;Overview</h2></div></div></div>
    
    <p>The dhis2-tools package is a collection of tools and utilities for installing and managing
      DHIS2 applications on an ubuntu server. The tools provide the ability to go from a "blank"
      server with only ssh running, to a fully functioning dhis2 installation in a matter of
      minutes. Used together they can also be combined into automated scripts to facilitate rapid
      reconstruction of a given configuration.</p>
    <p>The tools have been collected and developed over a number of years.  This documentation
      differs in some respects from the installation guidelines in the dhis2 user manual in that it describes
      the implementation of a specific approach rather than the more general tutorial nature of the
      user manual. It is recommended that implementers do also study the material in the user manual as it provides additional
      information, eg. how to tune the postgresql server.  The rationale of the tools described in 
      this manual includes:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>to ease the process of installation so that it can be easily explained, documented
      and executed;</p>
      </li><li class="listitem">
        <p>to assist system administrators (particularly, but not exclusively, lesser experienced
          ones) to implement reasonable security measures by default and thus minimize vulnerabilities
          brought about through human error and negligence;
        </p>
      </li><li class="listitem">
        <p>to provide a set of scripts to assist the administrator with tasks related to managing
            their dhis2 system, beyond the one off process of installation.</p>
      </li></ol></div><p>
    The package remains a work in progress and there are a number of areas where it could and should
    (and hopefully will be improved).  For example,
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>currently the tuning of the postgresql database is not covered. There are ways in which this
            could be at least semi automated;</p></li><li class="listitem"><p>nginx configuration is assisted by means of providing a sample configuration file.
        This configuration could be made more dynamic;</p></li><li class="listitem"><p>the format of what is currently packaged is an Ubuntu linux deb package. There is 
          also considerable interest in the Redhat/CentOS flavour of linux for running dhis2.  It should be
          possible to offer a yum format package to facilitate use on these systems. 
        </p></li></ol></div><p>
    </p>
  </div>
   
   <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1358"></a>20.2.&nbsp;Architecture</h2></div></div></div>
     
    <p>
      The figure below shows the main components involved in a DHIS2 system.
      </p><div class="figure"><a name="d3453e1361"></a><p class="title"><b>Figure&nbsp;20.1.&nbsp;Single machine all-in-one installation</b></p><div class="figure-contents">
        
        <div align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><object type="image/svg+xml" data="architecture.svg" width="100%" align="middle"></object></td></tr></table></div>
      </div></div><p><br class="figure-break">
      The dhis2-tools are primarily concerned with the creation and managing of the tomcat instances
      which deliver the web application. As you can see in the diagram there may be one or more of these.
      In addition the system requires a postgresql database server and an nginx web proxy server.  There
      are many possible configurations where these can be running on a different server than the dhis2
      instances.  These tools for the most part assume that they are all installed together on the one machine.
      Some customisation is required to separate them.
    </p>
    <p>
      When an instance is created with the dhis2-create-instance command, a new user is created with the name 
      of the instance (lets say its called hmis). The home directory of that user is located at /var/lib/dhis2/hmis.
      A database role is created also called hmis together with a database with the name of hmis.  The DHIS2_HOME
      environment variable for the instance is set to the same home directory of the user.
    </p>
    <p>The essential components of a standalone tomcat instance are also created within the same directory 
      (modelled after the ubuntu tomcat7-user package).  The web.xml file of that tomcat instance has been customized
      to allow an upstream web proxy server (such as nginx) to cache the static content of the dhis2 application.
    </p>
    <p>
      The user will also have a crontab configuration automatically setup to manage daily backups, start on computer restart
      and log file rotation.
    </p>
    <p>
      Note that postgresql optimization, as described in the dhis2 user documentation, is not managed by this package and
      needs to be done as a post-installation step.
    </p>
  </div>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1368"></a>20.3.&nbsp;Installation</h2></div></div></div>
    
    <p> This manual assumes that you have installed a minimal distribution of ubuntu server 12.04
      LTS or 14.04 LTS. By minimal we mean that only the base operating system is installed together
      with an openssh server. During the installation you should avoid to install ANY other packages
      The dhis2-tools package will ensure that the required packages are installed as dependencies.</p>
    <p>
      It is recommended as a general guideline that before proceeding any further you should strengthen the
      security of the system at this point by improving the security of your ssh service and installing a host based
      firewall like ufw.  This process is described eleswhere(?).
    </p>
    <p> 
      Once your base system is properly installed and secured you can proceed to install the
      dhis2-tools package from the apt repository at http://apt.dhis2.org. The easiest way to do so is to 
      run the install.sh script available at ...
    </p>
    <p>
      The simplified set of steps to get a dhis2 instance up and running from here are:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
          <p>turn your user (eg bobj) into a dhis2-admin user by running:</p>
          <p>sudo dhis2-create-admin bobj </p>
        </li><li class="listitem">
          <p>create an instance named eg dhis with:</p>
          <p>dhis2-instance-create dhis</p>
        </li><li class="listitem">
          <p>deploy the latest stable war file with:</p>
          <p>dhis2-deploy-war dhis</p>
        </li><li class="listitem">
          <p>setup a basic nginx template with:</p>
          <p>dhis2-nginx</p>
          <p>
            Note that nginx configuration is not done automatically.  Though running the command dhis2-nginx will 
            create a simple site configuration file under /etc/nginx/sites-enabled/dhis2.  You may need to edit this file
            to ensure that instance names and port numbers are correct.            
          </p>
        </li><li class="listitem">
          <p>start your dhis instance with:</p>
          <p>dhis2-startup dhis</p>
        </li></ol></div><p>
    </p>
    <p>
      A full description of these commands and others used for managing your instance is included in the
      command reference section below.
    </p>    
  </div>

  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1392"></a>20.4.&nbsp;DHIS2 tools reference</h2></div></div></div>
    
    <p>The reference documentation for the commands contained in the package is listed in the
      pages below. This documentation should also be included as man pages when the package is
      installed. So for example you should be able to type </p>
    <p><code class="code">man dhis2-instance-create</code></p>
    <p> to read the documentation for that command on the system. Typing</p>
    <p><code class="code">apropos dhis2</code></p>
    <p> will show you all the dhis2 related man pages.</p>

    
    <div class="refentry"><a name="d3453e1401"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-instance-create
         &#8212; Creates a new dhis2 instance
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-instance-create</code> 
           [
            <code class="option">OPTIONS</code>
          ]
            name 
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1414"></a><h2>Description</h2>
        
        <p>Use this tool to create a new dhis2 instance in a tomcat container. The name that is
          specified will be used to create a new user and a new database with the name of that user.
          The user will be assigned to the <span class="bold"><strong>dhis2</strong></span> group. The user
          will have a home directory created in /var/lib/dhis2/&lt;username&gt;. This directory acts as
          both the <span class="bold"><strong>DHIS2_HOME</strong></span> directory and also the <span class="bold"><strong>CATALINA_BASE</strong></span> directory for the tomcat servlet container.</p>
        <p>By default the instance is allocated 2G of heap space RAM. This can be adjusted by
          editing the parameters in <span class="bold"><strong>/var/lib/dhis2/&lt;name&gt;/bin/setenv.sh</strong></span>.</p>
        <p>The servlet container is configured to run with an http connector pool of a maximum of
          100 threads. This parameter can be adjusted by editing <span class="bold"><strong>/var/lib/dhis2/&lt;name&gt;/conf/server.conf</strong></span>.</p>
        <p>The servlet container configuration has been specially tweaked for running DHIS2. For
          example tomcat filters are used to ensure that all static content from the web application
          are cacheable by web proxy servers such as nginx or apache. The lib directory of the
          webapp has been explicitly placed in the application classpath so that additional jars
          such as java compiled apache camel routes can be made available to the DHIS2
          application.</p>
        <p>Note that a dhis2 war file is not deployed by default. See the manual page for
            <span class="bold"><strong>dhis2-deploy-war</strong></span> for instructions to deploy a dhis2 war
          file over the internet from the latest stable global build, latest trunk build or from a
          user specified war file on the filesystem. </p>
        <p>You need to be a member of the <span class="bold"><strong>dhis2-admin</strong></span> group to
          use these and other tools for managing the instance. See the manual page for <span class="bold"><strong>dhis2-create-admin</strong></span>.</p>
      </div>
      <div class="refsect1"><a name="d3453e1430"></a><h2>OPTIONS</h2>
        
        <div class="variablelist"><dl class="variablelist"><dt><span class="term">-p</span></dt><dd>
              <p>http port</p>
            </dd><dt><span class="term">-n</span></dt><dd>
              <p>DO NOT create the database when creating the instance. Note if you use this
                option you will have to manually edit the properties file at
                /var/lib/dhis2/&lt;instance&gt;/hibernate.properties.</p>
            </dd></dl></div>
      </div>
      <div class="refsect1"><a name="d3453e1441"></a><h2>Examples</h2>
        
        <p><span class="command"><strong>dhis2-instance-create -p 8080 hmis</strong></span></p>
        <p>Creates a new instance called hmis listening on http port 8080.</p>
      </div>
      <div class="refsect1"><a name="d3453e1446"></a><h2>See also</h2>
        
        <p>dhis2-create-admin (1), dhis2-deploy-war (1), dhis2-startup (1), dhis2-shutdown (1),
          dhis2-deploy-war (1) and dhis2-log (1).</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1449"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-startup
         &#8212; Starts a dhis2 instance
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-startup</code> 
           {instance name}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1460"></a><h2>Description</h2>
        
        <p>Start a dhis2 instance</p>
      </div>
      <div class="refsect1"><a name="d3453e1463"></a><h2>Examples</h2>
        
        <p>dhis2-startup myInstance</p>
      </div>
      <div class="refsect1"><a name="d3453e1466"></a><h2>See also</h2>
        
        <p>dhis2-shutdown (1), dhis2-deploy-war (1) and dhis2-instance-create (1).</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1469"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-shutdown
         &#8212; Stops a dhis2 instance
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-shutdown</code> 
           {instance name}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1480"></a><h2>Description</h2>
        
        <p>Stop a dhis2 instance</p>
      </div>
      <div class="refsect1"><a name="d3453e1483"></a><h2>Examples</h2>
        
        <p>dhis2-shutdown myInstance</p>
      </div>
      <div class="refsect1"><a name="d3453e1486"></a><h2>See also</h2>
        
        <p>dhis2-startup (1)</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1489"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-clone
         &#8212; Clones the database of one instance to another instance
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-clone</code> 
           {master}
           {copy}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1501"></a><h2>Description</h2>
        
        <p>This command creates a copy of the database and war file of one instance into another
          instance. The main use case for this is where you want to setup an instance for training
          purposes. Trainees can be "let loose" on the training instance without fear of disturbing
          the data or configuration of the production instance. They will however be working with
          the same usernames, forms and reports which exist in the master. The command should be
          executed with care as it will completely replace the existing database of the target
          instance</p>
        <p>Scheduled datamart and analytics generation jobs are disabled in the target
          instance.</p>
        <p>The command could conceivably be scheduled to run in the early morning to ensure that
          the database is restored to a pristine state for the start of each day's training. Or it
          can be run on demand.</p>
      </div>
      <div class="refsect1"><a name="d3453e1506"></a><h2>Examples</h2>
        
        <p>dhis2-clone hmis training</p>
        <p>Creates a new instance called training from an existing instance called hmis.</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1510"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-deploy-war
         &#8212; Deploys a war file
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-deploy-war</code> 
           [
            <code class="option">OPTIONS</code>
          ]
            instance name 
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1523"></a><h2>OPTIONS</h2>
        
        <div class="variablelist"><dl class="variablelist"><dt><span class="term">-t</span></dt><dd>
              <p>Deploy war from latest trunk build. NOT RECOMMENDED for production
                systems</p>
            </dd><dt><span class="term">-l</span></dt><dd>
              <p>Deploy war located at a custom url</p>
            </dd><dt><span class="term">-f</span></dt><dd>
              <p>Deploy war from a file on the filesystem</p>
            </dd></dl></div>
      </div>

      <div class="refsect1"><a name="d3453e1538"></a><h2>Description</h2>
        
        <p>Deploys a dhis2 war file to the instance. The default behaviour when no options are
          given is to download and deploy the latest stable release from
          http://stable.dhis2.org.</p>
      </div>
      <div class="refsect1"><a name="d3453e1541"></a><h2>Examples</h2>
        
        <p><span class="command"><strong>dhis2-deploy-war myInstance</strong></span> deploys the latest stable release from
          dhis2.org into myInstance.</p>
        <p><span class="command"><strong>dhis2-deploy-war -f wars/dhis.war myInstance</strong></span> deploys the war file
          at wars/dhis.war into myInstance.</p>
        <p><span class="command"><strong>dhis2-deploy-war -t myInstance</strong></span> deploys the latest trunk build from
          the dhis2 team integration server into myInstance. Don't use this in production.</p>
        <p><span class="command"><strong>dhis2-deploy-war -l http://mywars.org/dhis.war myInstance</strong></span> deploys
          the war file from a user provided url into myInstance.</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1551"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-logview
         &#8212; Shows log file
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-logview</code> 
           {instance name}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1562"></a><h2>Description</h2>
        
        <p>Use this tool to view log of dhis2 instance using less. Type ":q" to exit. See the man
          page for less for tips in navigating and searching the file.</p>
      </div>
      <div class="refsect1"><a name="d3453e1565"></a><h2>Examples</h2>
        
        <p>dhis2-logview myInstance</p>
      </div>
      <div class="refsect1"><a name="d3453e1568"></a><h2>See also</h2>
        
        <p>dhis2-logtail (1).</p>
      </div>

    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1571"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-logtail
         &#8212; Shows the bottom log file in real time. Type Ctrl-C to exit.
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-logtail</code> 
           {instance name}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1582"></a><h2>Description</h2>
        
        <p>Use this tool to show the log of dhis2 instance in real time.</p>
      </div>
      <div class="refsect1"><a name="d3453e1585"></a><h2>Examples</h2>
        
        <p>dhis2-logtail myInstance</p>
      </div>
      <div class="refsect1"><a name="d3453e1588"></a><h2>See also</h2>
        
        <p>dhis2-logview (1).</p>
      </div>
    </div>

    
    <div class="refentry"><div class="refentry.separator"><hr></div><a name="d3453e1591"></a><div class="titlepage"></div>
      
      <div class="refnamediv"><h2>Name</h2><p>
        dhis2-create-admin
         &#8212; Create a user for administering dhis2 instances
      </p></div>

      <div class="refsynopsisdiv"><h2>Synopsis</h2>
        <div class="cmdsynopsis"><p>
          <code class="command">/usr/bin/dhis2-create-admin</code> 
           {username}
        </p></div>
      </div>

      <div class="refsect1"><a name="d3453e1602"></a><h2>Description</h2>
        
        <p>Creates a new dhis2 admin user. If the specified user does not exist, she will be
          created on the system. Otherwise an existing user is modified. The dhis2 admin user will
          have postgres superuser privileges and wil be a member of the dhis2admin group. </p>
      </div>
      <div class="refsect1"><a name="d3453e1605"></a><h2>Examples</h2>
        
        <p>Create it like this</p>
      </div>
    </div>
  </div>
  
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d3453e1608"></a>20.5.&nbsp;Troubleshooting guide</h2></div></div></div>
    
    <p>The following table shows some common problems which occur and likely remedies:</p>
    <p>
      </p><div class="table"><a name="d3453e1612"></a><p class="title"><b>Table&nbsp;20.1.&nbsp;Troubleshooting guide</b></p><div class="table-contents">
        
        <table summary="Troubleshooting guide" border="1"><colgroup><col align="left" class="c1"><col align="left" class="c2"></colgroup><thead><tr><th align="left">Problem</th><th align="left">Solution</th></tr></thead><tbody><tr><td align="left">
                <p> When you attempt to access the site with your browser it does not connect.
                </p>
              </td><td align="left">
                <p> Either there is a network problem or nginx is not running. Check first to see
                  if you can ping the host. If not you have a network problem. If you can ping the
                  site, the most likely problem is that nginx is not installed or is not running.
                  Verify that nginx is up and running and listening on ports 443 and 80 by typing: </p>
                <p><code class="code">sudo netstat -ntlp</code>
                </p>
                <p>You should see the nginx process listening on those 2 ports</p>
              </td></tr><tr><td align="left">
                <p> You can access the site but you see a 502 gateway error in your browser.
                </p>
              </td><td align="left">
                <p> This means that nginx is unable to connect to your backend dhis2 instance.
                  Either the instance is not running or your nginx location configuration has an
                  error. Running the same netstat command above should show your instance listening
                  on 127.0.0.1 with a port number typically 8080 or whatever you have configured it
                  as. </p>
                <p> If its not running, try to start it with <code class="code">dhis2-startup [instance
                  name]</code>
                </p>
                <p>If it is still not running, check the log file with <code class="code">dhis2-logview
                  [instance name]</code> to see if there is any information indicating why it has
                  failed to start.</p>
                <p>If it is running and you can see it with netstat then you need to check your
                  nginx configuration file to ensure that the locatio is correctly mapped.</p>
              </td></tr><tr><td align="left">
                <p>You can access the site but you see a blank page in your browser.
                </p>
              </td><td align="left">
                <p>
                  This usually means that the dhis2 instance is running, but you have forgotten
                  to deploy a war file to it.  You need to run dhis2-deploy-war on that instance.
                  See the reference section above for details of options.
                </p>
              </td></tr></tbody></table>
      </div></div><p><br class="table-break">
    </p>
  </div>
</div>
    <div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="d3453e1645"></a>Appendix&nbsp;A.&nbsp;DHIS 2 Documentation Guide</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#docs_1">A.1. DHIS 2 Documentation System Overview</a></span></dt><dt><span class="section"><a href="#docs_2">A.2. Introduction</a></span></dt><dt><span class="section"><a href="#docs_3">A.3. Getting started with GitHub</a></span></dt><dt><span class="section"><a href="#docs_4">A.4. Getting the document source</a></span></dt><dt><span class="section"><a href="#docs_5">A.5. Editing the documentation</a></span></dt><dt><span class="section"><a href="#docs_6">A.6. Using images</a></span></dt><dt><span class="section"><a href="#docs_7">A.7. Linking documents together</a></span></dt><dt><span class="section"><a href="#docs_8">A.8. Handling multilingual documentation</a></span></dt><dt><span class="section"><a href="#docs_9">A.9. Building the documentation</a></span></dt><dd><dl><dt><span class="section"><a href="#d3453e1732">A.9.1. Building the documentation with Apache maven</a></span></dt><dt><span class="section"><a href="#d3453e1739">A.9.2. Building with xmlto</a></span></dt></dl></dd><dt><span class="section"><a href="#docs_10">A.10. Committing your changes back to GitHub</a></span></dt></dl></div>
    
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_1"></a>A.1.&nbsp;DHIS 2 Documentation System Overview</h2></div></div></div>
    
    <p>DHIS 2 is a web-based aggregate information management system under very active development. Given the modular nature of the system, its wide user base and distributed, global nature of development, a comprehensive documentation system is required. An in-depth discussion of the need for documentation of DHIS 2 has been considered previously.[<span class="citation">Store2007</span>]  <a class="ulink" href="http://www.docbook.org" target="_top">DocBook</a> is a comprehensive XML based system for creation of books, papers and other technical documents maintained by <a class="ulink" href=" http://www.oasis-open.org/" target="_top">OASIS</a> . </p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_2"></a>A.2.&nbsp;Introduction</h2></div></div></div>
    
    <p>One of the main advantages of DocBook is that there is complete separation between the
content and presentation. DocBook is a pure XML format, and is well documented. It is believed that only a very small subset of its features will be required in order to achieve much higher quality documentation for DHIS. There are some 400 separate mark-up elements that cater to almost any level of technical documentation needs, but in reality, only a few dozen of these element will probably need to be employed to achieve high-quality documentation for DHIS 2, both for printed as well as on-line formats such as HTML or integrated help systems within the application itself. Therefore, there are wide range of possibilities in terms of which editor can be used for the creation of DocBook files. A fairly complete list of possibilities is located <a class="ulink" href="http://wiki.docbook.org/topic/DocBookAuthoringTools" target="_top">here</a>. It is currently recommended to use  WYSIWYG  <a class="ulink" href="http://syntext-serna-free.software.informer.com/download/" target="_top">Syntext Serna Free</a>   editor for editing DocBook source files. In principle, any text editing program or XML editor can be used to author DocBook files.</p>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="resources/images/admon/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">
      <p>It is not recommended to use the editor XMLmind XML Editor Personal Edition (also known as XXE Personal), as the editor "silently" places unneeded whitespace and other ornamentation to the DocBook source which makes collaborative editing of documents very difficult. </p>
    </td></tr></table></div>
    <p>One of the key concepts to keep in mind when authoring documentation in DocBook, or other
presentation neutral formats, is that the <span class="bold"><strong>content </strong></span>of the document should be considered in the first instance. The <span class="bold"><strong>presentation </strong></span>of the document will take place in a separate step, where it will be rendered into
different formats, such as HTML and PDF. It is therefore important that the document is will organised and structured, with appropriate DocBook tags and structural elements being considered.</p>
    <p>It is good practice to break your document in to various sections using the
"sect", or section element. Section elements can also be nested within each other, such as "Section 1" and "Section 2". This concept is essentially the same as <span class="productname">Microsoft Word</span>&#8482; or other word processing programs. DocBook will automatically take care of numbering the sections for you when the document is produced. Two other important elements are the "itemizedlist" and "numberedlist". These are quite similar, but an itemised list corresponds to a bulleted list, which a numbered list will be rendered with each element being numbered sequentially. Other key elements are "screenshot" and "table" which should be self-explanatory.</p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_3"></a>A.3.&nbsp;Getting started with GitHub</h2></div></div></div>
    
    <p>Currently, the documentation system is part of the source code housed at <a class="ulink" href="https://github.com/dhis2/dhis2-docbook-docs" target="_top">GitHub</a>. GitHub is a collaborative platform that enables multiple people to work on software projects collaboratively. In order for this to be possible, a version control system is necessary in order to manage all the changes that multiple users may make. GitHub uses the <span class="emphasis"><em>git</em></span> source control system. While it is beyond the scope of this document to describe the functionality of <span class="emphasis"><em>git</em></span>, users who wish to create documentation will need to gain at
least a basic understanding of how the system works. A basic guide is provided in the next section. </p>
    <p> In order to start adding or editing the documentation, you should first perform a
checkout of the source code. If you do not already have a GitHub account, you will need to get one. This can be done <a class="ulink" href="https://github.com/" target="_top">here</a>. Once you register with GitHub, you will need to request access to the<span class="emphasis"><em> dhis2-documenters</em></span> group. Login to GitHub, and then file an issue  <a class="ulink" href="https://github.com/dhis2/dhis2docs/issues/new" target="_top">here</a>. Your request will need to be approved by the group administrators. Once you have been granted access to the group, you can commit changes to the documentation branch and send and receive notifications if you wish. </p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_4"></a>A.4.&nbsp;Getting the document source</h2></div></div></div>
    
    <p>In order to edit the documentation, you will need to download the source pages of the
documentation to your computer. GitHub uses a version control system known as git . There are different methods for getting Git working on your system, depending on which operating system you are using. A good step-by-step guide for <span class="productname">Microsoft</span>&#8482; operating systems can be viewed <a class="ulink" href="https://help.github.com/articles/getting-started-with-github-for-windows" target="_top">here</a>.  Alternatively, if you are comfortable using the command line, you can download git from <a class="ulink" href="http://git-scm.com/download/win" target="_top">this page</a>If you are using Linux, you will need to install git on your system through your package manager, or from source code. A very thorough reference for how git is used is available in a number of different formats <a class="ulink" href="http://git-scm.com/book" target="_top">here</a>.</p>
    <p>Once you have installed git on your system, you will need to download the document source.
Just follow this procedure:</p>
    <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
        <p>Make sure you have git installed.</p>
      </li><li class="listitem">
        <p> On Windows systems, visit <a class="ulink" href="https://github.com/dhis2/dhis2docs" target="_top">https://github.com/dhis2/dhis2docs</a> and press "Clone in Desktop". If you are using the command line, just type <span class="command"><strong>git clone git@github.com:dhis2/dhis2docs.git</strong></span>
   </p>
      </li><li class="listitem">
        <p>The download process should start and all the documentation source files will be
downloaded to the folder that you specified.</p>
      </li><li class="listitem">
        <p>The DHIS2 documents depend on other branches for their documentation. Be sure to keep these these up to date as well. When you build the documentation, the necessary submodules will be downloaded automatically as part of the build process ,if you have not already done so. </p>
      </li></ol></div>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_5"></a>A.5.&nbsp;Editing the documentation</h2></div></div></div>
    
    <p>Once you have downloaded the source, you should have a series of folders inside of the
dhis2docs directory. All documents should be placed in the <code class="filename">dhis2docs/src/docbkx/XX</code> folder. Note that the <code class="filename">XX</code> represents the ISO 639-1 (two-letter) language code of the documentation. If you are developing English language documentation, place it inside the <code class="filename">/dhis2docs/src/docbkx/en/</code> folder. Place any image files that may be linked to your document in the <code class="filename">/dhis2docs/src/docbkx/XX/resources/images</code> folder and link these inside your DocBook document using a relative file link. When the documentation is built, in a separate step, the images will be automatically copied over to the correct directory during the build process.</p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_6"></a>A.6.&nbsp;Using images</h2></div></div></div>
    
    <p>Screen shots are very useful for providing information to users on how particular actions
should be performed. DocBook has no intrinsic mechanisms to know exactly how an image should be rendered in the final document. Therefore, it is necessary to provide instructions through element attributes. The following XML code fragment demonstrates how an image can be specified to occupy 80% of the available page width. For screen shots in landscape format, this seems to be an appropriate amount. You may need to experiment a bit to obtain a proper width for your image. Alternatively, you can edit the resolution of the image itself, in order to obtain a proper size during rendering. </p>
    <pre class="programlisting">&lt;screenshot&gt;
 &lt;screeninfo&gt;DHIS2 Login screen&lt;/screeninfo&gt;
  &lt;mediaobject&gt;
   &lt;imageobject&gt; 
    &lt;imagedata fileref="dhis2_login_screen.jpg" format="JPG" width="80%"/&gt;
   &lt;/imageobject&gt;
  &lt;/mediaobject&gt; 
&lt;/screenshot&gt;</pre>
    <p>For other images, depending on their size, a different value may be necessary. If you do
not specify a width for you image, and its intrinsic size is larger than the available screen width, the image may overflow in certain document types with a fixed width, such as PDF. </p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_7"></a>A.7.&nbsp;Linking documents together</h2></div></div></div>
    
    <p>DocBook provides a modular framework where many separate documents can be linked together
into a master document. Fragments from different documents can also be reused in different contexts. It is therefore important to consider whether your document should be constructed as an article or a chapter. Chapters are essentially portions of a book, and can therefore be linked together into a larger document very easily. Articles are essentially standalone documents, but they can also be assembled together into a larger document at the component level. </p>
    <p>Should you wish to link several articles together into a book, DocBook provides a
mechanism to assign an id to a section. In the example below, a section has been assigned an id. This id must be unique within the document. </p>
    <p>
</p><pre class="programlisting">  &lt;section id="mod2_1"&gt;
&lt;title&gt;Getting started with DHIS2&lt;/title&gt; ....</pre><p> </p>
    <p>In order to include an article into a book, an Xinclude statement must be used. The
following example shows how. </p>
    <p>
</p><pre class="programlisting">&lt;chapter&gt;
&lt;title&gt;Getting started with DHIS2&lt;/title&gt; 
&lt;xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="dhis2_user_man_mod2.xml"
 xpointer="mod2_1" encoding="UTF-8"/&gt;
... </pre><p>
</p>
    <p>Note that the file name and id have been assigned in the parent document, referring to the
actual file (href) and particular fragment of the child document that should be referenced in the parent document (xpointer). </p>
    <p>Including chapters in a book is very simple. The example below illustrates how: </p>
    <pre class="programlisting">&lt;xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="dhis2_user_man_
mod1.xml" encoding="UTF-8"/&gt; </pre><p>
</p>
    <p>In this case, there is no need to explicitly reference a part of the document, unless you
only want to include a portion of the chapter. If you want to use a section of the chapter, you can assign an id to that section, and then reference that section through an xpointer. </p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_8"></a>A.8.&nbsp;Handling multilingual documentation</h2></div></div></div>
    
    <p>The directory structure of the documentation has been created in order to facilitate the
creation of documents in any language. If you want to create a new set of documents in a given language, simply create a new directory in the <code class="filename">dhis2-docbook-docs/src/docbkx/</code> directory. Be sure to use the ISO 639-1 code for the language you are going to create documents in. A complete list of these codes can be found <a class="ulink" href="http://en.wikipedia.org/wiki/ISO_639-1" target="_top">here</a>. Add a new folder for
images in a sub-directory , replacing XX with the actual ISO 639-1 code for the language you will create documents in. You will also need to edit the <code class="filename">pom.xml </code>file in the main dhis2docs directory. If you are unsure of what changes need to be made to this file, ask on the mailing list first, as this file controls the generation of all the documentation. </p>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_9"></a>A.9.&nbsp;Building the documentation</h2></div></div></div>
    
    <p>One of the key advantages of the DocBook format is that the source documentation can be
transformed into a wide variety of formats, including HTML, chunked HTML, XHTML, PDF, and a number of other formats. There are a wide variety of tools that are capable of performing this task. Basically the XML source of the document is transformed using the standard DocBook XSL style sheets into the desired format. The complete list of tools capable of transforming DocBook will not be listed here, but a few examples are provided below. </p>
    <p>Latest builds of the documentation are available from the <a class="ulink" href="http://www.dhis2.org/documentation" target="_top">DHIS2 website</a>. The latest snapshot builds are available through the continuous integration server located <a class="ulink" href="http://apps.dhis2.org/ci/job/dhis-documentation/lastSuccessfulBuild/artifact/*zip*/archive.zip" target="_top">here</a>.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1732"></a>A.9.1.&nbsp;Building the documentation with Apache maven</h3></div></div></div>
      
      <p>In order to transform the documentation source files to different formats, such as HTML
or PDF, you will need to install the Apache Maven program. You can get a copy <a class="ulink" href="http://maven.apache.org/download.html" target="_top">here</a> or by installing it through your package manager if you are using Linux. Just execute the command <span class="command"><strong>mvn clean package</strong></span> on Windows or on Linux from the <code class="filename">/dhis2-docbook-docs </code>directory. Maven will start to download the necessary components to transform the
documents into HMTL,PDF and RTF. Once the process has completed (be patient the first time, as there are a number of components that must be downloaded), all of the target document types will be generated in the /<code class="filename">dhis2docs/target/docbkx</code> directory in respective sub-directories.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d3453e1739"></a>A.9.2.&nbsp;Building with xmlto</h3></div></div></div>
      
      <p><span class="command"><strong>xmlto</strong></span> is a useful utility available on Linux platforms for
transforming DocBook documents into many different formats. More information on the package can be found <a class="ulink" href="http://cyberelk.net/tim/software/xmlto/" target="_top">here</a>. If you do not want to use Apache Maven for some reason, you can install <span class="command"><strong>xmlto</strong></span> through your package manager. Once you have installed <span class="command"><strong>xmlto</strong></span> you can just execute <span class="command"><strong>xmlto <em class="parameter"><code>html</code></em><em class="parameter"><code>file_to_transform</code></em></strong></span> where the <em class="parameter"><code>file_to_transform</code></em> parameter is the name of the file you wish to transform. There are many other formats available, such as PDF, PS, JavaHelp and others. </p>
    </div>
  </div>
    <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="docs_10"></a>A.10.&nbsp;Committing your changes back to GitHub</h2></div></div></div>
    
    <p>Once you have finished editing your document, you will need to commit your changes back to
GitHub. Open up a command prompt on Windows or a shell on Linux, and navigate to the folder where you have placed your documentation. If you have added any new files or folders to your local repository, you will need to add them to the source tree with the <span class="command"><strong>git add </strong></span> command, followed by the folder or file name(s) that you have added. After that you need to commit your changes. Be sure to include a descriptive comment with your commit. 
<span class="command"><strong>git commit </strong></span><span class="command"><strong>-m "Created Amharic translation of documentation"</strong></span> Finally, you should push the changes back to the repository with <span class="command"><strong>git push origin master</strong></span>
      </p>
    <p>If you have any questions, or cannot find that you can get started, just send an email
with your problem to <code class="email">&lt;<a class="email" href="mailto:dhis2-documenters@lists.launchpad.net">dhis2-documenters@lists.launchpad.net</a>&gt;</code>.</p>
  </div>
  </div>
</div></body></html>