<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Infrastructure</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="keywords" content="DHIS2, HMIS, aggregate data, Health Management Information System, Integrated data repository, Health Information System"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="up" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="prev" href="ch02s05.html" title="2.5.&nbsp;Adding the DHIS 2 menu to your app"><link rel="next" href="ar01.html" title="DHIS 2 Technical Architecture"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Infrastructure</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s05.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ar01.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d5e6268"></a>Chapter&nbsp;3.&nbsp;Infrastructure</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="ch03.html#d5e6271">3.1. Release process</a></span></dt></dl></div>
  
  <p></p>
  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e6271"></a>3.1.&nbsp;Release process</h2></div></div></div>
    
    <p>Checklist for release.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
          <p>In order to tag  the source source code with new release. First temporarily add a dependency to
            dhis-web in the root pom.xml:</p><pre class="screen">&lt;module&gt;dhis-web&lt;/module&gt;</pre><p>Use the mvn
            version plugin with:</p>
          <pre class="screen">mvn versions:set</pre>
          <p>This will prompt you to enter the version. Remove the dhis-web dependency. Update
            application cache manifests in the various apps to new version. Commit the changes to
            trunk.</p>
        </li><li class="listitem">
          <p>Push a release branch to Launchad, e.g. with:</p>
          <pre class="screen">bzr push lp:~dhis2-devs-core/dhis2/2.19</pre>
        </li><li class="listitem">
          <p>Tag source code with SNAPSHOT release.</p>
        </li><li class="listitem">
          <p>Enable email notifications for release branch.</p>
        </li><li class="listitem">
          <p>Create Jenkins for build for the release WAR file.</p>
        </li><li class="listitem">
          <p>Create automatic copy job from Jenkins to dhis2.org.</p>
        </li><li class="listitem">
          <p>Create automatic update of play.dhis2.org/demo and play.dhis2.org/dev
            systems.</p>
        </li><li class="listitem">
          <p>Update the database and WAR file on play.dhis2.org/demo and play.dhis2.org/dev
            instances. To create a dump in directory format and turn it into a tar
            file:</p><pre class="screen">pg_dump dhis2 -Fd -U dhis -j 4 -f db.pgdump
tar zcvf db.tar.gz db.pgdump</pre>
          <p>To unpack the tar file:</p><pre class="screen">tar zxvf db.tar.gz</pre>
          <p>Run reinit-db-instance to make the changes take effect.</p>
        </li><li class="listitem">
          <p>Create a new DHIS 2 Live package on dhis2.org and place it in download/live
            directory. Only the WAR file must be updated. An uncompressed Live package is located on
            the demo server at:</p><pre class="screen">/home/dhis/dhis-live-package</pre>
          <p>Replace the uncompressed WAR file with the new release. Make a compressed Live
            archive and move to /download/live directory.</p>
        </li><li class="listitem">
          <p>Create Javadoc with:</p>
          <pre class="screen">mvn javadoc:aggregate</pre>
          <p>The doc will be put in target folder. Zip it, upload to dhis2.org, unzip and place
            it in download directory.</p>
        </li><li class="listitem">
          <p>Upload sample database to dhis2.org and place it in download/resources
            directory.</p>
        </li><li class="listitem">
          <p>Update download page at www.dhis2.org/downloads with links to new Live package, WAR
            file, source code branch page and sample data including version.</p>
        </li><li class="listitem">
          <p>Write and send release email.</p>
        </li></ol></div>
  </div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s05.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ar01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.5.&nbsp;Adding the DHIS 2 menu to your app&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;DHIS 2 Technical Architecture</td></tr></table></div></body></html>