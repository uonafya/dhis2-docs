<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.13.&nbsp;Data values</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="keywords" content="DHIS2, HMIS, aggregate data, Health Management Information System, Integrated data repository, Health Information System"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="up" href="ch01.html" title="Chapter&nbsp;1.&nbsp;Web API"><link rel="prev" href="ch01s12.html" title="1.12.&nbsp;File resources"><link rel="next" href="ch01s14.html" title="1.14.&nbsp;ADX formatted data"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.13.&nbsp;Data values</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s12.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Web API</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch01s14.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1313"></a>1.13.&nbsp;Data values</h2></div></div></div>
    
    <p>This section is about sending and reading data values.</p>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1316"></a>1.13.1.&nbsp;Sending data values</h3></div></div></div>
      
      <p>A common use-case for system integration is the need to send a set of data values from a
        third-party system into DHIS. In this example we will use the DHIS 2 demo on <a class="ulink" href="http://play.dhis2.org/demo" target="_top">http://play.dhis2.org/demo</a> as basis and we recommend that you follow the provided
        links with a web browser while reading (log in with <span class="italic">admin</span><span class="italic">/district</span> as username/password). We
        assume that we have collected case-based data using a simple software client running on
        mobile phones for the <span class="italic">Mortality &lt;5 years</span> data set in
        the community of <span class="italic">Ngelehun CHC</span> (in <span class="italic">Badjia</span> chiefdom, <span class="italic">Bo</span> district) for the month
        of January 2014. We have now aggregated our data into a statistical report and want to send
        that data to the national DHIS 2 instance.</p>
      <p>The resource which is most appropriate for our purpose of sending data values is the
          <span class="italic">dataValueSets</span> resource. A data value set represents a
        set of data values which have a logical relationship, usually from being captured off the
        same data entry form. We follow the link to the HTML representation which will take us to
          <a class="ulink" href="http://play.dhis2.org/demo/api/dataValueSets" target="_top">http://play.dhis2.org/demo/api/dataValueSets</a>. The format looks like
        this:</p>
      <pre class="screen">&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0" dataSet="dataSetID"
  completeDate="date" period="period" orgUnit="orgUnitID" attributeOptionCombo="aocID"&gt;
  &lt;dataValue dataElement="dataElementID" categoryOptionCombo="cocID" value="1" comment="comment1"/&gt;
  &lt;dataValue dataElement="dataElementID" categoryOptionCombo="cocID" value="2" comment="comment2"/&gt;
  &lt;dataValue dataElement="dataElementID" categoryOptionCombo="cocID" value="3" comment="comment3"/&gt;
&lt;/dataValueSet&gt;</pre>
      <p>JSON is supported in this
        format:</p><pre class="screen">{
  "dataSet": "dataSetID",
  "completeDate": "date",
  "period": "period",
  "orgUnit": "orgUnitID",
  "attributeOptionCombo", "aocID",
  "dataValues": [
    { "dataElement": "dataElementID", "categoryOptionCombo": "cocID", "value": "1", "comment": "comment1" },
    { "dataElement": "dataElementID", "categoryOptionCombo": "cocID", "value": "2", "comment": "comment2" },
    { "dataElement": "dataElementID", "categoryOptionCombo": "cocID", "value": "3", "comment": "comment3" }
  ]
}</pre>
      <p>CSV is supported in this
        format:</p><pre class="screen">"dataelement","period","orgunit","catoptcombo","attroptcombo","value","storedby","lastupd","comment"
"dataElementID","period","orgUnitID","cocID","aocID","1","username","2015-04-01","comment1"
"dataElementID","period","orgUnitID","cocID","aocID","2","username","2015-04-01","comment2"
"dataElementID","period","orgUnitID","cocID","aocID","3","username","2015-04-01","comment3"</pre>
      <p><span class="italic">Note:</span> Please refer to the date and period section
        above for time formats.</p>
      <p>From the example we can see that we need to identify the period, the data set, the org
        unit (facility) and the data elements for which to report.</p>
      <p>To obtain the identifier for the data set we return to the entry point at <a class="ulink" href="http://play.dhis2.org/demo/api" target="_top">http://play.dhis2.org/demo/api</a> and follow the embedded link pointing at the
          <span class="italic">dataSets</span> resource located at <a class="ulink" href="http://play.dhis2.org/demo/api/dataSets" target="_top">http://play.dhis2.org/demo/api/dataSets</a>. From there we find and follow the link to
        the <span class="italic">Mortality &lt; 5 years</span> data set which leads us to
          <a class="ulink" href="http://play.dhis2.org/demo/api/dataSets/pBOMPrpg1QX" target="_top">http://play.dhis2.org/demo/api/dataSets/pBOMPrpg1QX</a>. The resource
        representation for the <span class="italic">Mortality &lt; 5 years</span> data set
        conveniently advertises links to the data elements which are members of it. From here we can
        follow these links and obtain the identifiers of the data elements. For brevity we will only
        report on three data elements: <span class="italic">Measles</span> with id <span class="italic">f7n9E0hX8qk</span>, <span class="italic">Dysentery</span> with id
          <span class="italic">Ix2HsbDMLea</span> and <span class="italic">Cholera</span> with id <span class="italic">eY5ehpbEsB7</span>.</p>
      <p>What remains is to get hold of the identifier of the facility (org unit). The <span class="italic">dataSet</span> representation conveniently provides link to org units
        which report on it so we search for<span class="italic"> Ngelehun CHC</span> and
        follow the link to the HTML representation at <a class="ulink" href="http://play.dhis2.org/demo/api/organisationUnits/DiszpKrYNg8" target="_top">http://play.dhis2.org/demo/api/organisationUnits/DiszpKrYNg8</a>, which tells us that
        the identifier of this org unit is <span class="italic">DiszpKrYNg8</span>.</p>
      <p>From our case-based data we assume that we have 12 cases of measles, 14 cases of
        dysentery and 16 cases of cholera. We have now gathered enough information to be able to put
        together the XML data value set message:</p>
      <pre class="screen">&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0" dataSet="pBOMPrpg1QX"
  completeDate="2014-02-03" period="201401" orgUnit="DiszpKrYNg8"&gt;
  &lt;dataValue dataElement="f7n9E0hX8qk" value="12"/&gt;
  &lt;dataValue dataElement="Ix2HsbDMLea" value="14"/&gt;
  &lt;dataValue dataElement="eY5ehpbEsB7" value="16"/&gt;
&lt;/dataValueSet&gt;</pre>
      <p>In JSON
        format:</p><pre class="screen">{
  "dataSet": "pBOMPrpg1QX",
  "completeData": "2014-02-03",
  "period": "201401",
  "orgUnit": "DiszpKrYNg8",
  "dataValues": [
    { "dataElement": "f7n9E0hX8qk", "value": "1" },
    { "dataElement": "Ix2HsbDMLea", "value": "2" },
    { "dataElement": "eY5ehpbEsB7", "value": "3" }
  ]
}</pre>
      <p>To perform functional testing we will use the cURL tool which provides an easy way of
        transferring data using HTTP. First we save the data value set XML content in a file called
          <span class="italic">datavalueset.xml</span> . From the directory where this file
        resides we invoke the following from the command line:</p>
      <pre class="screen">curl -d @datavalueset.xml "https://play.dhis2.org/demo/api/dataValueSets" 
-H "Content-Type:application/xml" -u admin:district -v</pre>
      <p>For sending JSON content you must set the content-type header
        accordingly:</p><pre class="screen">curl -d @datavalueset.json "https://play.dhis2.org/demo/api/dataValueSets" 
-H "Content-Type:application/json" -u admin:district -v</pre>
      <p>The command will dispatch a request to the demo Web API, set <span class="italic">application/xml</span> as the content-type and authenticate using admin/district as
        username/password. If all goes well this will return a <span class="italic">200 OK</span> HTTP status code. You can verify that the data has been received by opening
        the data entry module in DHIS 2 and select the org unit, data set and period used in this
        example.</p>
      <p>The API follows normal semantics for error handling and HTTP status codes. If you supply
        an invalid username or password, <span class="italic">401 Unauthorized</span> is
        returned. If you supply a content-type other than application/xml, <span class="italic">415 Unsupported Media Type</span> is returned. If the XML content is invalid
        according to the DXF namespace, <span class="italic">400 Bad Request</span> is
        returned. If you provide an invalid identifier in the XML content, <span class="italic">409 Conflict</span> is returned together with a descriptive message.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1372"></a>1.13.2.&nbsp;Sending bulks of data values</h3></div></div></div>
      
      <p>The previous example showed us how to send a set of related data values sharing the same
        period and organisation unit. This example will show us how to send large bulks of data
        values which don't necessarily are logically related.</p>
      <p>Again we will interact with the with <a class="ulink" href="http://play.dhis2.org/demo/api/dataValueSets" target="_top">http://play.dhis2.org/demo/api/dataValueSets</a> resource. This time we will not
        specify the dataSet and completeDate attributes. Also, we will specify the period and
        orgUnit attributes on the individual data value elements instead of on the outer data value
        set element. This will enable us to send data values for various periods and org
        units:</p>
      <pre class="screen">&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0"&gt;
  &lt;dataValue dataElement="f7n9E0hX8qk" period="201401" orgUnit="DiszpKrYNg8" value="12"/&gt;
  &lt;dataValue dataElement="f7n9E0hX8qk" period="201401" orgUnit="FNnj3jKGS7i" value="14"/&gt;
  &lt;dataValue dataElement="f7n9E0hX8qk" period="201402" orgUnit="DiszpKrYNg8" value="16"/&gt;
  &lt;dataValue dataElement="f7n9E0hX8qk" period="201402" orgUnit="Jkhdsf8sdf4" value="18"/&gt;
&lt;/dataValueSet&gt;</pre>
      <p>In JSON
        format:</p><pre class="screen">{
  "dataValues": [
    { "dataElement": "f7n9E0hX8qk", "period": "201401", "orgUnit": "DiszpKrYNg8", "value": "12" },
    { "dataElement": "f7n9E0hX8qk", "period": "201401", "orgUnit": "FNnj3jKGS7i", "value": "14" },
    { "dataElement": "f7n9E0hX8qk", "period": "201402", "orgUnit": "DiszpKrYNg8", "value": "16" },
    { "dataElement": "f7n9E0hX8qk", "period": "201402", "orgUnit": "Jkhdsf8sdf4", "value": "18" }
  ]
}</pre>
      <p>In CSV
        format:</p><pre class="screen">"dataelement","period","orgunit","categoryoptioncombo","attributeoptioncombo","value"
"f7n9E0hX8qk","201401","DiszpKrYNg8","bRowv6yZOF2","bRowv6yZOF2","1"
"Ix2HsbDMLea","201401","DiszpKrYNg8","bRowv6yZOF2","bRowv6yZOF2","2"
"eY5ehpbEsB7","201401","DiszpKrYNg8","bRowv6yZOF2","bRowv6yZOF2","3"</pre>
      <p>We test by using cURL to send the data values in XML format:</p>
      <pre class="screen">curl -d @datavalueset.xml "https://play.dhis2.org/demo/api/dataValueSets" 
-H "Content-Type:application/xml" -u admin:district -v</pre>
      <p>Note that when using CSV format you must use the binary data option to preserve the
        line-breaks in the CSV
        file:</p><pre class="screen">curl --data-binary @datavalueset.csv "https://play.dhis2.org/demo/api/dataValueSets" 
-H "Content-Type:application/csv" -u admin:district -v</pre>
      <p>The data value set resource provides an XML response which is useful when you want to
        verify the impact your request had. The first time we send the data value set request above
        the server will respond with the following<span class="italic"> import summary</span>:</p>
      <pre class="screen">&lt;importSummary&gt;
  &lt;dataValueCount imported="2" updated="1" ignored="1"/&gt;
  &lt;dataSetComplete&gt;false&lt;/dataSetComplete&gt;
&lt;/importSummary&gt;</pre>
      <p>This message tells us that 3 data values were imported, 1 data value was updated while
        zero data values were ignored. The single update comes as a result of us sending that data
        value in the previous example. A data value will be ignored if it references a non-existing
        data element, period, org unit or data set. In our case this single ignored value was caused
        by the last data value having an invalid reference to org unit. The data set complete
        element will display the date of which the data value set was completed, or false if no data
        element attribute was supplied.</p>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1390"></a>1.13.3.&nbsp;Import parameters</h3></div></div></div>
      
      <p>The import process can be customized using a set of import parameters:</p>
      <div class="table"><a name="d5e1393"></a><p class="title"><b>Table&nbsp;1.19.&nbsp;Import parameters</b></p><div class="table-contents">
        
        <table summary="Import parameters" border="1"><colgroup><col><col><col></colgroup><thead><tr><th> Parameter </th><th> Values (default first) </th><th> Description </th></tr></thead><tbody><tr><td>dataElementIdScheme</td><td>id | name | code |&nbsp;attribute:ID</td><td>Property of the data element object to use to map the data values.</td></tr><tr><td>orgUnitIdScheme</td><td>id | name | code | attribute:ID</td><td>Property of the org unit object to use to map the data values.</td></tr><tr><td>idScheme</td><td>id | name | code|&nbsp;attribute:ID</td><td>Property of all objects including data elements, org units and category option combos, to use to map the data values.</td></tr><tr><td>dryRun</td><td>false | true</td><td>Whether to save changes on the server or just return the import summary.</td></tr><tr><td>importStrategy</td><td>CREATE |&nbsp;UPDATE |&nbsp;CREATE_AND_UPDATE |&nbsp;DELETE</td><td>Save objects of all, new or update import status on the server.</td></tr><tr><td>skipExistingCheck</td><td>false | true</td><td>Skip checks for existing data values. Improves performance. Only use for empty databases or when the data values to import do not exist already.</td></tr><tr><td>async</td><td>false | true</td><td>Indicates wether the import should be done asynchronous or synchronous. The former is suitable for very large imports as it ensures that the request does not time out, although it has a significant performance overhead. The latter is faster but requires the connection to persist until the process is finished.</td></tr></tbody></table>
      </div></div><br class="table-break">
      <p>All parameters are optional and can be supplied as query parameters in the request URL
        like this:</p>
      <pre class="screen">api/dataValueSets?dataElementIdScheme=code&amp;orgUnitIdScheme=name&amp;dryRun=true&amp;importStrategy=new</pre>
      <p>They can also be supplied as XML attributes on the data value set element like below.
        XML attributes will override query string parameters.</p>
      <pre class="screen">&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0" dataElementIdScheme="code"
  orgUnitIdScheme="name" dryRun="true" importStrategy="new"&gt;
  ..
&lt;/dataValueSet&gt;</pre>
      <div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d5e1434"></a>1.13.3.1.&nbsp;Identifier schemes</h4></div></div></div>
        
        <p>Regarding the id schemes, by default the identifiers used in the XML messages uses the
          DHIS 2 stable object identifiers referred to as <span class="italic">uid</span>. In
          certain interoperability situations we might experience that external system decides the
          identifiers of the objects. In that case we can use the <span class="italic">code</span> property of the organisation units and other objects to set fixed
          identifiers. When importing data values we hence need to reference the code property
          instead of the identfier property of these metadata objects. Identifier schemes can be
          specified in the XML message as well as in the request as query parameters. To specify it
          in the XML payload you can do this:</p>
        <pre class="screen">&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0" 
  dataElementIdScheme="CODE" orgUnitIdScheme="UID" idScheme="CODE"&gt;
  ..
&lt;/dataValueSet&gt;</pre>
        <p>The parameter table above explains how the id schemes can be specified as query
          parameters. The following rules apply for what takes precedence: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
              <p>Id schemes defined in the XML or JSON payload take precedence over id schemes
                defined as URL query parameters.</p>
            </li><li class="listitem">
              <p>Specific id schemes including dataElementIdScheme and orgUnitIdScheme take
                precedence over the general idScheme.</p>
            </li><li class="listitem">
              <p>The default id scheme is UID, which will be used if no explicit id scheme is
                defined.</p>
            </li></ul></div>
        <p>The following identifier schemes are availabe.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
              <p>uid (default)</p>
            </li><li class="listitem">
              <p>code</p>
            </li><li class="listitem">
              <p>name</p>
            </li><li class="listitem">
              <p>attribute (followed by UID of attribute)</p>
            </li></ul></div>
        <p>The attribute option is special and refers to meta-data attributes which have been
          marked as "unique". When using this option, "attribute" must be immediately followed by
          the uid of the attribute, e.g. "attributeDnrLSdo4hMl".</p>
      </div>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1459"></a>1.13.4.&nbsp;CSV data value format</h3></div></div></div>
      
      <p>The following section describes the CSV format used in DHIS2. The first row is assumed
        to be a header row and will be ignored during import.</p>
      <p>
        </p><div class="table"><a name="d5e1463"></a><p class="title"><b>Table&nbsp;1.20.&nbsp;CSV format of DHIS 2</b></p><div class="table-contents">
          
          <table summary="CSV format of DHIS 2" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>Column</td><td>Required</td><td>Description</td></tr><tr><td>Data element</td><td>Yes</td><td>Refers to ID by default, can also be name and code based on selected id scheme</td></tr><tr><td>Period</td><td>Yes</td><td>In ISO format</td></tr><tr><td>Org unit</td><td>Yes</td><td>Refers to ID by default, can also be name and code based on selected id scheme</td></tr><tr><td>Category option combo</td><td>No</td><td>Refers to ID</td></tr><tr><td>Attribute option combo</td><td>No</td><td>Refers to ID (from version 2.16)</td></tr><tr><td>Value</td><td>No</td><td>Data value</td></tr><tr><td>Stored by</td><td>No</td><td>Refers to username of user who entered the value</td></tr><tr><td>Last updated</td><td>No</td><td>Date in ISO format</td></tr><tr><td>Comment</td><td>No</td><td>Free text comment</td></tr><tr><td>Follow up</td><td>No</td><td>true or false</td></tr></tbody></table>
        </div></div><p><br class="table-break">
      </p>
      <p>An example of a CSV file which can be imported into DHIS 2 is seen below.</p>
      <pre class="screen">"dataelement","period","orgunit","categoryoptioncombo","attroptioncombo","value","storedby","timestamp"
"DUSpd8Jq3M7","201202","gP6hn503KUX","Prlt0C1RF0s",,"7","bombali","2010-04-17"
"DUSpd8Jq3M7","201202","gP6hn503KUX","V6L425pT3A0",,"10","bombali","2010-04-17"
"DUSpd8Jq3M7","201202","OjTS752GbZE","V6L425pT3A0",,"9","bombali","2010-04-06"</pre>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1513"></a>1.13.5.&nbsp;Generating data value set template</h3></div></div></div>
      
      <p>To generate a data value set template for a certain data set you can use the <span class="italic">/api/dataSets/&lt;id&gt;/dataValueSet</span> resource. XML and JSON
        response formats are supported. Example:</p>
      <pre class="screen">api/dataSets/BfMAe6Itzgt/dataValueSet.json</pre>
      <p>The parameters you can use to further adjust the output are described below:</p>
      <div class="table"><a name="d5e1519"></a><p class="title"><b>Table&nbsp;1.21.&nbsp;Data values query parameters</b></p><div class="table-contents">
        
        <table summary="Data values query parameters" border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><thead><tr><th>Query parameter</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>period</td><td>No</td><td>Period to use, will be included without any checks.</td></tr><tr><td>orgUnit</td><td>No</td><td>Organisation unit to use, supports multiple orgUnits, both id and code can be used.</td></tr><tr><td>comment</td><td>No</td><td>Should comments be include, default: Yes.</td></tr><tr><td>orgUnitIdScheme</td><td>No</td><td>Organisation unit scheme to use, supports id | code.</td></tr><tr><td>dataElementIdScheme</td><td>No</td><td>Data-element scheme to use, supports id | code.</td></tr></tbody></table>
      </div></div><br class="table-break">
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1551"></a>1.13.6.&nbsp;Sending, reading and deleting individual data values</h3></div></div></div>
      
      <p>This example will show how to send individual data values to be saved in a request. This
        can be achieved by sending a <span class="italic">POST</span> request to the
          <span class="italic">dataValues</span> resource:</p>
      <pre class="screen">https://play.dhis2.org/demo/api/dataValues</pre>
      <p>The following query parameters are supported for this resource:</p>
      <div class="table"><a name="d5e1558"></a><p class="title"><b>Table&nbsp;1.22.&nbsp;Data values query parameters</b></p><div class="table-contents">
        
        <table summary="Data values query parameters" border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><thead><tr><th>Query parameter</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>de</td><td>Yes</td><td>Data element identifier</td></tr><tr><td>pe</td><td>Yes</td><td>Period identifier</td></tr><tr><td>ou</td><td>Yes</td><td>Organisation unit identifier</td></tr><tr><td>co</td><td>No</td><td>Category option combo identifier, default will be used if omitted</td></tr><tr><td>cc</td><td>No (must combine with cp)</td><td>Attribute combo identifier</td></tr><tr><td>cp</td><td>No (must combine with cc)</td><td>Attribute option identifiers, separated with ; for multiple values</td></tr><tr><td>value</td><td>No</td><td>Data value</td></tr><tr><td>comment</td><td>No</td><td>Data comment</td></tr><tr><td>followUp</td><td>No</td><td>Follow up on data value, will toggle the current boolean value</td></tr></tbody></table>
      </div></div><br class="table-break">
      <p>If any of the identifiers given are invalid, if the data value or comment are invalid or
        if the data is locked, the response will contain the <span class="italic">409 Conflict</span> status code and descriptive text message. If the operation lead to a
        saved or updated value, <span class="italic">200 OK</span> will be returned. An
        example of a request looks like this:</p>
      <pre class="screen">curl "https://play.dhis2.org/demo/api/dataValues?de=s46m5MS0hxu&amp;pe=201301&amp;ou=DiszpKrYNg8&amp;co=Prlt0C1RF0s&amp;value=12"
-X POST -u admin:district -v</pre>
      <p>This resource also allows a special syntax for associating the value to an attribute
        option combination. This can be done by sending the identifier of the attribute combination,
        together with the identifier(s) of the attribute option(s) which the value represents within
        the combination. An example looks like this:</p>
      <pre class="screen">curl "https://play.dhis2.org/demo/api/dataValues?de=s46m5MS0hxu&amp;ou=DiszpKrYNg8&amp;pe=201308&amp;cc=dzjKKQq0cSO&amp;cp=wbrDrL2aYEc;btOyqprQ9e8&amp;value=26"
-X POST -u admin:district -v</pre>
      <p>You can retrieve a data value with a request using the <span class="italic">GET</span> method. The value, comment and followUp params are not applicable in this
        regard:</p>
      <pre class="screen">curl "https://play.dhis2.org/demo/api/dataValues?de=s46m5MS0hxu&amp;pe=201301&amp;ou=DiszpKrYNg8&amp;co=Prlt0C1RF0s"
-X GET -u admin:district -v</pre>
      <p>You can delete a data value with a request using the <span class="italic">DELETE</span> method. </p>
      <div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="datavalue_file"></a>1.13.6.1.&nbsp;Working with file data values</h4></div></div></div>
        
        <p>When dealing with data values which have a data element of type <span class="italic">file</span> there is some deviation from the method described above.
          These data values are special in that the contents of the value is a UID reference to a
            <span class="italic">FileResource</span> object instead of a self-contained
          constant. These data values will behave just like other data values which store text
          content, but should be handled differently in order to produce meaningful input and
          output.</p>
        <p>The process of storing one of these data values roughly goes like this:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
              <p>Upload the file to the <span class="italic">api/fileResources</span>
                endpoint as described in <a class="xref" href="ch01s12.html" title="1.12.&nbsp;File resources">Section&nbsp;1.12, &#8220;File resources&#8221;</a>.</p>
            </li><li class="listitem">
              <p>Retrieve the 'id' property of the returned <span class="italic">FileResource</span>.</p>
            </li><li class="listitem">
              <p>Store the retrieved id <span class="bold"><strong>as the value</strong></span> to the data
                value using any of the methods described above.</p>
            </li></ol></div>
        <p>Only one-to-one relationships between data values and file resources are allowed. This
          is enforced internally so that saving a file resource id in several data values is not
          allowed and will return an error. Deleting the data value will delete the referenced file
          resource. Direct deletion of file resources are not possible.</p>
        <p>The data value can now be retrieved as any other but the returned data will be the UID
          of the file resource. In order to retrieve the actual contents (meaning the file which is
          stored in the file resource mapped to the data value) a GET request must be made to
            <span class="italic">api/dataValues/files</span> mirroring the query parameters
          as they would be for the data value itself. The <span class="italic">dataValues/files</span> endpoint only supports GET requests.</p>
        <p>It is worth noting that due to the underlying storage mechanism working asynchronously
          the file content might not be immediately ready for download from the <span class="italic">dataValues/files</span> endpoint. This is especially true for large
          files which might require time consuming uploads happening in the background to a an
          external file store (depending on the system configuration). Retrieving the file resource
          meta-data from the <span class="italic">api/fileResources/&lt;id&gt;</span> endpoint
          allows checking the <span class="italic">storageStatus</span> of the content before
          attempting to download it.</p>
      </div>
    </div>
    <div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1642"></a>1.13.7.&nbsp;Reading data values</h3></div></div></div>
      
      <p>This section explains how to retrieve data values from the Web API by interacting with
        the <span class="italic">dataValueSets</span> resource. Data values can be retrieved
        in <span class="italic">XML</span>, <span class="italic">JSON</span> and
          <span class="italic">CSV</span> format. Since we want to read data we will use the
          <span class="italic">GET</span> HTTP verb. We will also specify that we are
        interested in the XML resource representation by including an <span class="italic">Accept</span> HTTP header with our request. The following query parameters are
        required:</p>
      <div class="table"><a name="d5e1651"></a><p class="title"><b>Table&nbsp;1.23.&nbsp;Data value set query parameters</b></p><div class="table-contents">
        
        <table summary="Data value set query parameters" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th> Parameter </th><th> Description </th></tr></thead><tbody><tr><td>dataSet</td><td>Data set identifier. Can be repeated any number of times.</td></tr><tr><td>period</td><td>Period identifier in ISO format. Can be repeated any number of times.</td></tr><tr><td>startDate</td><td>Start date for the time span of the values to export.</td></tr><tr><td>endDate</td><td>End date for the time span of the values to export.</td></tr><tr><td>orgUnit</td><td>Organisation unit identifier. Can be repeated any number of times.</td></tr><tr><td>children</td><td>Whether to include the children in the hierarchy of the organisation units.</td></tr><tr><td>lastUpdated</td><td>Include only data values which are updated after the given time stamp.</td></tr><tr><td>limit</td><td>The max number of results in the response.</td></tr><tr><td>idScheme</td><td>Property of meta data objects to use for data values in response.</td></tr><tr><td>dataElementIdScheme</td><td>Property of the data element object to use for data values in response.</td></tr><tr><td>orgUnitIdScheme</td><td>Property of the org unit object to use for data values in response.</td></tr><tr><td>categoryOptionComboIdScheme</td><td>Property of the category option combo object to use for data values in response.</td></tr></tbody></table>
      </div></div><br class="table-break">
      <p>The following response formats are supported:</p>
      <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
          <p>xml (application/xml)</p>
        </li><li class="listitem">
          <p>json (application/json)</p>
        </li><li class="listitem">
          <p>csv (application/csv)</p>
        </li><li class="listitem">
          <p>adx (application/xml+adx)</p>
        </li></ul></div>
      <p>Assuming that we have posted data values to DHIS according to the previous section
        called "Sending data values" we can now put together our request for a single data
        value set and request it using cURL:</p>
      <pre class="screen">curl "https://play.dhis2.org/demo/api/dataValueSets?dataSet=pBOMPrpg1QX&amp;period=201401&amp;orgUnit=DiszpKrYNg8"
-H "Accept:application/xml" -u admin:district -v</pre>
      <p>We can also use the start and end dates query parameters to request a larger bulk of
        data values. I.e. you can also request data values for multiple data sets and org units and
        a time span in order to export larger chunks of data. Note that the period query parameter
        takes presedence over the start and end date parameters. An exampe looks like this:</p>
      <pre class="screen">curl "https://play.dhis2.org/demo/api/dataValueSets?dataSet=pBOMPrpg1QX&amp;dataSet=BfMAe6Itzgt&amp;startDate=2013-01-01
&amp;endDate=2013-01-31&amp;orgUnit=YuQRtpLP10I&amp;orgUnit=vWbkYPRmKyS&amp;children=true" 
-H "Accept:application/xml" -u admin:district -v</pre>
      <p>The response will look like this:</p>
      <pre class="screen">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;dataValueSet xmlns="http://dhis2.org/schema/dxf/2.0" dataSet="pBOMPrpg1QX"
  completeDate="2014-01-02" period="201401" orgUnit="DiszpKrYNg8"&gt;
&lt;dataValue dataElement="eY5ehpbEsB7" period="201401" orgUnit="DiszpKrYNg8"
  categoryOptionCombo="bRowv6yZOF2" value="10003"/&gt;
&lt;dataValue dataElement="Ix2HsbDMLea" period="201401" orgUnit="DiszpKrYNg8"
  categoryOptionCombo="bRowv6yZOF2" value="10002"/&gt;
&lt;dataValue dataElement="f7n9E0hX8qk" period="201401" orgUnit="DiszpKrYNg8"
  categoryOptionCombo="bRowv6yZOF2" value="10001"/&gt;
&lt;/dataValueSet&gt;</pre>
      <p>You can request the data in JSON format like
        this:</p><pre class="screen">https://play.dhis2.org/demo/api/dataValueSets.json?dataSet=pBOMPrpg1QX&amp;period=201401&amp;orgUnit=DiszpKrYNg8</pre>
      <p>The response will look something like
        this:</p><pre class="screen">{
  "dataSet": "pBOMPrpg1QX",
  "completeData": "2014-02-03",
  "period": "201401",
  "orgUnit": "DiszpKrYNg8",
  "dataValues": [
    { "dataElement": "eY5ehpbEsB7", "categoryOptionCombo": "bRowv6yZOF2", "period": "201401",
      "orgUnit": "DiszpKrYNg8", "value": "10003" },
    { "dataElement": "Ix2HsbDMLea", "categoryOptionCombo": "bRowv6yZOF2", "period": "201401",
      "orgUnit": "DiszpKrYNg8", "value": "10002" },
    { "dataElement": "f7n9E0hX8qk", "categoryOptionCombo": "bRowv6yZOF2", "period": "201401",
      "orgUnit": "DiszpKrYNg8", "value": "10001" }
  ]
}</pre>
      <p>You can also request data in CSV format like
        this:</p><pre class="screen">https://play.dhis2.org/demo/api/dataValueSets.csv?dataSet=pBOMPrpg1QX&amp;period=201401&amp;orgUnit=DiszpKrYNg8</pre>
      <p>The response will look like
        this:</p><pre class="screen">dataelement,period,orgunit,categoryoptioncombo,attributeoptioncombo,value,storedby,lastupdated,comment,followup
f7n9E0hX8qk,201401,DiszpKrYNg8,bRowv6yZOF2,bRowv6yZOF2,12,system,2015-04-05T19:58:12.000,comment1,false
Ix2HsbDMLea,201401,DiszpKrYNg8,bRowv6yZOF2,bRowv6yZOF2,14,system,2015-04-05T19:58:12.000,comment2,false
eY5ehpbEsB7,201401,DiszpKrYNg8,bRowv6yZOF2,bRowv6yZOF2,16,system,2015-04-05T19:58:12.000,comment3,false
FTRrcoaog83,201401,DiszpKrYNg8,bRowv6yZOF2,bRowv6yZOF2,12,system,2014-03-02T21:45:05.519,comment4,false</pre>
      <p>The following constraints apply to the data value sets resource:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
            <p>At least one data set must be specified.</p>
          </li><li class="listitem">
            <p>Either at least one period or a start date and end date must be specified.</p>
          </li><li class="listitem">
            <p>At least one organisation unit must be specified.</p>
          </li><li class="listitem">
            <p>Organisation units must be within the hierarchy of the organisation units of the
              authenticated user.</p>
          </li><li class="listitem">
            <p>Limit cannot be less than zero.</p>
          </li></ul></div>
    </div>
  </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s12.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch01s14.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.12.&nbsp;File resources&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.14.&nbsp;ADX formatted data</td></tr></table></div></body></html>