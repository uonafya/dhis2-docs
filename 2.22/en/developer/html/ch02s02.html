<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.2.&nbsp;Creating Apps</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="keywords" content="DHIS2, HMIS, aggregate data, Health Management Information System, Integrated data repository, Health Information System"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="up" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Apps"><link rel="prev" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Apps"><link rel="next" href="ch02s03.html" title="2.3.&nbsp;Installing Apps into DHIS 2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.2.&nbsp;Creating Apps</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;2.&nbsp;Apps</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e6177"></a>2.2.&nbsp;Creating Apps</h2></div></div></div>
    
    <p>DHIS 2 apps are constructed with HTML, JavaScript and CSS files, similar to any other web
      application. Apps also need a special file called <span class="italic">manifest.webapp</span> which describes the contents of the app. This file should be in
      the format specified by the <a class="ulink" href="http://www.w3.org/2008/webapps/manifest/" target="_top">W3C Manifest
        for Web Applications</a>. A basic example of the <span class="italic">manifest.webapp</span> is shown below:</p>
    <p>
      </p><pre class="screen">{
    "version": "0.1",
    "name": "My App",
    "description": "My App is a Packaged App",
    "launch_path": "/index.html",
    "icons": {
        "16": "/img/icons/mortar-16.png",
        "48": "/img/icons/mortar-48.png",
        "128": "/img/icons/mortar-128.png"
    },
    "developer": {
        "name": "Me",
        "url": "http://me.com"
    },
    "default_locale": "en",
    "activities": {
        "dhis": {
            "href": "*"
        }
    }
}</pre><p>
    </p>
    <p>The <span class="italic">manifest.webapp</span> file must be located at the root of
      the project. Among the properties, the <span class="italic">icons&#8594;48</span>
      property is used for the icon that is displayed on the list of apps that are installed on a
      DHIS 2 instance. The <span class="italic">activities</span> property is an
      dhis-specific extension meant to differentiate between a standard Open Web App and an app that
      can be installed in DHIS 2. The <span class="italic">*</span> value for <span class="italic">href</span> is converted to the appropriate URL when the app is uploaded
      and installed in DHIS 2. This value can then be used by the application's JavaScript and HTML
      files to make calls to the DHIS 2 Web API and identify the correct location of DHIS 2 server
      on which the app has been installed. To clarify, the <span class="italic">activities</span> part will look similar to this after the app has been
      installed:</p>
    <pre class="screen">"activities": {
    "dhis": {
        "href": "http://apps.dhis2.org/demo"
    }
 }</pre>
    <p>To read the JSON structure into Javascript, you can use a regular AJAX request and parse
      the JSON into an object. Most Javascript libraries provide some support, for instance with
      jQuery it can be done like this:</p>
    <pre class="screen">$.getJSON( "manifest.webapp", function( json ) {
    var apiBaseUrl = json.activities.dhis.href + "/api";
} );</pre>
    <p>The app can contain HTML, Javascript, CSS, images and other files whic may be required to support it . The file structure could look
      something like this:</p>
    <pre class="screen">/
/manifest.webapp    #manifest file (mandatory)
/css/               #css stylesheets (optional)
/img/               #images (optional)
/js/&nbsp;               #javascripts (optional)</pre>
    <p>Note that it is only the <code class="filename">manifest.webapp</code> file which must be placed in the root. It is up
      the developer to organize CSS, images and Javascript files inside the app as needed.</p>
    <p>All the files in the project should be compressed into a standard zip archive. Note that
      the manifest.webapp file must be located on the root of the zip archive (do not include a
      parent directory in the archive). The zip archive can then be installed into DHIS 2 as you
      will see in the next section.</p>
  </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch02s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Apps&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;2.3.&nbsp;Installing Apps into DHIS 2</td></tr></table></div></body></html>