<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.59.&nbsp;Tracked entity instance query</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer Manual"><link rel="up" href="ch01.html" title="Chapter&nbsp;1.&nbsp;Web API"><link rel="prev" href="ch01s58.html" title="1.58.&nbsp;Tracked entity instance management"><link rel="next" href="ch01s60.html" title="1.60.&nbsp;Tracked entity instance grid query"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.59.&nbsp;Tracked entity instance query</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s58.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Web API</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch01s60.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e12206"></a>1.59.&nbsp;Tracked entity instance query</h2></div></div></div><p>To query for tracked entity instances you can interact with the <span class="italic">/api/trackedEntityInstances</span>
      resource.</p><pre class="screen">/api/24/trackedEntityInstances</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e12216"></a>1.59.1.&nbsp;Request syntax</h3></div></div></div><div class="table"><a name="d0e12219"></a><p class="title"><b>Table&nbsp;1.94.&nbsp;Tracked entity instances query parameters</b></p><div class="table-contents"><table class="table" summary="Tracked entity instances query parameters" border="1"><colgroup><col class="c1"><col class="c3"></colgroup><thead><tr><th>Query parameter</th><th>Description</th></tr></thead><tbody><tr><td>filter</td><td>Attributes to use as a filter for the query. Param can be repeated any number
                of times. Filters can be applied to a dimension on the format
                &lt;attribute-id&gt;:&lt;operator&gt;:&lt;filter&gt;[:&lt;operator&gt;:&lt;filter&gt;].
                Filter values are case-insensitive and can be repeated together with operator any
                number of times. Operators can be EQ | GT | GE | LT | LE | NE | LIKE | IN.</td></tr><tr><td>ou</td><td>Organisation unit idenfiers, separated by ";".</td></tr><tr><td>ouMode</td><td>The mode of selecting organisation units, can be SELECTED | CHILDREN |
                DESCENDANTS | ACCESSIBLE | ALL. Default is SELECTED, which refers to the selected
                organisation units only. See table below for explanations.</td></tr><tr><td>program</td><td>Program identifier. Restricts instances to being enrolled in the given
                program.</td></tr><tr><td>programStatus</td><td>Status of the instance for the given program. Can be ACTIVE | COMPLETED |
                CANCELLED.</td></tr><tr><td>followUp</td><td>Follow up status of the instance for the given program. Can be true | false or
                omitted.</td></tr><tr><td>programStartDate</td><td>Start date of enrollment in the given program for the tracked entity
                instance.</td></tr><tr><td>programEndDate</td><td>End date of enrollment in the given program for the tracked entity
                instance.</td></tr><tr><td>trackedEntity</td><td>Tracked entity identifer. Restricts instances to the given tracked instance
                type.</td></tr><tr><td>page</td><td>The page number. Default page is 1.</td></tr><tr><td>pageSize</td><td>The page size. Default size is 50 rows per page.</td></tr><tr><td>totalPages</td><td>Indicates whether to include the total number of pages in the paging response
                (implies higher response time).</td></tr><tr><td>skipPaging</td><td>Indicates whether paging should be ignored and all rows should be
                returned.</td></tr></tbody></table></div></div><br class="table-break"><p>The available organisation unit selection modes are explained in the following
        table.</p><div class="table"><a name="d0e12299"></a><p class="title"><b>Table&nbsp;1.95.&nbsp;Organisation unit selection modes</b></p><div class="table-contents"><table class="table" summary="Organisation unit selection modes" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>Mode</th><th>Description</th></tr></thead><tbody><tr><td>SELECTED</td><td>Organisation units defined in the request.</td></tr><tr><td>CHILDREN</td><td>Immediate children, i.e. only the first level below, of the organisation units
                defined in the request.</td></tr><tr><td>DESCENDANTS</td><td>All children, i.e. at only levels below, e.g. including children of children,
                of the organisation units defined in the request.</td></tr><tr><td>ACCESSIBLE</td><td>All descendants of the data view organisation units associated with the current
                user. Will fall back to data capture organisation units associated with the current
                user if the former is not defined.</td></tr><tr><td>ALL</td><td>All organisation units in the system. Requires authority.</td></tr></tbody></table></div></div><br class="table-break"><p>The query is case insensitive. The following rules apply to the query parameters.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>At least one organisation unit must be specified using the <span class="italic">ou</span> parameter (one or many), or <span class="italic">ouMode=ALL</span> must be specified.</p></li><li class="listitem"><p>Only one of the <span class="italic">program</span> and <span class="italic">trackedEntity</span> parameters can be specified (zero or
            one).</p></li><li class="listitem"><p>If <span class="italic">programStatus</span> is specified then <span class="italic">program</span> must also be specified.</p></li><li class="listitem"><p>If <span class="italic">followUp</span> is specified then <span class="italic">program</span> must also be specified.</p></li><li class="listitem"><p>If <span class="italic">programStartDate</span> or <span class="italic">programEndDate</span> is specified then <span class="italic">program</span> must also be specified.</p></li><li class="listitem"><p>Filter items can only be specified once.</p></li></ul></div><p>A query for all instances associated with a specific organisation unit can look like
        this:</p><pre class="screen">api/trackedEntityInstances.json?ou=DiszpKrYNg8</pre><p>To query for instances using one attribute with a filter and one attribute without a
        filter, with one organisation unit using the descendants organisation unit query
        mode:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;filter=AMpUYgxuCaE&amp;ou=DiszpKrYNg8;yMCshbaVExv</pre><p>A query for instances where one attribute is included in the response and one attribute
        us used as a filter:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;filter=AMpUYgxuCaE:LIKE:Road&amp;ou=DiszpKrYNg8</pre><p>A query where multiple operand and filters are specified for a filter item:</p><pre class="screen">api/trackedEntityInstances.json?ou=DiszpKrYNg8&amp;program=ur1Edk5Oe2n&amp;filter=lw1SqmMlnfh:GT:150:LT:190</pre><p>To query on an attribute using multiple values in an IN filter:</p><pre class="screen">api/trackedEntityInstances.json?ou=DiszpKrYNg8&amp;filter=dv3nChNSIxy:IN:Scott;Jimmy;Santiago</pre><p>To constrain the response to instances which are part of a specific program you can
        include a program query parameter:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;ou=O6uvpzGd5pu
&amp;ouMode=DESCENDANTS&amp;program=ur1Edk5Oe2n</pre><p>To specify program enrollment dates as part of the query:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;ou=O6uvpzGd5pu&amp;program=ur1Edk5Oe2n
&amp;programStartDate=2013-01-01&amp;programEndDate=2013-09-01</pre><p>To constrain the response to instances of a specific tracked entity you can include a
        tracked entity query parameter:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;ou=O6uvpzGd5pu
&amp;ouMode=DESCENDANTS&amp;trackedEntity=cyl5vuJ5ETQ</pre><p>By default the instances are returned in pages of size 50, to change this you can use
        the page and pageSize query parameters:</p><pre class="screen">api/trackedEntityInstances.json?filter=zHXD5Ve1Efw:EQ:A&amp;ou=O6uvpzGd5pu
&amp;ouMode=DESCENDANTS&amp;page=2&amp;pageSize=3</pre><p>You can use a range of operators for the filtering:</p><div class="table"><a name="d0e12429"></a><p class="title"><b>Table&nbsp;1.96.&nbsp;Filter operators</b></p><div class="table-contents"><table class="table" summary="Filter operators" border="1"><colgroup><col width="87.75pt" class="c1"><col width="368.25pt" class="c2"></colgroup><thead><tr><th>Operator</th><th>Description</th></tr></thead><tbody><tr><td>EQ</td><td>Equal to</td></tr><tr><td>GT</td><td>Greater than</td></tr><tr><td>GE</td><td>Greater than or equal to</td></tr><tr><td>LT</td><td>Less than</td></tr><tr><td>LE</td><td>Less than or equal to</td></tr><tr><td>NE</td><td>Not equal to</td></tr><tr><td>LIKE</td><td>Like (free text match)</td></tr><tr><td>IN</td><td>Equal to one of multiple values separated by ";"</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e12482"></a>1.59.2.&nbsp;Response format</h3></div></div></div><p>This resource supports JSON, JSONP, XLS and CSV resource representations.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>json (application/json)</p></li><li class="listitem"><p>jsonp (application/javascript)</p></li><li class="listitem"><p>xml (application/xml)</p></li></ul></div><p>The response in JSON/XML is in object format and can look like the following (please
        note that field filtering is supported, so if you want a full view, you might want to add
        fields=*):</p><pre class="screen">{
    "trackedEntityInstances": [
        {
            "lastUpdated": "2014-03-28 12:27:52.399",
            "trackedEntity": "cyl5vuJ5ETQ",
            "created": "2014-03-26 15:40:19.997",
            "orgUnit": "ueuQlqb8ccl",
            "trackedEntityInstance": "tphfdyIiVL6",
            "relationships": [],
            "attributes": [
                {
                    "displayName": "Address",
                    "attribute": "AMpUYgxuCaE",
                    "type": "string",
                    "value": "2033 Akasia St"
                },
                {
                    "displayName": "TB number",
                    "attribute": "ruQQnf6rswq",
                    "type": "string",
                    "value": "1Z 989 408 56 9356 521 9"
                },
                {
                    "displayName": "Weight in kg",
                    "attribute": "OvY4VVhSDeJ",
                    "type": "number",
                    "value": "68.1"
                },
                {
                    "displayName": "Email",
                    "attribute": "NDXw0cluzSw",
                    "type": "string",
                    "value": "LiyaEfrem@armyspy.com"
                },
                {
                    "displayName": "Gender",
                    "attribute": "cejWyOfXge6",
                    "type": "optionSet",
                    "value": "Female"
                },
                {
                    "displayName": "Phone number",
                    "attribute": "P2cwLGskgxn",
                    "type": "phoneNumber",
                    "value": "085 813 9447"
                },
                {
                    "displayName": "First name",
                    "attribute": "dv3nChNSIxy",
                    "type": "string",
                    "value": "Liya"
                },
                {
                    "displayName": "Last name",
                    "attribute": "hwlRTFIFSUq",
                    "type": "string",
                    "value": "Efrem"
                },
                {
                    "code": "Height in cm",
                    "displayName": "Height in cm",
                    "attribute": "lw1SqmMlnfh",
                    "type": "number",
                    "value": "164"
                },
                {
                    "code": "City",
                    "displayName": "City",
                    "attribute": "VUvgVao8Y5z",
                    "type": "string",
                    "value": "Kranskop"
                },
                {
                    "code": "State",
                    "displayName": "State",
                    "attribute": "GUOBQt5K2WI",
                    "type": "number",
                    "value": "KwaZulu-Natal"
                },
                {
                    "code": "Zip code",
                    "displayName": "Zip code",
                    "attribute": "n9nUvfpTsxQ",
                    "type": "number",
                    "value": "3282"
                },
                {
                    "code": "Mother maiden name",
                    "displayName": "Mother maiden name",
                    "attribute": "o9odfev2Ty5",
                    "type": "string",
                    "value": "Gabriel"
                },
                {
                    "code": "National identifier",
                    "displayName": "National identifier",
                    "attribute": "AuPLng5hLbE",
                    "type": "string",
                    "value": "465700042"
                },
                {
                    "code": "Occupation",
                    "displayName": "Occupation",
                    "attribute": "A4xFHyieXys",
                    "type": "string",
                    "value": "Biophysicist"
                },
                {
                    "code": "Company",
                    "displayName": "Company",
                    "attribute": "kyIzQsj96BD",
                    "type": "string",
                    "value": "Sav-A-Center"
                },
                {
                    "code": "Vehicle",
                    "displayName": "Vehicle",
                    "attribute": "VHfUeXpawmE",
                    "type": "string",
                    "value": "2008 Citroen Picasso"
                },
                {
                    "code": "Blood type",
                    "displayName": "Blood type",
                    "attribute": "H9IlTX2X6SL",
                    "type": "string",
                    "value": "B-"
                },
                {
                    "code": "Latitude",
                    "displayName": "Latitude",
                    "attribute": "Qo571yj6Zcn",
                    "type": "string",
                    "value": "-30.659626"
                },
                {
                    "code": "Longitude",
                    "displayName": "Longitude",
                    "attribute": "RG7uGl4w5Jq",
                    "type": "string",
                    "value": "26.916172"
                }
            ]
        }
    ]
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s58.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch01s60.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.58.&nbsp;Tracked entity instance management&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.60.&nbsp;Tracked entity instance grid query</td></tr></table></div></body></html>