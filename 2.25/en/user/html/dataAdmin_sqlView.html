<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>20.5.&nbsp;SQL View</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_user_manual_en.html" title="DHIS2 User guide"><link rel="up" href="data_admin.html" title="Chapter&nbsp;20.&nbsp;Data Administration"><link rel="prev" href="dataAdmin_local_management.html" title="20.4.&nbsp;Locale Management"><link rel="next" href="dataAdmin_duplicateDataElimination.html" title="20.6.&nbsp;Duplicate data elimination"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">20.5.&nbsp;SQL View</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dataAdmin_local_management.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;20.&nbsp;Data
    Administration</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="dataAdmin_duplicateDataElimination.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dataAdmin_sqlView"></a>20.5.&nbsp;SQL View</h2></div></div></div><p>The SQL View functionality of DHIS2 will store the SQL view definition internally, and
      then materialize the view when requested. </p><p>Database administrators must be careful about creating database views directly in the DHIS
      2 database. For instance, when the resource tables are generated, all of them will first be
      dropped and then re-created. If any SQL views depend on these tables, an integrity violation
      exception will be thrown and the process will be aborted.</p><p>The SQL views are dropped in reverse alphabetical order based on their names in DHIS2, and
      created in regular alphabetical order. This allows you to have dependencies between SQL views,
      given that views only depend on other views which come earlier in the alphabetical order. For
      instance, "ViewB" can safely depend on "ViewA". Otherwise, having views
      depending on other view result in an integrity violation error.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e18004"></a>20.5.1.&nbsp;Creating a new SQL view</h3></div></div></div><p>To create a new SQL view, click <span class="bold"><strong>Apps</strong></span> &gt; <span class="bold"><strong>Data administration</strong></span> &gt;<span class="bold"><strong>SQL view</strong></span>
        and click <span class="bold"><strong>Add new</strong></span>. </p><div class="screenshot"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td align="center"><img src="resources/images/maintainence/create_sql_view.PNG" align="middle" width="100%"></td></tr></table></div></div><p>The "Name" attribute of the SQL view will be used to determine the name of the
        table that DHIS2 will create when the view is materialized by the user. The
        "Description" attribute allows one to provide some descriptive text about what the
        SQL view actually does. Finally, the "SQL statement" should contain the SQL view
        definition. Only SQL "SELECT" statements are allowed and certain sensitive tables
        (i.e. user information) are not accessible Press "Save" to store the SQL view
        definition.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e18027"></a>20.5.2.&nbsp;SQL View management</h3></div></div></div><p>In order to utilize the SQL views, simply click the view and from the context menu,
        choose "Execute query". Once the process is completed, you will be informed that a
        table has been created. The name of the table will be provided, and is composed from the
        "Description" attribute provided in the SQL view definition. Once the view has
        been generated, you can view it by clicking the view again, and selecting "Show SQL View". </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="resources/images/admon/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you have a view which depends on another view, you should be careful about how the
          views are named. When analytics is run on the DHIS2 server, all views must be dropped, and
          are recreated. When analytics starts, the views are dropped in alphabetical order, and
          then recreated in reverse alphabetical order. Thus, if view A depends on view B, it must
          appear before view B in alphabetical order. If it appears after view B in alphabetical
          order, analytics may fail, as the view with dependencies will not be dropped in the
          correct order.</p></td></tr></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dataAdmin_local_management.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="data_admin.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="dataAdmin_duplicateDataElimination.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">20.4.&nbsp;Locale Management&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_user_manual_en.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;20.6.&nbsp;Duplicate data elimination</td></tr></table></div></body></html>