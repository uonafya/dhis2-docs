<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Development Infrastructure</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer guide"><link rel="up" href="dhis2_developer_manual.html" title="DHIS2 Developer guide"><link rel="prev" href="apps_adding_menu_to_you_app.html" title="2.5.&nbsp;Adding the DHIS 2 menu to your app"><link rel="next" href="technical_architecture.html" title="Chapter&nbsp;4.&nbsp;DHIS2 Technical Architecture"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Development Infrastructure</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apps_adding_menu_to_you_app.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="technical_architecture.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="dev_infrastructure"></a>Chapter&nbsp;3.&nbsp;Development Infrastructure</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="dev_infrastructure.html#dev_inf_release_process">3.1. Release process</a></span></dt></dl></div><p></p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dev_inf_release_process"></a>3.1.&nbsp;Release process</h2></div></div></div><p>Checklist for release.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In order to tag  the source source code with new release. First temporarily add a dependency to
            dhis-web in the root pom.xml:</p><pre class="screen">&lt;module&gt;dhis-web&lt;/module&gt;</pre><p>Use the mvn
            version plugin with:</p><pre class="screen">mvn versions:set
mvn versions:commit</pre><p>This will prompt you to enter the version. Include pom-full.xml. Remove the dhis-web
            dependency. Update application cache manifests in the various apps to new version.
            Commit and push the changes to master.</p></li><li class="listitem"><p>Create a stable release branch off master, e.g.
            with:</p><pre class="screen">git branch 2.25</pre></li><li class="listitem"><p>Push a release branch to Github, e.g. with:</p><pre class="screen">git checkout 2.25
git push --set-upstream origin 2.25</pre></li><li class="listitem"><p>Tag source code with SNAPSHOT release. Include pom-full.xml. Remember to add the
            temporary dhis-web dependency in the root pom.xml. Commit and push the changes to
            master.</p></li><li class="listitem"><p>Create Jenkins build for the release WAR file. Include automatic copy job to
            www.dhis2.org. Include automatic WAR update of play.dhis2.org/demo (add release
            directory on server).</p></li><li class="listitem"><p>Create Jenkins build for the release Javadocs.</p></li><li class="listitem"><p>Update the database and WAR file on play.dhis2.org/demo and play.dhis2.org/dev
            instances. To create a dump in directory format and turn it into a tar
            file:</p><pre class="screen">pg_dump dhis2 -Fd -U dhis -j 4 -f db.pgdump
tar zcvf db.tar.gz db.pgdump</pre><p>To unpack the tar file:</p><pre class="screen">tar zxvf db.tar.gz</pre><p>Run the reinit-db-instance script to make the database take effect.</p></li><li class="listitem"><p>Create a new DHIS2 Live package on www.dhis2.org and place it in download/live
            directory. Only the WAR file must be updated. An uncompressed Live package is located on
            the demo server at:</p><pre class="screen">/home/dhis/dhis-live-package</pre><p>Replace the uncompressed WAR file with the new release. Make a compressed Live
            archive and move to /download/live directory.</p></li><li class="listitem"><p>Upload sample database to www.dhis2.org and place it in download/resources
            directory.</p></li><li class="listitem"><p>Update download page at www.dhis2.org/downloads with links to new Live package, WAR
            file, source code branch page and sample data including version.</p></li><li class="listitem"><p>Add stable WAR file download link in nginx.conf on dhis2.org.</p></li><li class="listitem"><p>Create a documentation branch and update documentation page at
            www.dhis2.org/documentation with links to documentation and Javadocs.</p></li><li class="listitem"><p>Write and send release email.</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apps_adding_menu_to_you_app.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="technical_architecture.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.5.&nbsp;Adding the DHIS 2 menu to your app&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;DHIS2 Technical Architecture</td></tr></table></div></body></html>