<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.72.&nbsp;Data store</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer guide"><link rel="up" href="webapi.html" title="Chapter&nbsp;1.&nbsp;Web API"><link rel="prev" href="webapi_app_store.html" title="1.71.&nbsp;App store"><link rel="next" href="webapi_user_data_store.html" title="1.73.&nbsp;User data store"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.72.&nbsp;Data store</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="webapi_app_store.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Web API</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="webapi_user_data_store.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="webapi_data_store"></a>1.72.&nbsp;Data store</h2></div></div></div><p>Using the <span class="emphasis"><em>dataStore</em></span> resource, developers can store arbitrary data for
      their apps. Access to a datastore's namespace is limited to the user's access to the
      corresponding app, if the app has reserved the namespace. For example a user with access to
      the "sampleApp" application will also be able to use the sampleApp namespace in the
      datastore. If a namespace is not reserved, no specific access is required to use
      it.</p><pre class="screen">/api/25/dataStore</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14190"></a>1.72.1.&nbsp;Data store structure</h3></div></div></div><p>Data store entries consist of a namespace, key and value. The combination of namespace
        and key is unique. The value data type is JSON.</p><div class="table"><a name="d0e14195"></a><p class="title"><b>Table&nbsp;1.106.&nbsp;Data store structure</b></p><div class="table-contents"><table class="table" summary="Data store structure" border="1"><colgroup><col class="c1"><col class="c2"><col class="newCol3"></colgroup><thead><tr><th>Item</th><th>Description</th><th>Data type</th></tr></thead><tbody><tr><td>Namespace</td><td>Namespace for organization of entries.</td><td>String</td></tr><tr><td>Key</td><td>Key for identifiaction of values.</td><td>String</td></tr><tr><td>Value</td><td>Value holding the information for the entry.</td><td>JSON</td></tr><tr><td>Encrypted</td><td>Indicates whether the value of the given key should be encrypted</td><td>Boolean</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14239"></a>1.72.2.&nbsp;Get keys and namespaces</h3></div></div></div><p>For a list of all existing namespaces:</p><pre class="screen">GET /api/25/dataStore</pre><p>Example curl request for
        listing:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore" -X GET -u admin:district -v</pre><p>Example response:</p><p>
        </p><pre class="screen">[
    "foo",
    "bar"
]</pre><p>
      </p><p>For a list of all keys in a
        namespace:</p><pre class="screen">GET /api/25/dataStore/&lt;namespace&gt;</pre><p>Example curl request for
        listing:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore/foo" -X GET -u admin:district -v</pre><p>Example response:</p><pre class="screen">[
    "key_1",
    "key_2"
]</pre><p>To retrieve a value for an existing key from a
        namespace:</p><pre class="screen">GET /api/25/dataStore/&lt;namespace&gt;/&lt;key&gt;</pre><p>Example curl request for
        retrieval:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore/foo/key_1" -X GET -u admin:district -v</pre><p>Example response:</p><pre class="screen">{
    "foo":"bar"
}</pre><p>To retrieve meta-data for en existing key from a namespace:
        </p><pre class="screen">GET /api/25/dataStore/</pre><p>Example curl request for
        retrieval:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore/foo/key_1/metaData" -X GET -u admin:district -v</pre><p>Example
        response:</p><pre class="screen">{
    "created": "...",
    "user": {...},
    "namespace": "foo",
    "key": "key_1"
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14293"></a>1.72.3.&nbsp;Create values</h3></div></div></div><p>To create a new key and value for a
        namespace:</p><pre class="screen">POST /api/25/dataStore/&lt;namespace&gt;/&lt;key&gt;</pre><p>Example curl request for create, assuming a valid json
        payload:</p><pre class="screen">curl "https://play.dhis2.org/demo/api/25/dataStore/foo/key_1" -X POST 
  -H "Content-Type: application/json" -d "{\"foo\":\"bar\"}" -u admin:district -v</pre><p>Example
        response:</p><pre class="screen">{
    "httpStatus": "OK",
    "httpStatusCode": 201,
    "status": "OK",
    "message": "Key 'key_1' created."
}</pre><p>If you require the data you store to be encrypted (for example user credentials or
        similar) you can append a query to the url like
        this:</p><pre class="screen">GET /api/25/dataStore/&lt;namespace&gt;/&lt;key&gt;?encrypt=true</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14312"></a>1.72.4.&nbsp;Update values</h3></div></div></div><p>To update a key that exists in a
        namespace:</p><pre class="screen">PUT /api/25/dataStore/&lt;namespace&gt;/&lt;key&gt;</pre><p>Example curl request for update, assuming valid JSON
        payload:</p><pre class="screen">curl "https://play.dhis2.org/demo/api/25/dataStore/foo/key_1" -X PUT -d "[1, 2, 3]" 
  -H "Content-Type: application/json" -u admin:district -v</pre><p>Example
        response:</p><pre class="screen">{
    "httpStatus": "OK",
    "httpStatusCode": 200,
    "status": "OK",
    "message": "Key 'key_1' updated."
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e14327"></a>1.72.5.&nbsp;Delete keys</h3></div></div></div><p>To delete an existing key from a
        namespace:</p><pre class="screen">DELETE /api/25/dataStore/&lt;namespace&gt;/&lt;key&gt;</pre><p>Example curl request for
        delete:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore/foo/key_1" -X DELETE -u admin:district -v</pre><p>Example
        response:</p><pre class="screen">{
    "httpStatus": "OK",
    "httpStatusCode": 200,
    "status": "OK",
    "message": "Key 'key_1' deleted from namespace 'foo'."
}</pre><p>To delete all keys in a
        namespace:</p><pre class="screen">DELETE /api/25/dataStore/&lt;namespace&gt;</pre><p>Example curl request for
        delete:</p><pre class="screen">curl "play.dhis2.org/demo/api/25/dataStore/foo" -X DELETE -u admin:district -v</pre><p>Example
        response:</p><pre class="screen">{
    "httpStatus": "OK",
    "httpStatusCode": 200,
    "status": "OK",
    "message": "Namespace 'foo' deleted."
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="webapi_app_store.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="webapi.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="webapi_user_data_store.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.71.&nbsp;App store&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.73.&nbsp;User data store</td></tr></table></div></body></html>