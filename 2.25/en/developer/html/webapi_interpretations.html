<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.29.&nbsp;Interpretations</title><link rel="stylesheet" type="text/css" href="resources/css/docbook_bsd.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="dhis2_developer_manual.html" title="DHIS2 Developer guide"><link rel="up" href="webapi.html" title="Chapter&nbsp;1.&nbsp;Web API"><link rel="prev" href="webapi_message_conversations.html" title="1.28.&nbsp;Message conversations"><link rel="next" href="webapi_viewing_analytical_resource_representations.html" title="1.30.&nbsp;Viewing analytical resource representations"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.29.&nbsp;Interpretations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="webapi_message_conversations.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Web API</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="webapi_viewing_analytical_resource_representations.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="webapi_interpretations"></a>1.29.&nbsp;Interpretations</h2></div></div></div><p>For resources related to data analysis in DHIS 2, such as pivot tables, charts, maps,
      event reports and event charts, you can write and share data interpretations. An
      interpretation can be a comment, question, observation or interpretation about a data report
      or visualization.</p><pre class="screen">/api/25/interpretations</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_reading_interpretations"></a>1.29.1.&nbsp;Reading interpretations</h3></div></div></div><p>To read interpretations we will interact with the <span class="italic">/api/25/interpretations</span> resource. A typical GET request using field filtering
        can look like
        this:</p><pre class="screen">GET /api/25/interpretations?fields=*,comments[id,text,user]</pre><p>The output in JSON response format could look like below (additional fields omitted for
        brevity):</p><pre class="screen">{
    "interpretations": [{
        "id": "XSHiFlHAhhh",
        "created": "2013-05-30T10:24:06.181+0000",
        "text": "Data looks suspicious, could be a data entry mistake.",
        "type": "REPORT_TABLE",
        "likes": 2,
        "user": {
          "id": "uk7diLujYif"
        },
        "reportTable": {
          "id": "LcSxnfeBxyi"
        }
    }, {
        "id": "kr4AnZmYL43",
        "created": "2013-05-29T14:47:13.081+0000",
        "text": "Delivery rates in Bo looks high.",
        "type": "CHART",
        "likes": 3,
        "user": {
          "id": "uk7diLujYif"
        },
        "chart": {
          "id": "HDEDqV3yv3H"
        },
        "comments": [{
            "id": "iB4Etq8yTE6",
            "text": "This report indicates a surge",
            "user": {
                "id": "B4XIfwOcGyI"
            }, {
            "id": "iB4Etq8yTE6",
            "text": "Likely caused by heavy rainfall",
            "user": {
                "id": "B4XIfwOcGyI"
            }]
        }
    }]
}</pre><div class="table"><a name="d0e6725"></a><p class="title"><b>Table&nbsp;1.53.&nbsp;Interpretation fields</b></p><div class="table-contents"><table class="table" summary="Interpretation fields" border="1"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>The interpretation identifier.</td></tr><tr><td>created</td><td>The time of when the interpretation was created.</td></tr><tr><td>type</td><td>The type of analytical object being interpreted. Valid options: REPORT_TABLE,
                CHART, MAP, EVENT_REPORT, EVENT_CHART, DATASET_REPORT.</td></tr><tr><td>user</td><td>Association to the user creating the interpretation.</td></tr><tr><td>reportTable</td><td>Association to the report table if type is REPORT_TABLE.</td></tr><tr><td>chart</td><td>Association to the chart if type is CHART.</td></tr><tr><td>map</td><td>Association to the map if type is MAP.</td></tr><tr><td>eventReport</td><td>Association to the event report is type is EVENT_REPORT.</td></tr><tr><td>eventChart</td><td>Association to the event chart if type is EVENT_CHART.</td></tr><tr><td>dataSet</td><td>Association to the data set if type is DATASET_REPORT.</td></tr><tr><td>comments</td><td>Array of comments for the interpretation. The text field holds the actual
                comment.</td></tr></tbody></table></div></div><br class="table-break"><p>For all analytical objects you can append <span class="italic">/data</span> to
        the URL to retrieve the data associated with the resource (as apposed to the metadata). As
        an example, by following the map link and appending /data one can retrieve a PNG (image)
        representation of the thematic map through the following URL:</p><pre class="screen">https://play.dhis2.org/demo/api/25/maps/bhmHJ4ZCdCd/data</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_writing_interpretations"></a>1.29.2.&nbsp;Writing interpretations</h3></div></div></div><p>When writing interpretations you will supply the interpretation text as the request body
        using a POST request with content type "text/plain". The URL pattern looks like the below,
        where {object-type} refers to the type of the object being interpreted, and {object-id}
        refers to the identifier of the obejct being
        interpreted.</p><pre class="screen">/api/25/interpretations/{object-type}/{object-id}</pre><p>Valid options for object type are <span class="emphasis"><em>reportTable</em></span>,
          <span class="emphasis"><em>chart</em></span>, <span class="emphasis"><em>map</em></span>, <span class="emphasis"><em>eventReport</em></span>,
          <span class="emphasis"><em>eventChart</em></span> and <span class="emphasis"><em>dataSetReport</em></span>.</p><p>Some valid examples for interpretations are listed
        below.</p><pre class="screen">/api/25/interpretations/reportTable/yC86zJxU1i1
/api/25/interpretations/chart/ZMuYVhtIceD
/api/25/interpretations/map/FwLHSMCejFu
/api/25/interpretations/eventReport/xJmPLGP3Cde
/api/25/interpretations/eventChart/nEzXB2M9YBz
/api/25/interpretations/dataSetReport/tL7eCjmDIgM</pre><p>As
        an example we will start by writing an interpretation for the chart with identifier
          <span class="emphasis"><em>EbRN2VIbPdV</em></span>. To write chart interpretations we will interact with the
          <span class="emphasis"><em>/api/25/interpretations/chart/{chartId}</em></span> resource. The interpretation
        will be the request body. Based on this we can put together the following request using
        cURL:</p><pre class="screen">curl -d "This chart shows a significant ANC 1-3 dropout" -X POST
  "https://play.dhis2.org/demo/api/25/interpretations/chart/EbRN2VIbPdV"
  -H "Content-Type:text/plain" -u admin:district</pre><p>Notice that the response provides a Location header with a value indicating the location
        of the created interpretation. This is useful from a client perspective when you would like
        to add a comment to the interpretation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_updating_removing_interpretations"></a>1.29.3.&nbsp;Updating and removing interpretations</h3></div></div></div><p>To update an existing interpretation you can use a PUT request where the interpretation
        text is the request body using the following URL pattern, where {id} refers to the
        interpretation identifier:</p><pre class="screen">/api/25/interpretations/{id}</pre><p>Based on this we can use curl to update the
        interpretation:</p><pre class="screen">curl -d "This charts shows a high dropout" -X PUT
  "https://play.dhis2.org/demo/api/25/interpretations/chart/EV08iI1cJRA"
  -H "Content-Type:text/plain" -u admin:district</pre><p>You can use the same URL pattern as above using a DELETE request to remove the
        interpretation.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_creating_interpretation_comments"></a>1.29.4.&nbsp;Creating interpretation comments</h3></div></div></div><p>When writing comments to interpretations you will supply the comment text as the request
        body using a POST request with content type "text/plain". The URL pattern looks like the
        below, where {interpretation-id} refers to the interpretation
        identifier.</p><pre class="screen">/api/25/interpretations/{interpretation-id}/comments</pre><p>Second, we will write a comment to the interpretation we wrote in the example above. By
        looking at the interpretation response you will see that a <span class="italic">Location</span> header is returned. This header tells us the URL of the newly created
        interpretation and from that we can read its identifier. This identifier is randomly
        generated so you will have to replace the one in the command below with your own. To write a
        comment we can interact with the <span class="emphasis"><em>/api/25/interpretations/{id}/comments"</em></span>
        resource like this:</p><pre class="screen">curl -d "An intervention is needed" -X POST
  "https://play.dhis2.org/demo/api/25/interpretations/j8sjHLkK8uY/comments"
  -H "Content-Type:text/plain" -u admin:district -v</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_updating_removing_interpretation_comments"></a>1.29.5.&nbsp;Updating and removing interpretation comments</h3></div></div></div><p>To updating an interpretation comment you can use a PUT request where the comment text
        is the request body using the following URL
        pattern:</p><pre class="screen">/api/25/interpretations/{interpretation-id}/comments/{comment-id}</pre><p>Based on this we can use curl to update the
        comment:</p><pre class="screen">curl -d "I agree with that." -X PUT
  https://play.dhis2.org/demo/api/25/interpretations/j8sjHLkK8uY/comments/idAzzhVWvh2"
  -H "Content-Type:text/plain" -u admin:district -v</pre><p>You can use the same URL pattern as above using a DELETE request to the remove the
        interpretation comment.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="webapi_liking_interpretations"></a>1.29.6.&nbsp;Liking interpretations</h3></div></div></div><p>To like an interpretation you can use an empty POST request to the
          <span class="emphasis"><em>like</em></span>
        resource:</p><pre class="screen">POST /api/25/interpretations/{id}/like</pre><p>A like will be added for the currently authenticated user. A user can only like an
        interpretation once.</p><p>To remove a like for an interpretation you can use a DELETE request to the same resource
        as for the like operation.</p><p>The like status of an intepretation can be viewed by looking at the regular Web API
        representation:</p><pre class="screen">GET /api/25/interpretations/{id}</pre><p>The like information is found in the <span class="emphasis"><em>likes</em></span> field, which represents
        the number of likes, and the <span class="emphasis"><em>likedBy</em></span> array, which enumerates the users
        who have liked the interpretation.</p><p>
        </p><pre class="screen">{
    "id": "XSHiFlHAhhh",
    "text": "Data looks suspicious, could be a data entry mistake.",
    "type": "REPORT_TABLE",
    "likes": 2,
    "likedBy": [{
        "id": "k7Hg12fJ2f1"
    }, {
        "id: "gYhf26fFkjFS"
    }]
}</pre><p>
      </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="webapi_message_conversations.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="webapi.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="webapi_viewing_analytical_resource_representations.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.28.&nbsp;Message conversations&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="dhis2_developer_manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.30.&nbsp;Viewing analytical resource representations</td></tr></table></div></body></html>